

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Quick Start &mdash; Singularity container 3.4 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/js/ga.js"></script>
        <script src="_static/js/footer.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributing" href="contributing.html" />
    <link rel="prev" title="User Guide" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Singularity container
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#quick-installation-steps">Quick Installation Steps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-system-dependencies">Install system dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-go">Install Go</a></li>
<li class="toctree-l3"><a class="reference internal" href="#download-singularity-from-a-release">Download Singularity from a release</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compile-the-singularity-source-code">Compile the Singularity source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#overview-of-the-singularity-interface">Overview of the Singularity Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#download-pre-built-images">Download pre-built images</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interact-with-images">Interact with images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#shell">Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="#executing-commands">Executing Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-a-container">Running a container</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-files">Working with Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-images-from-scratch">Build images from scratch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sandbox-directories">Sandbox Directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#converting-images-from-one-format-to-another">Converting images from one format to another</a></li>
<li class="toctree-l3"><a class="reference internal" href="#singularity-definition-files">Singularity Definition Files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Container Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_a_container.html">Build a container</a></li>
<li class="toctree-l1"><a class="reference internal" href="definition_files.html">The Definition File</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_env.html">Build Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="encryption.html">Encrypted Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud_library.html">Cloud Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="singularity_and_docker.html">Singularity and Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="bind_paths_and_mounts.html">Bind Paths and Mounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent_overlays.html">Persistent Overlays</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_services.html">Running Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_and_metadata.html">Environment and Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="oci_runtime.html">OCI Runtime Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Container Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_commands.html">Key commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="signNverify.html">Sign and Verify</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="security_options.html">Security Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Network Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="fakeroot.html">Fakeroot feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="endpoint.html">Remote Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="cgroups.html">Cgroups Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpi.html">Singularity and MPI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Singularity container</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Quick Start</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/sylabs/singularity-userdocs/blob/master/quick_start.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-start">
<span id="id1"></span><h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<p id="sec-quickstart">This guide is intended for running Singularity on a computer where you have root
(administrative) privileges.</p>
<p>If you need to request an installation on your shared resource, see the
<a class="reference internal" href="installation.html#installationrequest"><span class="std std-ref">requesting an installation help page</span></a> for
information to send to your system administrator.</p>
<p>For any additional help or support contact the Sylabs team:
<a class="reference external" href="https://www.sylabs.io/contact/">https://www.sylabs.io/contact/</a></p>
<div class="section" id="quick-installation-steps">
<span id="quick-installation"></span><h2>Quick Installation Steps<a class="headerlink" href="#quick-installation-steps" title="Permalink to this headline">¶</a></h2>
<p>You will need a Linux system to run Singularity.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is only a short manual for Quick Installation. For details on
different methods of installation, versions, and RPM etc, please refer to
the <a class="reference internal" href="installation.html#installation"><span class="std std-ref">Installation page</span></a>.</p>
</div>
<div class="section" id="install-system-dependencies">
<h3>Install system dependencies<a class="headerlink" href="#install-system-dependencies" title="Permalink to this headline">¶</a></h3>
<p>You must first install development libraries to your host. Assuming Ubuntu
(apply similar to RHEL derivatives):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get update &amp;&amp; sudo apt-get install -y \
    build-essential \
    libssl-dev \
    uuid-dev \
    libgpgme11-dev \
    squashfs-tools \
    libseccomp-dev \
    wget \
    pkg-config \
    git
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">squashfs-tools</span></code> is only a dependency for commands that build
images. The <code class="docutils literal notranslate"><span class="pre">build</span></code> command obviously relies on <code class="docutils literal notranslate"><span class="pre">squashfs-tools</span></code>, but
other commands may do so as well if they are ran using container images
from Docker Hub for instance.</p>
</div>
<p>There are 3 broad steps to installing Singularity:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#install"><span class="std std-ref">Installing Go</span></a></p></li>
<li><p><a class="reference internal" href="#download"><span class="std std-ref">Downloading Singularity</span></a></p></li>
<li><p><a class="reference internal" href="#compile"><span class="std std-ref">Compiling Singularity Source Code</span></a></p></li>
</ol>
</div>
<div class="section" id="install-go">
<span id="install"></span><h3>Install Go<a class="headerlink" href="#install-go" title="Permalink to this headline">¶</a></h3>
<p>Singularity v3 and above is written primarily in Go, so you will need Go
installed to compile it from source.</p>
<p>This is one of several ways to <a class="reference external" href="https://golang.org/doc/install">install and configure Go</a>.</p>
<p>Visit the <a class="reference external" href="https://golang.org/dl/">Go Downloads page</a> and pick a package
archive suitable to the environment you are in. Once the Download is complete,
extract the archive to <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code> (or use other instructions on go installation
page). Alternatively, follow the commands here:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ export VERSION=1.12 OS=linux ARCH=amd64 &amp;&amp; \  # Replace the values as needed
  wget https://dl.google.com/go/go$VERSION.$OS-$ARCH.tar.gz &amp;&amp; \ # Downloads the required Go package
  sudo tar -C /usr/local -xzvf go$VERSION.$OS-$ARCH.tar.gz &amp;&amp; \ # Extracts the archive
  rm go$VERSION.$OS-$ARCH.tar.gz    # Deletes the ``tar`` file
</pre></div>
</div>
<p>Set the Environment variable <code class="docutils literal notranslate"><span class="pre">PATH</span></code> to point to Go:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ echo &#39;export PATH=/usr/local/go/bin:$PATH&#39; &gt;&gt; ~/.bashrc &amp;&amp; \
  source ~/.bashrc
</pre></div>
</div>
</div>
<div class="section" id="download-singularity-from-a-release">
<span id="download"></span><h3>Download Singularity from a release<a class="headerlink" href="#download-singularity-from-a-release" title="Permalink to this headline">¶</a></h3>
<p>You can download Singularity from one of the releases. To see a full list, visit
<a class="reference external" href="https://github.com/sylabs/singularity/releases">the GitHub release page</a>.
After deciding on a release to install, you can run the following commands to
proceed with the installation.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ export VERSION=3.4.0 &amp;&amp; # adjust this as necessary \
    wget https://github.com/sylabs/singularity/releases/download/v${VERSION}/singularity-${VERSION}.tar.gz &amp;&amp; \
    tar -xzf singularity-${VERSION}.tar.gz &amp;&amp; \
    cd singularity
</pre></div>
</div>
</div>
<div class="section" id="compile-the-singularity-source-code">
<span id="compile"></span><h3>Compile the Singularity source code<a class="headerlink" href="#compile-the-singularity-source-code" title="Permalink to this headline">¶</a></h3>
<p>Now you are ready to build Singularity. Dependencies will be automatically
downloaded. You can build Singularity using the following commands:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./mconfig &amp;&amp; \
    make -C builddir &amp;&amp; \
    sudo make -C builddir install
</pre></div>
</div>
<p>Singularity must be installed as root to function properly.</p>
</div>
</div>
<div class="section" id="overview-of-the-singularity-interface">
<h2>Overview of the Singularity Interface<a class="headerlink" href="#overview-of-the-singularity-interface" title="Permalink to this headline">¶</a></h2>
<p>Singularity’s <a class="reference internal" href="cli.html#cli"><span class="std std-ref">command line interface</span></a> allows you to build
and interact with containers transparently. You can run programs inside a
container as if they were running on your host system. You can easily redirect
IO, use pipes, pass arguments, and access files, sockets, and ports on the host
system from within a container.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">help</span></code> command gives an overview of Singularity options and subcommands as
follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  $ singularity help

  Linux container platform optimized for High Performance Computing (HPC) and
  Enterprise Performance Computing (EPC)

  Usage:
    singularity [global options...]

  Description:
    Singularity containers provide an application virtualization layer enabling
    mobility of compute via both application and environment portability. With
    Singularity one is capable of building a root file system that runs on any
    other Linux system where Singularity is installed.

  Options:
    -d, --debug     print debugging information (highest verbosity)
    -h, --help      help for singularity
        --nocolor   print without color output (default False)
    -q, --quiet     suppress normal output
    -s, --silent    only print errors
    -v, --verbose   print additional information

  Available Commands:
    build       Build a Singularity image
    cache       Manage the local cache
    capability  Manage Linux capabilities for users and groups
    exec        Run a command within a container
    help        Help about any command
    inspect     Show metadata for an image
    instance    Manage containers running as services
    key         Manage OpenPGP keys
    oci         Manage OCI containers
    plugin      Manage singularity plugins
    pull        Pull an image from a URI
    push        Upload image to the provided library (default is &quot;cloud.sylabs.io&quot;)
    remote      Manage singularity remote endpoints
    run         Run the user-defined default command within a container
    run-help    Show the user-defined help for an image
    search      Search a Container Library for images
    shell       Run a shell within a container
    sif         siftool is a program for Singularity Image Format (SIF) file manipulation
    sign        Attach a cryptographic signature to an image
    test        Run the user-defined tests within a container
    verify      Verify cryptographic signatures attached to an image
    version     Show the version for Singularity

Examples:
  $ singularity help &lt;command&gt; [&lt;subcommand&gt;]
  $ singularity help build
  $ singularity help instance start


For additional help or support, please visit https://www.sylabs.io/docs/
</pre></div>
</div>
<p>Information about subcommand can also be viewed with the <code class="docutils literal notranslate"><span class="pre">help</span></code> command.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity help verify
Verify cryptographic signatures on container

Usage:
  singularity verify [verify options...] &lt;image path&gt;

Description:
  The verify command allows a user to verify cryptographic signatures on SIF
  container files. There may be multiple signatures for data objects and
  multiple data objects signed. By default the command searches for the primary
  partition signature. If found, a list of all verification blocks applied on
  the primary partition is gathered so that data integrity (hashing) and
  signature verification is done for all those blocks.

Options:
  -g, --groupid uint32   group ID to be verified
  -h, --help             help for verify
  -i, --id uint32        descriptor ID to be verified
  -l, --local            only verify with local keys
  -u, --url string       key server URL (default &quot;https://keys.sylabs.io&quot;)


Examples:
  $ singularity verify container.sif


For additional help or support, please visit https://www.sylabs.io/docs/
</pre></div>
</div>
<p>Singularity uses positional syntax (i.e. the order of commands and options
matters). Global options affecting the behavior of all commands follow the main
<code class="docutils literal notranslate"><span class="pre">singularity</span></code> command. Then sub commands are followed by their options
and arguments.</p>
<p>For example, to pass the <code class="docutils literal notranslate"><span class="pre">--debug</span></code> option to the main <code class="docutils literal notranslate"><span class="pre">singularity</span></code> command
and run Singularity with debugging messages on:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity --debug run library://sylabsed/examples/lolcow
</pre></div>
</div>
<p>To pass the <code class="docutils literal notranslate"><span class="pre">--containall</span></code> option to the <code class="docutils literal notranslate"><span class="pre">run</span></code> command and run a
Singularity image in an isolated manner:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity run --containall library://sylabsed/examples/lolcow
</pre></div>
</div>
<p>Singularity 2.4 introduced the concept of command groups. For instance, to list
Linux capabilities for a particular user, you would use the  <code class="docutils literal notranslate"><span class="pre">list</span></code> command in
the <code class="docutils literal notranslate"><span class="pre">capability</span></code> command group like so:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity capability list --user dave
</pre></div>
</div>
<p>Container authors might also write help docs specific to a container or for an
internal module called an <code class="docutils literal notranslate"><span class="pre">app</span></code>. If those help docs exist for a particular
container, you can view them like so.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity inspect --helpfile container.sif  # See the container&#39;s help, if provided

$ singularity inspect --helpfile --app=foo foo.sif  # See the help for foo, if provided
</pre></div>
</div>
</div>
<div class="section" id="download-pre-built-images">
<h2>Download pre-built images<a class="headerlink" href="#download-pre-built-images" title="Permalink to this headline">¶</a></h2>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">search</span></code> command to locate groups, collections, and
containers of interest on the <a class="reference external" href="https://cloud.sylabs.io/library">Container Library</a> .</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity search alp
No users found for &#39;alp&#39;

Found 1 collections for &#39;alp&#39;
    library://jchavez/alpine

Found 5 containers for &#39;alp&#39;
    library://jialipassion/official/alpine
            Tags: latest
    library://dtrudg/linux/alpine
            Tags: 3.2 3.3 3.4 3.5 3.6 3.7 3.8 edge latest
    library://sylabsed/linux/alpine
            Tags: 3.6 3.7 latest
    library://library/default/alpine
            Tags: 3.1 3.2 3.3 3.4 3.5 3.6 3.7 3.8 latest
    library://sylabsed/examples/alpine
            Tags: latest
</pre></div>
</div>
<p>You can use the <a class="reference external" href="https://www.sylabs.io/guides/3.4/user-guide/cli/singularity_pull.html">pull</a>
and <a class="reference external" href="https://www.sylabs.io/guides/3.4/user-guide/cli/singularity_build.html">build</a>
commands to download pre-built images from an external resource like the
<a class="reference external" href="https://cloud.sylabs.io/library">Container Library</a> or
<a class="reference external" href="https://hub.docker.com/">Docker Hub</a>.</p>
<p>When called on a native Singularity image like those provided on the Container Library, <code class="docutils literal notranslate"><span class="pre">pull</span></code>
simply downloads the image file to your system.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity pull library://sylabsed/linux/alpine
</pre></div>
</div>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">pull</span></code> with the <code class="docutils literal notranslate"><span class="pre">docker://</span></code> uri to reference Docker images
served from a registry. In this case <code class="docutils literal notranslate"><span class="pre">pull</span></code> does not just download an image
file. Docker images are stored in layers, so <code class="docutils literal notranslate"><span class="pre">pull</span></code> must also combine those
layers into a usable Singularity file.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity pull docker://godlovedc/lolcow
</pre></div>
</div>
<p>Pulling Docker images reduces reproducibility. If you were to pull a Docker
image today and then wait six months and pull again, you are not guaranteed to
get the same image. If any of the source layers has changed the image will be
altered. If reproducibility is a priority for you, try building your images from
the Container Library.</p>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">build</span></code> command to download pre-built images from an
external resource. When using <code class="docutils literal notranslate"><span class="pre">build</span></code> you must specify a name for your
container like so:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity build ubuntu.sif library://ubuntu

$ singularity build lolcow.sif docker://godlovedc/lolcow
</pre></div>
</div>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">pull</span></code>, <code class="docutils literal notranslate"><span class="pre">build</span></code> will convert your image to the latest Singularity
image format after downloading it.
<code class="docutils literal notranslate"><span class="pre">build</span></code> is like a “Swiss Army knife” for container creation. In addition to
downloading images, you can use <code class="docutils literal notranslate"><span class="pre">build</span></code> to create images from other images or
from scratch using a <a class="reference internal" href="definition_files.html#definitionfiles"><span class="std std-ref">definition file</span></a>. You can also
use <code class="docutils literal notranslate"><span class="pre">build</span></code> to convert an image between the container formats supported by
Singularity. To see a comparison of Singularity definition file with Dockerfile,
please see: <a class="reference internal" href="singularity_and_docker.html#sec-deffile-vs-dockerfile"><span class="std std-ref">this section</span></a>.</p>
</div>
<div class="section" id="interact-with-images">
<span id="cowimage"></span><h2>Interact with images<a class="headerlink" href="#interact-with-images" title="Permalink to this headline">¶</a></h2>
<p>You can interact with images in several ways, each of which can accept image URIs
in addition to a local image path.</p>
<p>For demonstration, we will use a <code class="docutils literal notranslate"><span class="pre">lolcow_latest.sif</span></code> image that can be pulled
from the Container Library:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity pull library://sylabsed/examples/lolcow
</pre></div>
</div>
<div class="section" id="shell">
<h3>Shell<a class="headerlink" href="#shell" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://www.sylabs.io/guides/3.4/user-guide/cli/singularity_shell.html">shell</a>
command allows you to spawn a new shell within your container and interact with
it as though it were a small virtual machine.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity shell lolcow_latest.sif

Singularity lolcow_latest.sif:~&gt;
</pre></div>
</div>
<p>The change in prompt indicates that you have entered the container (though you
should not rely on that to determine whether you are in container or not).</p>
<p>Once inside of a Singularity container, you are the same user as you are on the
host system.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Singularity lolcow_latest.sif:~&gt; whoami
david

Singularity lolcow_latest.sif:~&gt; id
uid=1000(david) gid=1000(david) groups=1000(david),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),116(lpadmin),126(sambashare)
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">shell</span></code> also works with the <code class="docutils literal notranslate"><span class="pre">library://</span></code>, <code class="docutils literal notranslate"><span class="pre">docker://</span></code>, and <code class="docutils literal notranslate"><span class="pre">shub://</span></code>
URIs. This creates an ephemeral container that disappears when the shell is
exited.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity shell library://sylabsed/examples/lolcow
</pre></div>
</div>
</div>
<div class="section" id="executing-commands">
<h3>Executing Commands<a class="headerlink" href="#executing-commands" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://www.sylabs.io/guides/3.4/user-guide/cli/singularity_exec.html">exec</a>
command allows you to execute a custom command within a container by specifying
the image file. For instance, to execute the <code class="docutils literal notranslate"><span class="pre">cowsay</span></code> program within the
<code class="docutils literal notranslate"><span class="pre">lolcow_latest.sif</span></code> container:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity exec lolcow_latest.sif cowsay moo
 _____
&lt; moo &gt;
 -----
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">exec</span></code> also works with the <code class="docutils literal notranslate"><span class="pre">library://</span></code>, <code class="docutils literal notranslate"><span class="pre">docker://</span></code>, and <code class="docutils literal notranslate"><span class="pre">shub://</span></code>
URIs. This creates an ephemeral container that executes a command and
disappears.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity exec library://sylabsed/examples/lolcow cowsay &quot;Fresh from the library!&quot;
 _________________________
&lt; Fresh from the library! &gt;
 -------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</pre></div>
</div>
</div>
<div class="section" id="running-a-container">
<span id="runcontainer"></span><h3>Running a container<a class="headerlink" href="#running-a-container" title="Permalink to this headline">¶</a></h3>
<p>Singularity containers contain <a class="reference internal" href="definition_files.html#runscript"><span class="std std-ref">runscripts</span></a>. These are user
defined scripts that define the actions a container should perform when someone
runs it. The runscript can be triggered with the <a class="reference external" href="https://www.sylabs.io/guides/3.4/user-guide/cli/singularity_run.html">run</a></p>
<blockquote>
<div><p>command, or simply by calling the container as though it were an executable.</p>
</div></blockquote>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity run lolcow_latest.sif
 _____________________________________
/ You have been selected for a secret \
\ mission.                            /
 -------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||

$ ./lolcow_latest.sif
 ____________________________________
/ Q: What is orange and goes &quot;click, \
\ click?&quot; A: A ball point carrot.    /
 ------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">run</span></code> also works with the <code class="docutils literal notranslate"><span class="pre">library://</span></code>, <code class="docutils literal notranslate"><span class="pre">docker://</span></code>, and <code class="docutils literal notranslate"><span class="pre">shub://</span></code> URIs.
This creates an ephemeral container that runs and then disappears.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity run library://sylabsed/examples/lolcow
 ____________________________________
/ Is that really YOU that is reading \
\ this?                              /
 ------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</pre></div>
</div>
</div>
</div>
<div class="section" id="working-with-files">
<h2>Working with Files<a class="headerlink" href="#working-with-files" title="Permalink to this headline">¶</a></h2>
<p>Files on the host are reachable from within the container.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ echo &quot;Hello from inside the container&quot; &gt; $HOME/hostfile.txt

$ singularity exec lolcow_latest.sif cat $HOME/hostfile.txt

Hello from inside the container
</pre></div>
</div>
<p>This example works because <code class="docutils literal notranslate"><span class="pre">hostfile.txt</span></code> exists in the user’s home directory.
By default Singularity bind mounts <code class="docutils literal notranslate"><span class="pre">/home/$USER</span></code>, <code class="docutils literal notranslate"><span class="pre">/tmp</span></code>, and <code class="docutils literal notranslate"><span class="pre">$PWD</span></code> into
your container at runtime.</p>
<p>You can specify additional directories to bind mount into your container with
the <code class="docutils literal notranslate"><span class="pre">--bind</span></code> option. In this example, the <code class="docutils literal notranslate"><span class="pre">data</span></code> directory on the host
system is bind mounted to the <code class="docutils literal notranslate"><span class="pre">/mnt</span></code> directory inside the container.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ echo &quot;Drink milk (and never eat hamburgers).&quot; &gt; /data/cow_advice.txt

$ singularity exec --bind /data:/mnt lolcow_latest.sif cat /mnt/cow_advice.txt
Drink milk (and never eat hamburgers).
</pre></div>
</div>
<p>Pipes and redirects also work with Singularity commands just like they do with
normal Linux commands.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ cat /data/cow_advice.txt | singularity exec lolcow_latest.sif cowsay
 ________________________________________
&lt; Drink milk (and never eat hamburgers). &gt;
 ----------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</pre></div>
</div>
</div>
<div class="section" id="build-images-from-scratch">
<span id="id4"></span><h2>Build images from scratch<a class="headerlink" href="#build-images-from-scratch" title="Permalink to this headline">¶</a></h2>
<p id="sec-buildimagesfromscratch">Singularity v3.0 and above produces immutable images in the Singularity Image File (SIF)
format. This ensures reproducible and verifiable images and allows for many
extra benefits such as the ability to sign and verify your containers.</p>
<p>However, during testing and debugging you may want an image format that is
writable. This way you can <code class="docutils literal notranslate"><span class="pre">shell</span></code> into the image and install software and
dependencies until you are satisfied that your container will fulfill your
needs. For these scenarios, Singularity also supports the <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> format
(which is really just a directory).</p>
<div class="section" id="sandbox-directories">
<h3>Sandbox Directories<a class="headerlink" href="#sandbox-directories" title="Permalink to this headline">¶</a></h3>
<p>To build into a <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> (container in a directory) use the
<code class="docutils literal notranslate"><span class="pre">build</span> <span class="pre">--sandbox</span></code> command and option:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sudo singularity build --sandbox ubuntu/ library://ubuntu
</pre></div>
</div>
<p>This command creates a directory called <code class="docutils literal notranslate"><span class="pre">ubuntu/</span></code> with an entire Ubuntu
Operating System and some Singularity metadata in your current working
directory.</p>
<p>You can use commands like <code class="docutils literal notranslate"><span class="pre">shell</span></code>, <code class="docutils literal notranslate"><span class="pre">exec</span></code> , and <code class="docutils literal notranslate"><span class="pre">run</span></code> with this directory
just as you would with a Singularity image. If you pass the <code class="docutils literal notranslate"><span class="pre">--writable</span></code>
option when you use your container you can also write files within the sandbox
directory (provided you have the permissions to do so).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sudo singularity exec --writable ubuntu touch /foo

$ singularity exec ubuntu/ ls /foo
/foo
</pre></div>
</div>
</div>
<div class="section" id="converting-images-from-one-format-to-another">
<h3>Converting images from one format to another<a class="headerlink" href="#converting-images-from-one-format-to-another" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">build</span></code> command allows you to build a container from an existing
container. This means that you can use it to convert a container from one format
to another. For instance, if you have already created a sandbox (directory) and
want to convert it to the default immutable image format (squashfs) you can do
so:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity build new-sif sandbox
</pre></div>
</div>
<p>Doing so may break reproducibility if you have altered your sandbox outside of
the context of a definition file, so you are advised to exercise care.</p>
</div>
<div class="section" id="singularity-definition-files">
<h3>Singularity Definition Files<a class="headerlink" href="#singularity-definition-files" title="Permalink to this headline">¶</a></h3>
<p>For a reproducible, verifiable and production-quality container you should
build a SIF file using a Singularity definition file. This also makes it easy to
add files, environment variables, and install custom software, and still start
from your base of choice (e.g., the Container Library).</p>
<p>A definition file has a header and a body. The header determines the base
container to begin with, and the body is further divided into sections that
perform things like software installation, environment setup, and copying files
into the container from host system, etc.</p>
<p>Here is an example of a definition file:</p>
<div class="highlight-singularity notranslate"><div class="highlight"><pre><span></span><span class="k">BootStrap</span>: library
<span class="k">From</span>: ubuntu:<span class="m">16.04</span>

<span class="gh">%post</span>
    apt-get -y update
    apt-get -y install fortune cowsay lolcat

<span class="gh">%environment</span>
    <span class="nb">export</span> <span class="nv">LC_ALL</span><span class="o">=</span>C
    <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/games:<span class="nv">$PATH</span>

<span class="gh">%runscript</span>
    fortune <span class="p">|</span> cowsay <span class="p">|</span> lolcat

<span class="gh">%labels</span>
    Author GodloveD
</pre></div>
</div>
<p>To build a container from this definition file (assuming it is a file
named lolcow.def), you would call build like so:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sudo singularity build lolcow.sif lolcow.def
</pre></div>
</div>
<p>In this example, the header tells Singularity to use a base Ubuntu 16.04 image
from the Container Library.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">%post</span></code> section executes within the container at build time after the base OS has been installed. The <code class="docutils literal notranslate"><span class="pre">%post</span></code> section is therefore the place to perform installations of new applications.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">%environment</span></code> section defines some environment variables that will be available to the container at runtime.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">%runscript</span></code> section defines actions for the container to take when it is executed.</p></li>
<li><p>And finally, the <code class="docutils literal notranslate"><span class="pre">%labels</span></code> section allows for custom metadata to be added to the container.</p></li>
</ul>
<p>This is a very small example of the things that you can do with a <a class="reference internal" href="definition_files.html#definitionfiles"><span class="std std-ref">definition file</span></a>.
In addition to building a container from the Container Library, you can start
with base images from Docker Hub and use images directly from official
repositories such as Ubuntu, Debian, CentOS, Arch, and BusyBox.  You can also
use an existing container on your host system as a base.</p>
<p>If you want to build Singularity images but you don’t have administrative (root)
access on your build system, you can build images using the <a class="reference external" href="https://cloud.sylabs.io/builder">Remote Builder</a>.</p>
<p>This quickstart document just scratches the surface of all of the things you can
do with Singularity!</p>
<p>If you need additional help or support, contact the Sylabs team:
<a class="reference external" href="https://www.sylabs.io/contact/">https://www.sylabs.io/contact/</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="contributing.html" class="btn btn-neutral float-right" title="Contributing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017-2019, Sylabs Inc.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>