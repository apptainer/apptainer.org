<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plugins &mdash; Apptainer User Guide 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/js/ga.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Security Options" href="security_options.html" />
    <link rel="prev" title="Environment and Metadata" href="environment_and_metadata.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Apptainer User Guide
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to Apptainer</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security in Apptainer</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_a_container.html">Build a container</a></li>
<li class="toctree-l1"><a class="reference internal" href="definition_files.html">The Definition File</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_env.html">Build Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="fakeroot.html">Fakeroot feature</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="signNverify.html">Sign and Verify</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_commands.html">Key management commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="encryption.html">Encrypted Containers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="endpoint.html">Remote Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="library_api.html">Library API Registries</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="bind_paths_and_mounts.html">Bind Paths and Mounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent_overlays.html">Persistent Overlays</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_services.html">Running Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_and_metadata.html">Environment and Metadata</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-plugins">Using Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-a-plugin">Writing a Plugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="security_options.html">Security Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Network Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="cgroups.html">Cgroups Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkpoint.html">Application Checkpointing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="singularity_compatibility.html">Singularity Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker_and_oci.html">Support for Docker / OCI Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="oci_runtime.html">OCI Runtime Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpi.html">Apptainer and MPI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu.html">GPU Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Apptainer User Guide</a>
      </nav>

      <div class="wy-nav-content">
<div class="rst-content style-external-links">
    <div class="admonition warning">
        <p class="admonition-title">Warning</p>
        <p>You're browsing the documentation for an old version of Apptainer. Consider upgrading to the latest version of Apptainer.</p>
        <p>Documentation for the latest version can always be found at: <br><a class="reference external" href="https://apptainer.org/docs/user/latest/">https://apptainer.org/docs/user/latest/</a></p>
    </div>
</div>

        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Plugins</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apptainer/apptainer-userdocs/blob/master/plugins.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="plugins">
<span id="id1"></span><h1>Plugins<a class="headerlink" href="#plugins" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>An Apptainer plugin is a package that can be dynamically loaded by
the Apptainer runtime, augmenting Apptainer with experimental,
non-standard and/or vendor-specific functionality. Currently, plugins
are able to add commands and flags to Apptainer. In the future,
plugins will also be able to interface with more complex subsystems of
the Apptainer runtime.</p>
</section>
<section id="using-plugins">
<h2>Using Plugins<a class="headerlink" href="#using-plugins" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">list</span></code> command prints the currently installed plugins.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer plugin list
There are no plugins installed.
</pre></div>
</div>
<p>Plugins are packaged and distributed as binaries encoded with the
versatile Singularity Image Format (SIF). However, plugin authors may
also distribute the source code of their plugins. A plugin can be
compiled from its source code with the <code class="docutils literal notranslate"><span class="pre">compile</span></code> command. A sample
plugin <code class="docutils literal notranslate"><span class="pre">test-plugin</span></code> is included with the Apptainer source code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer plugin compile examples/plugins/test-plugin/
</pre></div>
</div>
<p>Upon successful compilation, a SIF file will appear in the directory of
the plugin’s source code.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls examples/plugins/test-plugin/ | grep sif
test-plugin.sif
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, <strong>all</strong> plugins must be compiled from the Apptainer
source code tree.</p>
<p>Also, the plugins mechanism for the Go language that Apptainer is
written in is quite restrictive - it requires extremely close version
matching of packages used in a plugin to the ones used in the program
the plugin is built for. Additionally Apptainer is using build
time config to get the source tree location for <code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">plugin</span>
<span class="pre">compile</span></code> so that you don’t need to export environment variables etc,
and there isn’t mismatch between package path information that Go
uses. This means that at present you must:</p>
<ul class="simple">
<li><p>Build plugins using the exact same version of the source code, in
the same location, as was used to build the Apptainer
executable.</p></li>
<li><p>Use the exact same version of Go that was used to build the
executable when compiling a plugin for it.</p></li>
</ul>
</div>
<p>Every plugin encapsulates various information such as the plugin’s
author, the plugin’s version, etc. To view this information about a
plugin, use the <code class="docutils literal notranslate"><span class="pre">inspect</span></code> command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer plugin inspect examples/plugins/test-plugin/test-plugin.sif
Name: sylabs.io/test-plugin
Description: This is a short test plugin for Apptainer
Author: Michael Bauer
Version: 0.0.1
</pre></div>
</div>
<p>To install a plugin, use the <code class="docutils literal notranslate"><span class="pre">install</span></code> command. This operation
requires root privilege.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer plugin install examples/plugins/test-plugin/test-plugin.sif
$ apptainer plugin list
ENABLED  NAME
    yes  sylabs.io/test-plugin
</pre></div>
</div>
<p>After successful installation, the plugin will automatically be enabled.
Any plugin can be disabled with the <code class="docutils literal notranslate"><span class="pre">disable</span></code> command and re-enabled
with the <code class="docutils literal notranslate"><span class="pre">enable</span></code> command. Both of these operations require root
privilege.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer plugin disable sylabs.io/test-plugin
$ apptainer plugin list
ENABLED  NAME
     no  sylabs.io/test-plugin
$ sudo apptainer plugin enable sylabs.io/test-plugin
$ apptainer plugin list
ENABLED  NAME
    yes  sylabs.io/test-plugin
</pre></div>
</div>
<p>Finally, to uninstall a plugin, use the <code class="docutils literal notranslate"><span class="pre">uninstall</span></code> command. This
operation requires root privilege.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer plugin uninstall sylabs.io/test-plugin
Uninstalled plugin &quot;sylabs.io/test-plugin&quot;.
$ apptainer plugin list
There are no plugins installed.
</pre></div>
</div>
</section>
<section id="writing-a-plugin">
<h2>Writing a Plugin<a class="headerlink" href="#writing-a-plugin" title="Permalink to this heading"></a></h2>
<p>Developers interested in writing Apptainer plugins can get started
by reading the <a class="reference external" href="https://godoc.org/github.com/apptainer/apptainer/pkg/plugin">Go documentation</a> for the
plugin package. Furthermore, reading through the <a class="reference external" href="https://github.com/apptainer/apptainer/tree/master/examples/plugins">source code</a>
for the example plugins will prove valuable. More detailed plugin
development documentation is in the works and will be released at a
future date.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="environment_and_metadata.html" class="btn btn-neutral float-left" title="Environment and Metadata" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="security_options.html" class="btn btn-neutral float-right" title="Security Options" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
    <br>
    &copy; Contributors to the Apptainer project, established as Apptainer a Series of LF Projects LLC
    <br>
    &copy; 2017-2022, Sylabs Inc


</footer>
        </div>

      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>