<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Remote Endpoints &mdash; Apptainer User Guide main documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/js/ga.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Library API Registries" href="library_api.html" />
    <link rel="prev" title="Encrypted Containers" href="encryption.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Apptainer User Guide
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                main
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to Apptainer</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security in Apptainer</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_a_container.html">Build a container</a></li>
<li class="toctree-l1"><a class="reference internal" href="definition_files.html">The Definition File</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_env.html">Build Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="fakeroot.html">Fakeroot feature</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="signNverify.html">Sign and Verify</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_commands.html">Key management commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="encryption.html">Encrypted Containers</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Remote Endpoints</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#managing-remote-endpoints">Managing Remote Endpoints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#list-remotes">List Remotes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-login-to-remotes">Add &amp; Login To Remotes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remove-remotes">Remove Remotes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-the-default-remote">Set the Default Remote</a></li>
<li class="toctree-l3"><a class="reference internal" href="#restoring-pre-apptainer-library-behavior">Restoring pre-Apptainer library behavior</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#keyserver-configurations">Keyserver Configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#managing-oci-registries">Managing OCI Registries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="library_api.html">Library API Registries</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bind_paths_and_mounts.html">Bind Paths and Mounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent_overlays.html">Persistent Overlays</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_services.html">Running Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_and_metadata.html">Environment and Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="security_options.html">Security Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Network Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="cgroups.html">Limiting Container Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkpoint.html">Application Checkpointing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="singularity_compatibility.html">Singularity Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker_and_oci.html">Support for Docker / OCI Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="oci_runtime.html">OCI Runtime Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpi.html">Apptainer and MPI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu.html">GPU Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Licenses</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Apptainer User Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Remote Endpoints</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apptainer/apptainer-userdocs/blob/master/endpoint.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="remote-endpoints">
<span id="endpoints"></span><h1>Remote Endpoints<a class="headerlink" href="#remote-endpoints" title="Permalink to this heading"></a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">remote</span></code> command group allows users to manage the service
endpoints Apptainer will interact with for many common command
flows. This includes managing credentials for image storage services
and key servers used to locate public keys for SIF
image verification. Currently, there are three main types of remote
endpoints managed by this command group: <a class="reference external" href="https://singularityhub.github.io/library-api/#/?id=library-api">Library API Registries</a>,
OCI registries and keyservers.</p>
<p>You are most likely interacting with remote endpoints on a regular basis using
various Apptainer commands:
<a class="reference external" href="cli/apptainer_pull.html">pull</a>,
<a class="reference external" href="cli/apptainer_push.html">push</a>,
<a class="reference external" href="cli/apptainer_build.html">build</a>,
<a class="reference external" href="cli/apptainer_key.html">key</a>,
<a class="reference external" href="cli/apptainer_search.html">search</a>,
<a class="reference external" href="cli/apptainer_verify.html">verify</a>,
<a class="reference external" href="cli/apptainer_exec.html">exec</a>,
<a class="reference external" href="cli/apptainer_shell.html">shell</a>,
<a class="reference external" href="cli/apptainer_run.html">run</a>,
or <a class="reference external" href="cli/apptainer_instance.html">instance</a>.</p>
</div>
<div class="section" id="managing-remote-endpoints">
<span id="sec-managing-remote-endpoints"></span><h2>Managing Remote Endpoints<a class="headerlink" href="#managing-remote-endpoints" title="Permalink to this heading"></a></h2>
<p>A fresh installation of Apptainer is configured with the <code class="docutils literal notranslate"><span class="pre">DefaultRemote</span></code>,
which does not support the Library API as it is only configured with a
functioning key server, <code class="docutils literal notranslate"><span class="pre">https://keys.openpgp.org</span></code>. Users or administrators
should configure one of the Library API implementations listed <a class="reference external" href="https://singularityhub.github.io/library-api/#/?id=library-api">here</a> if they would
like to use a Library API registry.</p>
<p>Users can setup and switch between multiple remote endpoints, which are
stored in their <code class="docutils literal notranslate"><span class="pre">~/.apptainer/remote.yaml</span></code> file. Alternatively,
remote endpoints can be set system-wide by an administrator.</p>
<p>Generally, users and administrators should manage remote endpoints using
the <code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">remote</span></code> command, and avoid editing <code class="docutils literal notranslate"><span class="pre">remote.yaml</span></code>
configuration files directly.</p>
<div class="section" id="list-remotes">
<h3>List Remotes<a class="headerlink" href="#list-remotes" title="Permalink to this heading"></a></h3>
<p>To <code class="docutils literal notranslate"><span class="pre">list</span></code> existing remote endpoints, run this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote list

Cloud Services Endpoints
========================

NAME           URI                  ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote  cloud.apptainer.org  YES     YES     NO

Keyservers
==========

URI                       GLOBAL  INSECURE  ORDER
https://keys.openpgp.org  YES     NO        1*
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">YES</span></code> in the <code class="docutils literal notranslate"><span class="pre">ACTIVE</span></code> column for <code class="docutils literal notranslate"><span class="pre">DefaultRemote</span></code> shows that this
is the current default remote endpoint.</p>
</div>
<div class="section" id="add-login-to-remotes">
<span id="remote-add-and-login"></span><h3>Add &amp; Login To Remotes<a class="headerlink" href="#add-login-to-remotes" title="Permalink to this heading"></a></h3>
<p>To <code class="docutils literal notranslate"><span class="pre">add</span></code> a remote endpoint (for the current user only):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote add &lt;remote_name&gt; &lt;remote_uri&gt;
</pre></div>
</div>
<p>For example, if you have an installation of Apptainer enterprise
hosted at enterprise.example.com:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote add myremote https://enterprise.example.com

INFO:    Remote &quot;myremote&quot; added.
INFO:    Authenticating with remote: myremote
Generate an API Key at https://enterprise.example.com/auth/tokens, and paste here:
API Key:
</pre></div>
</div>
<p>You will be prompted to setup an API key as the remote is added. The web
address needed to do this will always be given.</p>
<p>To <code class="docutils literal notranslate"><span class="pre">add</span></code> a global remote endpoint (available to all users on the
system) an administrative user should run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer remote add --global &lt;remote_name&gt; &lt;remote_uri&gt;

# example..

$ sudo apptainer remote add --global company-remote https://enterprise.example.com
INFO:    Remote &quot;company-remote&quot; added.
INFO:    Global option detected. Will not automatically log into remote.
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Global remote configurations can only be modified by the root user
and are stored in the <code class="docutils literal notranslate"><span class="pre">etc/apptainer/remote.yaml</span></code> file, at the
Apptainer installation location.</p>
</div>
<p>To <code class="docutils literal notranslate"><span class="pre">login</span></code> to a remote, for the first time or if your token expires or
was revoked:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Login<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>default<span class="w"> </span>remote<span class="w"> </span>endpoint
<span class="gp">$ </span>apptainer<span class="w"> </span>remote<span class="w"> </span>login

<span class="gp"># </span>Login<span class="w"> </span>to<span class="w"> </span>another<span class="w"> </span>remote<span class="w"> </span>endpoint
<span class="gp">$ </span>apptainer<span class="w"> </span>remote<span class="w"> </span>login<span class="w"> </span>&lt;remote_name&gt;

<span class="gp"># </span>example...
<span class="gp">$ </span>apptainer<span class="w"> </span>remote<span class="w"> </span>login<span class="w"> </span>myremote
<span class="go">apptainer remote login myremote</span>
<span class="go">INFO:    Authenticating with remote: myremote</span>
<span class="go">Generate an API Key at https://enterprise.example.com/auth/tokens, and paste here:</span>
<span class="go">API Key:</span>
<span class="go">INFO:    API Key Verified!</span>
</pre></div>
</div>
<p>If you <code class="docutils literal notranslate"><span class="pre">login</span></code> to a remote that you already have a valid token for,
you will be prompted, and the new token will be verified, before it
replaces your existing credential. If you enter an incorrect token your
existing token will not be replaced:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>remote<span class="w"> </span>login
<span class="go">An access token is already set for this remote. Replace it? [N/y]y</span>
<span class="go">Generate an access token at https://enterprise.example.com/auth/tokens, and paste it here.</span>
<span class="go">Token entered will be hidden for security.</span>
<span class="go">Access Token:</span>
<span class="go">FATAL:   while verifying token: error response from server: Invalid Credentials</span>

<span class="gp"># </span>Previous<span class="w"> </span>token<span class="w"> </span>is<span class="w"> </span>still<span class="w"> </span><span class="k">in</span><span class="w"> </span>place
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is important for users to be aware that the login command will
store the supplied credentials or tokens unencrypted in your home
directory.</p>
</div>
</div>
<div class="section" id="remove-remotes">
<h3>Remove Remotes<a class="headerlink" href="#remove-remotes" title="Permalink to this heading"></a></h3>
<p>To <code class="docutils literal notranslate"><span class="pre">remove</span></code> an endpoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote remove &lt;remote_name&gt;
</pre></div>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">--global</span></code> option as the root user to remove a global
endpoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer remote remove --global &lt;remote_name&gt;
</pre></div>
</div>
</div>
<div class="section" id="set-the-default-remote">
<h3>Set the Default Remote<a class="headerlink" href="#set-the-default-remote" title="Permalink to this heading"></a></h3>
<p>A remote endpoint can be set as the default to use with commands such as
<code class="docutils literal notranslate"><span class="pre">push</span></code>, <code class="docutils literal notranslate"><span class="pre">pull</span></code> etc. via <code class="docutils literal notranslate"><span class="pre">remote</span> <span class="pre">use</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote use &lt;remote_name&gt;
</pre></div>
</div>
<p>The default remote shows up with a <code class="docutils literal notranslate"><span class="pre">YES</span></code> under the <code class="docutils literal notranslate"><span class="pre">ACTIVE</span></code> column
in the output of <code class="docutils literal notranslate"><span class="pre">remote</span> <span class="pre">list</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote list
Cloud Services Endpoints
========================

NAME            URI                     ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote   cloud.apptainer.org     YES     YES     NO
company-remote  enterprise.example.com  NO      YES     NO
myremote        enterprise.example.com  NO      NO      NO

Keyservers
==========

URI                       GLOBAL  INSECURE  ORDER
https://keys.openpgp.org  YES     NO        1*

* Active cloud services keyserver

$ apptainer remote use myremote
INFO:    Remote &quot;myremote&quot; now in use.

$ apptainer remote list
Cloud Services Endpoints
========================

NAME            URI                     ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote   cloud.apptainer.org     NO      YES     NO
company-remote  enterprise.example.com  NO      YES     NO
myremote        enterprise.example.com  YES     NO      NO

Keyservers
==========

URI                       GLOBAL  INSECURE  ORDER
https://keys.example.com  YES     NO        1*

* Active cloud services keyserver
</pre></div>
</div>
<p>An administrator can make a
remote the only usable remote for the system by using the
<code class="docutils literal notranslate"><span class="pre">--exclusive</span></code> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer remote use --exclusive company-remote
INFO:    Remote &quot;company-remote&quot; now in use.
$ apptainer remote list
Cloud Services Endpoints
========================

NAME            URI                     ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote   cloud.apptainer.org     NO      YES     NO
company-remote  enterprise.example.com  YES     YES     YES
myremote        enterprise.example.com  NO      NO      NO

Keyservers
==========

URI                       GLOBAL  INSECURE  ORDER
https://keys.example.com  YES     NO        1*

* Active cloud services keyserver
</pre></div>
</div>
<p>This, in turn, prevents users from changing the remote they use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote use myremote
FATAL:   could not use myremote: remote company-remote has been set exclusive by the system administrator
</pre></div>
</div>
<p>If you do not want to switch remote with <code class="docutils literal notranslate"><span class="pre">remote</span> <span class="pre">use</span></code> you can:</p>
<ul class="simple">
<li><p>Make <code class="docutils literal notranslate"><span class="pre">push</span></code> and <code class="docutils literal notranslate"><span class="pre">pull</span></code> use an alternative library server with the
<code class="docutils literal notranslate"><span class="pre">--library</span></code> option.</p></li>
<li><p>Make <code class="docutils literal notranslate"><span class="pre">keys</span></code> use an alternative keyserver with the <code class="docutils literal notranslate"><span class="pre">-url</span></code> option.</p></li>
</ul>
</div>
<div class="section" id="restoring-pre-apptainer-library-behavior">
<span id="no-default-remote"></span><span id="id1"></span><h3>Restoring pre-Apptainer library behavior<a class="headerlink" href="#restoring-pre-apptainer-library-behavior" title="Permalink to this heading"></a></h3>
<p>Apptainer’s default remote endpoint configures only a public key
server, it does not support the <code class="docutils literal notranslate"><span class="pre">library://</span></code> protocol.
Formerly the default was set to point to Sylabs servers, but the
read/write support of the <code class="docutils literal notranslate"><span class="pre">oras://</span></code> protocol by for example the
<a class="reference internal" href="docker_and_oci.html#github-container-registry"><span class="std std-ref">GitHub Container Registry</span></a>
makes it unnecessary.
The remote endpoint was also formerly used for builds using the
build <code class="docutils literal notranslate"><span class="pre">--remote</span></code> option, but Apptainer does not support that.
Instead, it supports <a class="reference internal" href="fakeroot.html#build"><span class="std std-ref">unprivileged local builds</span></a>.</p>
<p>If you would still like to have the previous default,
these are the commands to restore the library
behavior from before Apptainer, where using the <code class="docutils literal notranslate"><span class="pre">library://</span></code> URI would
download from the Sylabs Cloud anonymously:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote add --no-login SylabsCloud cloud.sycloud.io
INFO:    Remote &quot;SylabsCloud&quot; added.
$ apptainer remote use SylabsCloud
INFO:    Remote &quot;SylabsCloud&quot; now in use.
$ apptainer remote list
Cloud Services Endpoints
========================

NAME           URI                  ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote  cloud.apptainer.org  NO      YES     NO
SylabsCloud    cloud.sycloud.io     YES     NO      NO

Keyservers
==========

URI                                 GLOBAL  INSECURE  ORDER
https://keys.production.sycloud.io  YES     NO        1*

* Active cloud services keyserver
</pre></div>
</div>
<p>To set the defaults system-wide see the corresponding section in the
<a class="reference external" href="https://apptainer.org/docs/admin/main/configfiles.html#restoring-pre-apptainer-library-behavior">admin guide</a>.</p>
</div>
</div>
<div class="section" id="keyserver-configurations">
<h2>Keyserver Configurations<a class="headerlink" href="#keyserver-configurations" title="Permalink to this heading"></a></h2>
<p>By default, Apptainer will use the keyserver correlated to the
active cloud service endpoint. This behavior can be changed or
supplemented via the <code class="docutils literal notranslate"><span class="pre">add-keyserver</span></code> and <code class="docutils literal notranslate"><span class="pre">remove-keyserver</span></code>
commands. These commands allow an administrator to create a global list
of key servers used to verify container signatures by default, where
<code class="docutils literal notranslate"><span class="pre">order</span> <span class="pre">1</span></code> is the first in the list. Other operations performed by
Apptainer that reach out to a keyserver will only use the first
entry, or <code class="docutils literal notranslate"><span class="pre">order</span> <span class="pre">1</span></code>, keyserver.</p>
<p>When we list our default remotes, we can see that the default keyserver
is <code class="docutils literal notranslate"><span class="pre">https://keys.openpgp.org</span></code> and the asterisk next to its order
indicates that it is the keyserver associated to the current remote
endpoint. We can also see the <code class="docutils literal notranslate"><span class="pre">INSECURE</span></code> column indicating that
Apptainer will use TLS when communicating with the keyserver.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote list
Cloud Services Endpoints
========================

NAME           URI                  ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote  cloud.apptainer.org  YES     YES     NO

Keyservers
==========

URI                       GLOBAL  INSECURE  ORDER
https://keys.openpgp.org  YES     NO        1*

* Active cloud services keyserver
</pre></div>
</div>
<p>We can add a key server to list of keyservers with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer remote add-keyserver https://pgp.example.com
$ apptainer remote list
Cloud Services Endpoints
========================

NAME           URI                  ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote  cloud.apptainer.org  YES     YES     NO

Keyservers
==========

URI                       GLOBAL  INSECURE  ORDER
https://keys.openpgp.org  YES     NO        1*
https://pgp.example.com   YES     NO        2

* Active cloud services keyserver
</pre></div>
</div>
<p>Here we can see that the <code class="docutils literal notranslate"><span class="pre">https://pgp.example.com</span></code> keyserver was
appended to our list. If we would like to specify the order in the list
that this key is placed, we can use the <code class="docutils literal notranslate"><span class="pre">--order</span></code> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer remote add-keyserver --order 1 https://pgp.example.com
$ apptainer remote list
Cloud Services Endpoints
========================

NAME           URI                  ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote  cloud.apptainer.org  YES     YES     NO

Keyservers
==========

URI                      GLOBAL  INSECURE  ORDER
https://pgp.example.com  YES     NO        1
https://keys.openpgp.org YES     NO        2*

* Active cloud services keyserver
</pre></div>
</div>
<p>Since we specified <code class="docutils literal notranslate"><span class="pre">--order</span> <span class="pre">1</span></code>, the <code class="docutils literal notranslate"><span class="pre">https://pgp.example.com</span></code>
keyserver was placed as the first entry in the list and the default
keyserver was moved to second in the list. With the keyserver
configuration above, all image default image verification performed by
Apptainer will first reach out to <code class="docutils literal notranslate"><span class="pre">https://pgp.example.com</span></code> and
then to <code class="docutils literal notranslate"><span class="pre">https://keys.openpgp.org</span></code> when searching for public keys.</p>
<p>If a keyserver requires authentication before usage, users can login
before using it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote login --username ian https://pgp.example.com
Password (or token when username is empty):
INFO:    Token stored in /home/ian/.apptainer/remote.yaml
</pre></div>
</div>
<p>Now we can see that <code class="docutils literal notranslate"><span class="pre">https://pgp.example.com</span></code> is logged in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote list
Cloud Services Endpoints
========================

NAME           URI                  ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote  cloud.apptainer.org  YES     YES     NO

Keyservers
==========

URI                       GLOBAL  INSECURE  ORDER
https://pgp.example.com   YES     NO        1
https://keys.openpgp.org  YES     NO        2*

* Active cloud services keyserver

Authenticated Logins
=================================

URI                     INSECURE
https://pgp.example.com NO
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is important for users to be aware that the login command will
store the supplied credentials or tokens unencrypted in your home
directory.</p>
</div>
</div>
<div class="section" id="managing-oci-registries">
<span id="sec-managing-oci-registries"></span><h2>Managing OCI Registries<a class="headerlink" href="#managing-oci-registries" title="Permalink to this heading"></a></h2>
<p>It is common for users of Apptainer to use OCI registries as sources
for their container images. Some registries require credentials to
access certain images or the registry itself. Previously, the only
methods in Apptainer to supply credentials to registries were to
supply credentials for each command or set environment variables for a
single registry.</p>
<p>Apptainer supports the ability for users to supply credentials
on a per registry basis with the <code class="docutils literal notranslate"><span class="pre">remote</span></code> command group.</p>
<p>Users can login to an oci registry with the <code class="docutils literal notranslate"><span class="pre">remote</span> <span class="pre">login</span></code> command by
specifying a <code class="docutils literal notranslate"><span class="pre">docker://</span></code> prefix to the registry hostname:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote login --username ian docker://docker.io
Password (or token when username is empty):
INFO:    Token stored in /home/ian/.apptainer/remote.yaml

$ apptainer remote list
Cloud Services Endpoints
========================

NAME           URI                  ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote  cloud.apptainer.org  YES     YES     NO

Keyservers
==========

URI                       GLOBAL  INSECURE  ORDER
https://keys.openpgp.org  YES     NO        1*

* Active cloud services keyserver

Authenticated Logins
=================================

URI                 INSECURE
docker://docker.io  NO
</pre></div>
</div>
<p>Now we can see that <code class="docutils literal notranslate"><span class="pre">docker://docker.io</span></code> shows up under
<code class="docutils literal notranslate"><span class="pre">Authenticated</span> <span class="pre">Logins</span></code> and Apptainer will automatically supply the
configured credentials when interacting with DockerHub. We can also see
the <code class="docutils literal notranslate"><span class="pre">INSECURE</span></code> column indicating that Apptainer will use TLS when
communicating with the registry.</p>
<p>We can login to multiple OCI registries at the same time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer remote login --username ian docker://registry.example.com
Password (or token when username is empty):
INFO:    Token stored in /home/ian/.apptainer/remote.yaml

$ apptainer remote list
Cloud Services Endpoints
========================

NAME           URI                  ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote  cloud.apptainer.org  YES     YES     NO

Keyservers
==========

URI                       GLOBAL  INSECURE  ORDER
https://keys.openpgp.org  YES     NO        1*

* Active cloud services keyserver

Authenticated Logins
=================================

URI                            INSECURE
docker://docker.io             NO
docker://registry.example.com  NO
</pre></div>
</div>
<p>Apptainer will supply the correct credentials for the registry based
off of the hostname when using the following commands with a
<code class="docutils literal notranslate"><span class="pre">docker://</span></code> or <code class="docutils literal notranslate"><span class="pre">oras://</span></code> URI:
<a class="reference external" href="cli/apptainer_pull.html">pull</a>,
<a class="reference external" href="cli/apptainer_push.html">push</a>,
<a class="reference external" href="cli/apptainer_build.html">build</a>,
<a class="reference external" href="cli/apptainer_exec.html">exec</a>,
<a class="reference external" href="cli/apptainer_shell.html">shell</a>,
<a class="reference external" href="cli/apptainer_run.html">run</a>,
or <a class="reference external" href="cli/apptainer_instance.html">instance</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is important for users to be aware that the login command will
store the supplied credentials or tokens unencrypted in your home
directory.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="encryption.html" class="btn btn-neutral float-left" title="Encrypted Containers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="library_api.html" class="btn btn-neutral float-right" title="Library API Registries" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
    <br>
    &copy; Contributors to the Apptainer project, established as Apptainer a Series of LF Projects LLC
    <br>
    &copy; 2017-2022, Sylabs Inc


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>