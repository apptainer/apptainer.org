

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Appendix &mdash; Apptainer User Guide main documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=a8da1a53"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="_static/js/ga.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command Line Interface" href="cli.html" />
    <link rel="prev" title="Contributing" href="contributing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Apptainer User Guide
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to Apptainer</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security in Apptainer</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_a_container.html">Build a container</a></li>
<li class="toctree-l1"><a class="reference internal" href="definition_files.html">The Definition File</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_env.html">Build Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="fakeroot.html">Fakeroot feature</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="signNverify.html">Sign and Verify</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_commands.html">Key management commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="encryption.html">Encrypted Containers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="endpoint.html">Remote Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="keyserver.html">Keyserver Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="registry.html">OCI Registries</a></li>
<li class="toctree-l1"><a class="reference internal" href="library_api.html">Library API Registries</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bind_paths_and_mounts.html">Bind Paths and Mounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent_overlays.html">Persistent Overlays</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_services.html">Instances - Running Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_and_metadata.html">Environment and Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="security_options.html">Security Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Network Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="cgroups.html">Limiting Container Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkpoint.html">Application Checkpointing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="singularity_compatibility.html">Singularity Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker_and_oci.html">Support for Docker / OCI Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="oci_runtime.html">OCI Runtime Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpi.html">Apptainer and MPI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu.html">GPU Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#apptainer-s-environment-variables">Apptainer’s environment variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#a"><code class="docutils literal notranslate"><span class="pre">A</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#b"><code class="docutils literal notranslate"><span class="pre">B</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#c"><code class="docutils literal notranslate"><span class="pre">C</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#d"><code class="docutils literal notranslate"><span class="pre">D</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#e"><code class="docutils literal notranslate"><span class="pre">E</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#f"><code class="docutils literal notranslate"><span class="pre">F</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#h"><code class="docutils literal notranslate"><span class="pre">H</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#i"><code class="docutils literal notranslate"><span class="pre">I</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#j"><code class="docutils literal notranslate"><span class="pre">J</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#k"><code class="docutils literal notranslate"><span class="pre">K</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#l"><code class="docutils literal notranslate"><span class="pre">L</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#m"><code class="docutils literal notranslate"><span class="pre">M</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#n"><code class="docutils literal notranslate"><span class="pre">N</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#o"><code class="docutils literal notranslate"><span class="pre">O</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#p"><code class="docutils literal notranslate"><span class="pre">P</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#q"><code class="docutils literal notranslate"><span class="pre">Q</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#r"><code class="docutils literal notranslate"><span class="pre">R</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#s"><code class="docutils literal notranslate"><span class="pre">S</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#t"><code class="docutils literal notranslate"><span class="pre">T</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#u"><code class="docutils literal notranslate"><span class="pre">U</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#v"><code class="docutils literal notranslate"><span class="pre">V</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2"><code class="docutils literal notranslate"><span class="pre">V</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#w"><code class="docutils literal notranslate"><span class="pre">W</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#build-modules">Build Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#library-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">library</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#keywords">Keywords</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#docker-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">docker</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sec-build-docker-module">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#shub-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">shub</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#oras-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">oras</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Keywords</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#localimage-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">localimage</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">Keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#yum-or-dnf-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">yum</span></code> or <code class="docutils literal notranslate"><span class="pre">dnf</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id13">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">Keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#debootstrap-build-agent"><code class="docutils literal notranslate"><span class="pre">debootstrap</span></code> build agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id16">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">Keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#arch-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">arch</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">Keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#busybox-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">busybox</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id22">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">Keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id24">Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#zypper-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">zypper</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id25">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id26">Keywords</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#docker-daemon-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">docker-daemon</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id27">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id28">Keywords</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#docker-archive-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">docker-archive</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id30">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id31">Keywords</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#scratch-bootstrap-agent"><code class="docutils literal notranslate"><span class="pre">scratch</span></code> bootstrap agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id32">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id33">Keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id34">Notes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Licenses</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Apptainer User Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Appendix</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apptainer/apptainer-userdocs/blob/main/appendix.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="appendix">
<span id="id1"></span><h1>Appendix<a class="headerlink" href="#appendix" title="Link to this heading"></a></h1>
<section id="apptainer-s-environment-variables">
<span id="apptainer-environment-variables"></span><h2>Apptainer’s environment variables<a class="headerlink" href="#apptainer-s-environment-variables" title="Link to this heading"></a></h2>
<p>Apptainer comes with some environment variables you can set or
modify depending on your needs. You can see them listed alphabetically
below with their respective functionality.</p>
<section id="a">
<h3><code class="docutils literal notranslate"><span class="pre">A</span></code><a class="headerlink" href="#a" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_ADD_CAPS</strong>: To specify a list (comma separated string)
of capabilities to be added. Default is an empty string.</p></li>
<li><p><strong>APPTAINER_ALL</strong>: List all the users and groups capabilities.</p></li>
<li><p><strong>APPTAINER_ALLOW_SETUID</strong>: To specify that setuid binaries should
or not be allowed in the container. (root only) Default is set to
false.</p></li>
<li><p><strong>APPTAINER_ALLOW_UNSIGNED</strong>: Set to true to allow pushing unsigned SIF
images to a <code class="docutils literal notranslate"><span class="pre">library://</span></code> destination. Default is false.</p></li>
<li><p><strong>APPTAINER_APP</strong> and <strong>APPTAINER_APPNAME</strong>: Sets the name of an
application to be run inside a container.</p></li>
<li><p><strong>APPTAINER_APPLY_CGROUPS</strong>: Used to apply cgroups from an input
file for container processes. (it requires root privileges)</p></li>
<li><p><strong>APPTAINER_PULL_ARCH</strong>: Set the architecture
(e.g. <code class="docutils literal notranslate"><span class="pre">arm64</span></code>) of an image to pull from a <code class="docutils literal notranslate"><span class="pre">library://</span></code> or OCI source.
Defaults to the host architecture.</p></li>
<li><p><strong>APPTAINER_AUTHFILE</strong>: Specify a non-standard location for storing /
reading login credentials for OCI/Docker registries. See the
<a class="reference internal" href="registry.html#sec-authfile"><span class="std std-ref">authfile documentation</span></a>.</p></li>
</ol>
</section>
<section id="b">
<h3><code class="docutils literal notranslate"><span class="pre">B</span></code><a class="headerlink" href="#b" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_BIND</strong> and <strong>APPTAINER_BINDPATH</strong>: Comma separated
string <code class="docutils literal notranslate"><span class="pre">source:&lt;dest&gt;</span></code> list of paths to bind between the host and
the container, applied in that order.
Note that <code class="docutils literal notranslate"><span class="pre">APPTAINER_BIND</span></code> is also automatically set inside a
container to list all the paths bound to it, so that by default all
the same binds will be applied to nested apptainer commands.</p></li>
<li><p><strong>APPTAINER_BLKIO_WEIGHT</strong>: Specify a relative weight for block
device access during contention. Range 10-1000. Default is 0 (disabled).</p></li>
<li><p><strong>APPTAINER_BLKIO_WEIGHT_DEVICE</strong>: Specify a relative weight for
block device access during contention on a specific device.
Must be supplied in <code class="docutils literal notranslate"><span class="pre">&lt;device</span> <span class="pre">path&gt;:weight</span></code> format. Default is unset.</p></li>
<li><p><strong>APPTAINER_BOOT</strong>: Set to false by default, considers if executing
<code class="docutils literal notranslate"><span class="pre">/sbin/init</span></code> when container boots (root only).</p></li>
</ol>
</section>
<section id="c">
<h3><code class="docutils literal notranslate"><span class="pre">C</span></code><a class="headerlink" href="#c" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_CACHEDIR</strong>: Specifies the directory for image downloads
to be cached in. See <a class="reference internal" href="build_env.html#sec-cache"><span class="std std-ref">Cache Folders</span></a>.</p></li>
<li><p><strong>APPTAINER_CAP_GROUP</strong>: Specify a group to modify when managing permitted
capabilities with the <code class="docutils literal notranslate"><span class="pre">capability</span></code> command.</p></li>
<li><p><strong>APPTAINER_CAP_USER</strong>: Specify a user to modify when managing permitted
capabilities with the <code class="docutils literal notranslate"><span class="pre">capability</span></code> command.</p></li>
<li><p><strong>APPTAINER_CLEANENV</strong>: Specifies if the environment should be
cleaned or not before running the container. Default is set to false.</p></li>
<li><p><strong>APPTAINER_COMPAT</strong>: Set to true to enable Docker/OCI compatibility mode.
Equivalent to setting <code class="docutils literal notranslate"><span class="pre">--containall</span> <span class="pre">--no-eval</span> <span class="pre">--no-init</span> <span class="pre">--no-umask</span>
<span class="pre">--writable-tmpfs</span></code>. Default is false.</p></li>
<li><p><strong>APPTAINER_CONFIG_FILE</strong>: Use a custom <code class="docutils literal notranslate"><span class="pre">apptainer.conf</span></code> configuration
file. Only supported for non-root users in non-setuid mode.</p></li>
<li><p><strong>APPTAINER_CONFIGDIR</strong>: Specifies the directory to use for
per-user configuration.  The default is <code class="docutils literal notranslate"><span class="pre">$HOME/.apptainer</span></code>.</p></li>
<li><p><strong>APPTAINER_CONTAIN</strong>: To use minimal <code class="docutils literal notranslate"><span class="pre">/dev</span></code> and empty other
directories (e.g. <code class="docutils literal notranslate"><span class="pre">/tmp</span></code> and <code class="docutils literal notranslate"><span class="pre">$HOME</span></code>) instead of sharing
filesystems from your host. Default is set to false.</p></li>
<li><p><strong>APPTAINER_CONTAINALL</strong>: To contain not only file systems, but
also PID, IPC, and environment. Default is set to false.</p></li>
<li><p><strong>APPTAINER_CONTAINLIBS</strong>: Used to specify a string of file names
(comma separated string) to bind to the <code class="docutils literal notranslate"><span class="pre">/.singularity.d/libs</span></code>
directory.</p></li>
<li><p><strong>APPTAINER_CPU_SHARES</strong>: Specify a relative share of CPU time
available to the container. Default is -1 (disabled).</p></li>
<li><p><strong>APPTAINER_CPUS</strong>: Specify a fractional number of CPUs available
to the container. Default is unset.</p></li>
<li><p><strong>APPTAINER_CPUSET_CPUS</strong>: Specify a list or range of CPU cores
available to the container. Default is unset.</p></li>
<li><p><strong>APPTAINER_CPUSET_MEMS</strong>: Specify a list or range of memory nodes
available to the container. Default is unset.</p></li>
<li><p><strong>APPTAINER_CWD</strong> (deprecated <strong>APPTAINER_PWD</strong> and <strong>APPTAINER_TARGET_PWD</strong>): The initial
working directory for payload process inside the container.</p></li>
</ol>
</section>
<section id="d">
<h3><code class="docutils literal notranslate"><span class="pre">D</span></code><a class="headerlink" href="#d" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_DEBUG</strong>: Enable debug output when set. Equivalent to <code class="docutils literal notranslate"><span class="pre">-d</span> <span class="pre">/</span>
<span class="pre">--debug</span></code>.</p></li>
<li><p><strong>APPTAINER_DEFFILE</strong>: Shows the Apptainer recipe that was used
to generate the image.</p></li>
<li><p><strong>APPTAINER_DESC</strong>: Contains a description of the capabilities.</p></li>
<li><p><strong>APPTAINER_DISABLE_CACHE</strong>: To disable all caching of docker/oci,
library, oras, etc. downloads and built SIFs. Default is set to
false.</p></li>
<li><p><strong>APPTAINER_DNS</strong>: A list of the DNS server addresses separated by
commas to be added in <code class="docutils literal notranslate"><span class="pre">resolv.conf</span></code>.</p></li>
<li><p><strong>APPTAINER_DOCKER_HOST</strong>: Host address / socket to use when pulling images
from a <code class="docutils literal notranslate"><span class="pre">docker-daemon</span></code> source. <code class="docutils literal notranslate"><span class="pre">DOCKER_HOST</span></code> without the
<code class="docutils literal notranslate"><span class="pre">APPTAINER_</span></code> prefix is also accepted.</p></li>
<li><p><strong>APPTAINER_DOCKER_LOGIN</strong>: To specify the interactive prompt for
docker authentication.</p></li>
<li><p><strong>APPTAINER_DOCKER_PASSWORD</strong>: To specify the password for docker
authentication. <code class="docutils literal notranslate"><span class="pre">DOCKER_PASSWORD</span></code> without the <code class="docutils literal notranslate"><span class="pre">APPTAINER_</span></code> prefix is
also accepted.</p></li>
<li><p><strong>APPTAINER_DOCKER_USERNAME</strong>: To specify the username for docker
authentication. <code class="docutils literal notranslate"><span class="pre">DOCKER_USERNAME</span></code> without the <code class="docutils literal notranslate"><span class="pre">APPTAINER_</span></code> prefix is
also accepted.</p></li>
<li><p><strong>APPTAINER_DOWNLOAD_CONCURRENCY</strong>: To specify how many concurrent streams
when downloading (pulling) an image from cloud library.</p></li>
<li><p><strong>APPTAINER_DOWNLOAD_PART_SIZE</strong>: To specify the size of each part (bytes)
when concurrent downloads are enabled.</p></li>
<li><p><strong>APPTAINER_DOWNLOAD_BUFFER_SIZE</strong>: To specify the transfer buffer size
(bytes) when concurrent downloads are enabled.</p></li>
<li><p><strong>APPTAINER_DROP_CAPS</strong>: To specify a list (comma separated string)
of capabilities to be dropped. Default is an empty string.</p></li>
</ol>
</section>
<section id="e">
<h3><code class="docutils literal notranslate"><span class="pre">E</span></code><a class="headerlink" href="#e" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_ENCRYPTION_PASSPHRASE</strong>: Used to specify the plaintext
passphrase to encrypt the container.</p></li>
<li><p><strong>APPTAINER_ENCRYPTION_PEM_DATA</strong>: If it contains data from a public PEM
file, Apptainer can use those data to encrypt a container. If it contains
data from a private PEM file, Apptainer will try to use the data to run an
encrypted container.</p></li>
<li><p><strong>APPTAINER_ENCRYPTION_PEM_PATH</strong>: Used to specify the path of the
file containing public or private key to encrypt the container in PEM
format.</p></li>
<li><p><strong>APPTAINER_ENV_FILE</strong>: Specify a file containing <code class="docutils literal notranslate"><span class="pre">KEY=VAL</span></code> environment
variables that should be set in the container.</p></li>
<li><p><strong>APPTAINER_ENVIRONMENT</strong>: Set during a build to the path to a file into
which <code class="docutils literal notranslate"><span class="pre">KEY=VAL</span></code> environment variables can be added. The file is evaluated
at container startup.</p></li>
<li><p><strong>APPTAINERENV_*</strong>: Allows you to transpose variables into the
container at runtime. You can see more in detail how to use this
variable in our <a class="reference internal" href="environment_and_metadata.html#environment-and-metadata"><span class="std std-ref">environment and metadata section</span></a>.</p></li>
<li><p><strong>APPTAINERENV_APPEND_PATH</strong>: Used to append directories to the end
of the <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> environment variable. You can see more in detail on
how to use this variable in our <a class="reference internal" href="environment_and_metadata.html#environment-and-metadata"><span class="std std-ref">environment and metadata
section</span></a>.</p></li>
<li><p><strong>APPTAINERENV_PATH</strong>: A specified path to override the <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>
environment variable within the container. You can see more in detail
on how to use this variable in our <a class="reference internal" href="environment_and_metadata.html#environment-and-metadata"><span class="std std-ref">environment and metadata
section</span></a>.</p></li>
<li><p><strong>APPTAINERENV_PREPEND_PATH</strong>: Used to prepend directories to the
beginning of <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> environment variable. You can see more in
detail on how to use this variable in our <a class="reference internal" href="environment_and_metadata.html#environment-and-metadata"><span class="std std-ref">environment and
metadata section</span></a>.</p></li>
</ol>
</section>
<section id="f">
<h3><code class="docutils literal notranslate"><span class="pre">F</span></code><a class="headerlink" href="#f" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_FAKEROOT</strong>: Run or build a container using a user namespace
with a root uid/gid mapping.</p></li>
<li><p><strong>APPTAINER_FIXPERMS</strong>: Set to true to ensure owner has <code class="docutils literal notranslate"><span class="pre">rwX</span></code> permissions on
all files in a container built from an OCI source.</p></li>
<li><p><strong>APPTAINER_FORCE</strong>: Skip confirmation for destructive actions, e.g.
overwriting a container image or killing an instance.</p></li>
<li><p><strong>APPTAINER_FUSESPEC</strong>: A FUSE filesystem mount specification of the form
‘&lt;type&gt;:&lt;fuse command&gt; &lt;mountpoint&gt;’, that will be mounted in the container.</p></li>
</ol>
</section>
<section id="h">
<h3><code class="docutils literal notranslate"><span class="pre">H</span></code><a class="headerlink" href="#h" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_HELPFILE</strong>: Specifies the runscript helpfile, if it
exists.</p></li>
<li><p><strong>APPTAINER_HOME</strong> : A home directory specification, it could be a
source or destination path. The source path is the home directory
outside the container and the destination overrides the home
directory within the container.</p></li>
<li><p><strong>APPTAINER_HOSTNAME</strong>: The container’s hostname.</p></li>
</ol>
</section>
<section id="i">
<h3><code class="docutils literal notranslate"><span class="pre">I</span></code><a class="headerlink" href="#i" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_IMAGE</strong>: Filename of the container.</p></li>
</ol>
</section>
<section id="j">
<h3><code class="docutils literal notranslate"><span class="pre">J</span></code><a class="headerlink" href="#j" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_JSON</strong>: Use JSON as an input or output format. Applies to the
<code class="docutils literal notranslate"><span class="pre">build</span></code> and <code class="docutils literal notranslate"><span class="pre">instance</span> <span class="pre">list</span></code> commands. Default is false.</p></li>
</ol>
</section>
<section id="k">
<h3><code class="docutils literal notranslate"><span class="pre">K</span></code><a class="headerlink" href="#k" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_KEEP_PRIVS</strong>: To let root user keep privileges in the
container. Default is set to false.</p></li>
</ol>
</section>
<section id="l">
<h3><code class="docutils literal notranslate"><span class="pre">L</span></code><a class="headerlink" href="#l" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_LABELS</strong>: Specifies the labels associated with the
image.</p></li>
<li><p><strong>APPTAINER_LIBRARY</strong>: Specifies the library to pull from. Default
is set to our Cloud Library.</p></li>
<li><p><strong>APPTAINER_LOCAL_VERIFY</strong>: Set to true to only use the local keyring when
verifying PGP signed SIF images. Disables retrieval of public keys from
configured keyservers. Default is false.</p></li>
<li><p><strong>APPTAINER_LOGIN_USERNAME</strong>: Set the username to use when logging in to a
remote endpoint, registry, or keyserver.</p></li>
<li><p><strong>APPTAINER_LOGIN_PASSWORD</strong>: Set the password to use when logging in to a
remote endpoint, registry, or keyserver.</p></li>
<li><p><strong>APPTAINER_LOGIN_INSECURE</strong>: Set to true to use HTTP (not HTTPS) when
logging in to a remote endpoint. Default is false.</p></li>
<li><p><strong>APPTAINER_LOGS</strong>: Set to true to show the path to instance log files in
<code class="docutils literal notranslate"><span class="pre">instance</span> <span class="pre">list</span></code> output. Default is false.</p></li>
</ol>
</section>
<section id="m">
<h3><code class="docutils literal notranslate"><span class="pre">M</span></code><a class="headerlink" href="#m" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_MEMORY</strong>: Specify a memory limit in bytes for the
container. Default is unset (no limit).</p></li>
<li><p><strong>APPTAINER_MEMORY_RESERVATION</strong>: Specify a memory soft limit in
bytes for the container. Default is unset (no limit).</p></li>
<li><p><strong>APPTAINER_MEMORY_SWAP</strong>: Specify a limit for memory + swap usage by the
container. Default is unset. Effect depends on <strong>APPTAINER_MEMORY</strong>.</p></li>
<li><p><strong>APPTAINER_MESSAGELEVEL</strong>: Set numeric message level for output.
Message levels are <cite>Fatal=-4, Error=-3, Warn=-2, Log=-1, Info=1,
Verbose=2, Verbose2=3, Verbose3=4, Debug=5</cite>.</p></li>
<li><p><strong>APPTAINER_MOUNT</strong>: To specify host to container mounts, using the
syntax understood by the <code class="docutils literal notranslate"><span class="pre">--mount</span></code> flag. Multiple mounts should be
separated by newline characters.</p></li>
</ol>
</section>
<section id="n">
<h3><code class="docutils literal notranslate"><span class="pre">N</span></code><a class="headerlink" href="#n" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_NAME</strong>: Specifies a custom image name.</p></li>
<li><p><strong>APPTAINER_NETWORK</strong>: Used to specify a desired network. If more
than one parameters is used, addresses should be separated by commas,
where each network will bring up a dedicated interface inside the
container.</p></li>
<li><p><strong>APPTAINER_NETWORK_ARGS</strong>: To specify the network arguments to
pass to CNI plugins.</p></li>
<li><p><strong>APPTAINER_NOCLEANUP</strong>: To not clean up the bundle after a failed
build, this can be helpful for debugging. Default is set to false.</p></li>
<li><p><strong>APPTAINER_NOCOLOR</strong>: Print mesages without color output.
Default is set to false unless stderr is not a terminal.</p></li>
<li><p><strong>APPTAINER_NO_HTTPS</strong> and <strong>APPTAINER_NOHTTPS</strong>: Set to true to use HTTP
(not HTTPS) to communicate with registry servers. Default is false.</p></li>
<li><p><strong>APPTAINER_NO_EVAL</strong>: Set to true in order to prevent Apptainer
performing shell evaluation on environment variables / runscript
arguments at startup.</p></li>
<li><p><strong>APPTAINER_NO_HOME</strong>: Considers not mounting users home directory
if home is not the current working directory. Default is set to
false.</p></li>
<li><p><strong>APPTAINER_NO_INIT</strong> and <strong>APPTAINER_NOSHIMINIT</strong>: Considers not
starting the <code class="docutils literal notranslate"><span class="pre">shim</span></code> process with <code class="docutils literal notranslate"><span class="pre">--pid</span></code>.</p></li>
<li><p><strong>APPTAINER_NO_MOUNT</strong>: Disable an automatic mount that has been set in
<code class="docutils literal notranslate"><span class="pre">apptainer.conf</span></code>. Accepts <code class="docutils literal notranslate"><span class="pre">proc</span> <span class="pre">/</span> <span class="pre">sys</span> <span class="pre">/</span> <span class="pre">dev</span> <span class="pre">/</span> <span class="pre">devpts</span> <span class="pre">/</span> <span class="pre">home</span> <span class="pre">/</span> <span class="pre">tmp</span> <span class="pre">/</span>
<span class="pre">hostfs</span> <span class="pre">/</span> <span class="pre">cwd</span></code>, or the source path for a system specific bind.</p></li>
<li><p><strong>APPTAINER_NO_NV</strong>: Flag to disable Nvidia support. Opposite of
<code class="docutils literal notranslate"><span class="pre">APPTAINER_NV</span></code>.</p></li>
<li><p><strong>APPTAINER_NO_PID</strong>: Set to true to disable the PID namespace, when it is
inferred by other options (e.g.``–containall`` )</p></li>
<li><p><strong>APPTAINER_NO_PRIVS</strong>: To drop all the privileges from root user
in the container. Default is false.</p></li>
<li><p><strong>APPTAINER_NOTEST</strong>: Set to true to disable execution of <code class="docutils literal notranslate"><span class="pre">%test</span></code> sections
when building a container.</p></li>
<li><p><strong>APPTAINER_NO_UMASK</strong>: Set to true to prevent host umask propagating
to container, and use a default 0022 umask instead. Default is false.</p></li>
<li><p><strong>APPTAINER_NV</strong>: To enable Nvidia GPU support. Default is
set to false.</p></li>
<li><p><strong>APPTAINER_NVCCLI</strong>: To use nvidia-container-cli for container GPU setup
(experimental, only unprivileged).</p></li>
</ol>
</section>
<section id="o">
<h3><code class="docutils literal notranslate"><span class="pre">O</span></code><a class="headerlink" href="#o" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_OOM_KILL_DISABLE</strong>: Set to true to disable OOM killer for
container processes, if possible. Default is false.</p></li>
<li><p><strong>APPTAINER_OVERLAY</strong> and <strong>APPTAINER_OVERLAYIMAGE</strong>: To indicate
the use of an overlay file system image for persistent data storage
or as read-only layer of container.</p></li>
</ol>
</section>
<section id="p">
<h3><code class="docutils literal notranslate"><span class="pre">P</span></code><a class="headerlink" href="#p" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_PULLDIR</strong> and <strong>APPTAINER_PULLFOLDER</strong>: Specify destination
directory when pulling a container image.</p></li>
<li><p><strong>APPTAINER_PID_FILE</strong>: When starting an instance, write the instance PID
to the specified file.</p></li>
<li><p><strong>APPTAINER_PIDS_LIMIT</strong>: Specify maximum number of processes that
the container may spawn. Default is 0 (no limit).</p></li>
</ol>
</section>
<section id="q">
<h3><code class="docutils literal notranslate"><span class="pre">Q</span></code><a class="headerlink" href="#q" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_QUIET</strong>: Suppresses all Info messages.
Default is set to false.</p></li>
</ol>
</section>
<section id="r">
<h3><code class="docutils literal notranslate"><span class="pre">R</span></code><a class="headerlink" href="#r" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_ROOTFS</strong>: During a build <code class="docutils literal notranslate"><span class="pre">APPTAINER_ROOTFS</span></code> is set to the
path of the rootfs for the container. It can be used within a definition file
to manipulate the rootfs (e.g. from the <code class="docutils literal notranslate"><span class="pre">%setup</span></code> section).</p></li>
<li><p><strong>APPTAINER_ROCM</strong>: Set to true to expose ROCm devices and libraries inside
the container. Default is false.</p></li>
<li><p><strong>APPTAINER_RUNSCRIPT</strong>: Specifies the runscript of the image.</p></li>
</ol>
</section>
<section id="s">
<h3><code class="docutils literal notranslate"><span class="pre">S</span></code><a class="headerlink" href="#s" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_SANDBOX</strong>: Set to true to specify that the format of the image
should be a sandbox. Default is set to false.</p></li>
<li><p><strong>APPTAINER_SCRATCH</strong> and <strong>APPTAINER_SCRATCHDIR</strong>: Used to
include a scratch directory within the container that is linked to a
temporary directory. (use -W to force location)</p></li>
<li><p><strong>APPTAINER_SECTION</strong>: Set to specify a comma separated string of all
the sections to be run from the deffile (setup, post, files,
environment, test, labels, none)</p></li>
<li><p><strong>APPTAINER_SECURITY</strong>: Used to enable security features. (SELinux,
Apparmor, Seccomp)</p></li>
<li><p><strong>APPTAINER_SECRET</strong>: Lists all the private keys instead of the
default which display the public ones.</p></li>
<li><p><strong>APPTAINER_SHELL</strong>: The path to the program to be used as an
interactive shell.</p></li>
<li><p><strong>APPTAINER_SIGNAL</strong>: Specifies a signal sent to the instance.</p></li>
<li><p><strong>APPTAINER_SILENT</strong>: Suppresses all Info and Warning messages.
Default is set to false.</p></li>
<li><p><strong>APPTAINER_SIGNAL</strong>: Specifies the signal to send to an instance with
<code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">instance</span> <span class="pre">stop</span></code>.</p></li>
<li><p><strong>APPTAINER_SIGN_KEY</strong>: Set the path to a key file to be used when signing
a SIF image.</p></li>
<li><p><strong>APPTAINER_SPARSE</strong>: Set to true to create sparse overlay image files with
the <code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">overlay</span> <span class="pre">create</span></code> command.</p></li>
<li><p><strong>APPTAINER_SHARENS</strong>: Share the namespace and image
with other containers launched from the same parent process.</p></li>
</ol>
</section>
<section id="t">
<h3><code class="docutils literal notranslate"><span class="pre">T</span></code><a class="headerlink" href="#t" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_TEST</strong>: Specifies the test script for the image.</p></li>
<li><p><strong>APPTAINER_TMPDIR</strong>: Specify a location for temporary files to be used
when pulling and building container images. See <a class="reference internal" href="build_env.html#sec-temporaryfolders"><span class="std std-ref">Temporary Folders</span></a>.</p></li>
</ol>
</section>
<section id="u">
<h3><code class="docutils literal notranslate"><span class="pre">U</span></code><a class="headerlink" href="#u" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_UNSHARE_PID</strong>: To specify that the container will run
in a new PID namespace. Default is set to false.</p></li>
<li><p><strong>APPTAINER_UNSHARE_IPC</strong>: To specify that the container will run
in a new IPC namespace. Default is set to false.</p></li>
<li><p><strong>APPTAINER_UNSHARE_NET</strong>: To specify that the container will run
in a new network namespace (sets up a bridge network interface by
default). Default is set to false.</p></li>
<li><p><strong>APPTAINER_UNSHARE_UTS</strong>: To specify that the container will run
in a new UTS namespace. Default is set to false.</p></li>
<li><p><strong>APPTAINER_UNSQUASH</strong>: To convert SIF files to temporary sandboxes
before running a container. Default is set to false.</p></li>
<li><p><strong>APPTAINER_UPDATE</strong>: To run the definition over an existing
container (skips the header). Default is set to false.</p></li>
<li><p><strong>APPTAINER_URL</strong>: Specifies the key server <code class="docutils literal notranslate"><span class="pre">URL</span></code>.</p></li>
<li><p><strong>APPTAINER_USER</strong>: As root, specify a user to manage that user’s instances
with the <code class="docutils literal notranslate"><span class="pre">instance</span></code> commands.</p></li>
<li><p><strong>APPTAINER_USERNS</strong> and <strong>APPTAINER_UNSHARE_USERNS</strong>: To specify
that the container will run in a new user namespace, allowing
Apptainer to run completely unprivileged even with a setuid
installation.
Default is set to false.</p></li>
</ol>
</section>
<section id="v">
<h3><code class="docutils literal notranslate"><span class="pre">V</span></code><a class="headerlink" href="#v" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_VERBOSE</strong>: Print additional information.
Default is set to false.</p></li>
</ol>
</section>
<section id="id2">
<h3><code class="docutils literal notranslate"><span class="pre">V</span></code><a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_VERIFY_CERTIFICATE</strong>: Set the path to a PEM file containing the
certificate to be used when verifying an x509 signed SIF image.</p></li>
<li><p><strong>APPTAINER_VERIFY_INTERMEDIATES</strong>: Set the path to a PEM file containing
an intermediate certificate / chain to be used when verifying an x509 signed
SIF image.</p></li>
<li><p><strong>APPTAINER_VERIFY_KEY</strong>: Set the path to a key file to be used when
verifying a key signed SIF image.</p></li>
<li><p><strong>APPTAINER_VERIFY_OCSP</strong>: Set to true to enable OCSP verification of
certificates. Default is false.</p></li>
<li><p><strong>APPTAINER_VERIFY_ROOTS</strong>: Set the path to a PEM file containing root
certificate(s) to be used when verifying an x509 signed SIF image.</p></li>
</ol>
</section>
<section id="w">
<h3><code class="docutils literal notranslate"><span class="pre">W</span></code><a class="headerlink" href="#w" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>APPTAINER_WORKDIR</strong>: The working directory to be used for
<code class="docutils literal notranslate"><span class="pre">/tmp</span></code>, <code class="docutils literal notranslate"><span class="pre">/var/tmp</span></code> and <code class="docutils literal notranslate"><span class="pre">$HOME</span></code> (if <code class="docutils literal notranslate"><span class="pre">-c</span></code> or <code class="docutils literal notranslate"><span class="pre">--contain</span></code> was
also used)</p></li>
<li><p><strong>APPTAINER_WRITABLE</strong>: By default, all Apptainer containers
are available as read only, this option makes the file system
accessible as read/write. Default set to false.</p></li>
<li><p><strong>APPTAINER_WRITABLE_TMPFS</strong>: Makes the file system accessible as
read-write with non-persistent data (with overlay support only).
Default is set to false.</p></li>
</ol>
</section>
</section>
<section id="build-modules">
<span id="buildmodules"></span><h2>Build Modules<a class="headerlink" href="#build-modules" title="Link to this heading"></a></h2>
<section id="library-bootstrap-agent">
<span id="build-library-module"></span><h3><code class="docutils literal notranslate"><span class="pre">library</span></code> bootstrap agent<a class="headerlink" href="#library-bootstrap-agent" title="Link to this heading"></a></h3>
<section id="overview">
<span id="sec-build-library-module"></span><h4>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h4>
<p>You can use an existing container in a Container Library as your
“base” and then add customization. This allows you to build multiple
images from the same starting point. For example, you may want to build
several containers with the same custom python installation, the same
custom compiler toolchain, or the same base MPI installation. Instead of
building these from scratch each time, you could create a base container
in the Container Library and then build new containers from that
existing base container adding customizations in <code class="docutils literal notranslate"><span class="pre">%post</span></code>,
<code class="docutils literal notranslate"><span class="pre">%environment</span></code>, <code class="docutils literal notranslate"><span class="pre">%runscript</span></code>, etc.</p>
<p>This requires setting up a Container Library as shown in the
<a class="reference internal" href="endpoint.html#sec-managing-remote-endpoints"><span class="std std-ref">Managing Remote Endpoints</span></a>
section.</p>
</section>
<section id="keywords">
<h4>Keywords<a class="headerlink" href="#keywords" title="Link to this heading"></a></h4>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: library
</pre></div>
</div>
<p>The Bootstrap keyword is always mandatory. It describes the bootstrap
module to use.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">From</span>: &lt;entity&gt;/&lt;collection&gt;/&lt;container&gt;:&lt;tag&gt;
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">From</span></code> keyword is mandatory. It specifies the container to use as
a base. <code class="docutils literal notranslate"><span class="pre">entity</span></code> is optional and defaults to <code class="docutils literal notranslate"><span class="pre">library</span></code>.
<code class="docutils literal notranslate"><span class="pre">collection</span></code> is optional and defaults to <code class="docutils literal notranslate"><span class="pre">default</span></code>. This is the
correct namespace to use for some official containers (<code class="docutils literal notranslate"><span class="pre">alpine</span></code> for
example). <code class="docutils literal notranslate"><span class="pre">tag</span></code> is also optional and will default to <code class="docutils literal notranslate"><span class="pre">latest</span></code>.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span>Library: http://custom/library
</pre></div>
</div>
<p>The Library keyword is mandatory. It is the URL for the library server.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Fingerprints</span>: 22045C8C0B1004D058DE4BEDA20C27EE7FF7BA84
</pre></div>
</div>
<p>The Fingerprints keyword is optional. It specifies one or more comma
separated fingerprints corresponding to PGP public keys. If present, the
bootstrap image will be verified and the build will only proceed if it
is signed by keys matching <em>all</em> of the specified fingerprints.</p>
</section>
</section>
<section id="docker-bootstrap-agent">
<span id="build-docker-module"></span><h3><code class="docutils literal notranslate"><span class="pre">docker</span></code> bootstrap agent<a class="headerlink" href="#docker-bootstrap-agent" title="Link to this heading"></a></h3>
<section id="sec-build-docker-module">
<span id="id3"></span><h4>Overview<a class="headerlink" href="#sec-build-docker-module" title="Link to this heading"></a></h4>
<p>Docker images are comprised of layers that are assembled at runtime to
create an image. You can use Docker layers to create a base image, and
then add your own custom software. For example, you might use Docker’s
Ubuntu image layers to create an Ubuntu Apptainer container. You
could do the same with Fedora, Debian, Arch, Suse, Alpine, BusyBox, etc.</p>
<p>Or maybe you want a container that already has software installed. For
instance, maybe you want to build a container that uses CUDA and cuDNN
to leverage the GPU, but you don’t want to install from scratch. You can
start with one of the <code class="docutils literal notranslate"><span class="pre">nvidia/cuda</span></code> containers and install your
software on top of that.</p>
<p>Or perhaps you have already invested in Docker and created your own
Docker containers. If so, you can seamlessly convert them to
Apptainer with the <code class="docutils literal notranslate"><span class="pre">docker</span></code> bootstrap module.</p>
</section>
<section id="id4">
<h4>Keywords<a class="headerlink" href="#id4" title="Link to this heading"></a></h4>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: docker
</pre></div>
</div>
<p>The Bootstrap keyword is always mandatory. It describes the bootstrap
module to use.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">From</span>: &lt;registry&gt;/&lt;namespace&gt;/&lt;container&gt;:&lt;tag&gt;@&lt;digest&gt;
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">From</span></code> keyword is mandatory. It specifies the container to use as
a base. <code class="docutils literal notranslate"><span class="pre">registry</span></code> is optional and defaults to <code class="docutils literal notranslate"><span class="pre">index.docker.io</span></code>.
<code class="docutils literal notranslate"><span class="pre">namespace</span></code> is optional and defaults to <code class="docutils literal notranslate"><span class="pre">library</span></code>. This is the
correct namespace to use for some official containers (ubuntu for
example). <code class="docutils literal notranslate"><span class="pre">tag</span></code> is also optional and will default to <code class="docutils literal notranslate"><span class="pre">latest</span></code></p>
<p>See <a class="reference internal" href="docker_and_oci.html#docker-and-oci"><span class="std std-ref">Apptainer and Docker</span></a> for more
detailed info on using Docker registries.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Registry</span>: http://custom_registry
</pre></div>
</div>
<p>The Registry keyword is optional. It will default to
<code class="docutils literal notranslate"><span class="pre">index.docker.io</span></code>.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Namespace</span>: namespace
</pre></div>
</div>
<p>The Namespace keyword is optional. It will default to <code class="docutils literal notranslate"><span class="pre">library</span></code>.</p>
</section>
<section id="notes">
<h4>Notes<a class="headerlink" href="#notes" title="Link to this heading"></a></h4>
<p>Docker containers are stored as a collection of tarballs called layers.
When building from a Docker container the layers must be downloaded and
then assembled in the proper order to produce a viable file system. Then
the file system must be converted to Singularity Image File (sif)
format.</p>
<p>For detailed information about setting your build environment see
<a class="reference internal" href="build_env.html#build-environment"><span class="std std-ref">Build Customization</span></a>.</p>
</section>
</section>
<section id="shub-bootstrap-agent">
<span id="build-shub"></span><h3><code class="docutils literal notranslate"><span class="pre">shub</span></code> bootstrap agent<a class="headerlink" href="#shub-bootstrap-agent" title="Link to this heading"></a></h3>
<section id="id5">
<h4>Overview<a class="headerlink" href="#id5" title="Link to this heading"></a></h4>
<p>You can use an existing container on Singularity Hub as your “base” and
then add customization. This allows you to build multiple images from
the same starting point. For example, you may want to build several
containers with the same custom python installation, the same custom
compiler toolchain, or the same base MPI installation. Instead of
building these from scratch each time, you could create a base container
on Singularity Hub and then build new containers from that existing base
container adding customizations in <code class="docutils literal notranslate"><span class="pre">%post</span></code> , <code class="docutils literal notranslate"><span class="pre">%environment</span></code>,
<code class="docutils literal notranslate"><span class="pre">%runscript</span></code>, etc.</p>
</section>
<section id="id6">
<h4>Keywords<a class="headerlink" href="#id6" title="Link to this heading"></a></h4>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: shub
</pre></div>
</div>
<p>The Bootstrap keyword is always mandatory. It describes the bootstrap
module to use.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">From</span>: shub://&lt;registry&gt;/&lt;username&gt;/&lt;container-name&gt;:&lt;tag&gt;@digest
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">From</span></code> keyword is mandatory. It specifies the container to use as
a base. <code class="docutils literal notranslate"><span class="pre">registry</span> <span class="pre">is</span> <span class="pre">optional</span> <span class="pre">and</span> <span class="pre">defaults</span> <span class="pre">to</span> <span class="pre">``singularity-hub.org</span></code>.
<code class="docutils literal notranslate"><span class="pre">tag</span></code> and <code class="docutils literal notranslate"><span class="pre">digest</span></code> are also optional. <code class="docutils literal notranslate"><span class="pre">tag</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">latest</span></code>
and <code class="docutils literal notranslate"><span class="pre">digest</span></code> can be left blank if you want the latest build.</p>
</section>
<section id="id7">
<h4>Notes<a class="headerlink" href="#id7" title="Link to this heading"></a></h4>
<p>When bootstrapping from a Singularity Hub image, all previous definition
files that led to the creation of the current image will be stored in a
directory within the container called
<code class="docutils literal notranslate"><span class="pre">/.singularity.d/bootstrap_history</span></code>. Apptainer will also alert you
if environment variables have been changed between the base image and
the new image during bootstrap.</p>
</section>
</section>
<section id="oras-bootstrap-agent">
<span id="build-oras"></span><h3><code class="docutils literal notranslate"><span class="pre">oras</span></code> bootstrap agent<a class="headerlink" href="#oras-bootstrap-agent" title="Link to this heading"></a></h3>
<section id="id8">
<h4>Overview<a class="headerlink" href="#id8" title="Link to this heading"></a></h4>
<p>Using, this module, a container from supporting OCI Registries - Eg: ACR
(Azure Container Registry), local container registries, etc can be used
as your “base” image and later customized. This allows you to build
multiple images from the same starting point. For example, you may want
to build several containers with the same custom python installation,
the same custom compiler toolchain, or the same base MPI installation.
Instead of building these from scratch each time, you could make use of
<code class="docutils literal notranslate"><span class="pre">oras</span></code> to pull an appropriate base container and then build new
containers by adding customizations in <code class="docutils literal notranslate"><span class="pre">%post</span></code> , <code class="docutils literal notranslate"><span class="pre">%environment</span></code>,
<code class="docutils literal notranslate"><span class="pre">%runscript</span></code>, etc.</p>
</section>
<section id="id9">
<h4>Keywords<a class="headerlink" href="#id9" title="Link to this heading"></a></h4>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: oras
</pre></div>
</div>
<p>The Bootstrap keyword is always mandatory. It describes the bootstrap
module to use.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">From</span>: registry/namespace/image:tag
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">From</span></code> keyword is mandatory. It specifies the container to use as
a base. Also,``tag`` is mandatory that refers to the version of image
you want to use.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Fingerprints</span>: 22045C8C0B1004D058DE4BEDA20C27EE7FF7BA84
</pre></div>
</div>
<p>The Fingerprints keyword is optional. It specifies one or more comma separated
fingerprints corresponding to PGP public keys. If present, the SIF file will be
verified and the build will only proceed if it is signed by keys matching <em>all</em>
of the specified fingerprints.</p>
</section>
</section>
<section id="localimage-bootstrap-agent">
<span id="build-localimage"></span><h3><code class="docutils literal notranslate"><span class="pre">localimage</span></code> bootstrap agent<a class="headerlink" href="#localimage-bootstrap-agent" title="Link to this heading"></a></h3>
<p id="sec-build-localimage">This module allows you to build a container from an existing
Apptainer container on your host system. The name is somewhat
misleading because your container can be in either image or directory
format.</p>
<section id="id10">
<h4>Overview<a class="headerlink" href="#id10" title="Link to this heading"></a></h4>
<p>You can use an existing container image as your “base”, and then add
customization. This allows you to build multiple images from the same
starting point. For example, you may want to build several containers
with the same custom python installation, the same custom compiler
toolchain, or the same base MPI installation. Instead of building these
from scratch each time, you could start with the appropriate local base
container and then customize the new container in <code class="docutils literal notranslate"><span class="pre">%post</span></code>,
<code class="docutils literal notranslate"><span class="pre">%environment</span></code>, <code class="docutils literal notranslate"><span class="pre">%runscript</span></code>, etc.</p>
</section>
<section id="id11">
<h4>Keywords<a class="headerlink" href="#id11" title="Link to this heading"></a></h4>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: localimage
</pre></div>
</div>
<p>The Bootstrap keyword is always mandatory. It describes the bootstrap
module to use.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">From</span>: /path/to/container/file/or/directory
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">From</span></code> keyword is mandatory. It specifies the local container to
use as a base.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Fingerprints</span>: 22045C8C0B1004D058DE4BEDA20C27EE7FF7BA84
</pre></div>
</div>
<p>The Fingerprints keyword is optional. It specifies one or more comma
separated fingerprints corresponding to PGP public keys. If present, and
the <code class="docutils literal notranslate"><span class="pre">From:</span></code> keyword points to a SIF format image, it will be verified
and the build will only proceed if it is signed by keys matching <em>all</em>
of the specified fingerprints.</p>
</section>
<section id="id12">
<h4>Notes<a class="headerlink" href="#id12" title="Link to this heading"></a></h4>
<p>When building from a local container, all previous definition files that
led to the creation of the current container will be stored in a
directory within the container called
<code class="docutils literal notranslate"><span class="pre">/.singularity.d/bootstrap_history</span></code>. Apptainer will also alert you
if environment variables have been changed between the base image and
the new image during bootstrap.</p>
</section>
</section>
<section id="yum-or-dnf-bootstrap-agent">
<span id="build-yum"></span><h3><code class="docutils literal notranslate"><span class="pre">yum</span></code> or <code class="docutils literal notranslate"><span class="pre">dnf</span></code> bootstrap agent<a class="headerlink" href="#yum-or-dnf-bootstrap-agent" title="Link to this heading"></a></h3>
<p id="sec-build-yum">This module allows you to build a Red Hat style
container from a mirror URI based on yum or dnf.</p>
<section id="id13">
<h4>Overview<a class="headerlink" href="#id13" title="Link to this heading"></a></h4>
<p>Use the <code class="docutils literal notranslate"><span class="pre">yum</span></code> or <code class="docutils literal notranslate"><span class="pre">dnf</span></code> module to specify a base for a RHEL-like container.
You must also specify the URI for the mirror you would like to use.</p>
</section>
<section id="id14">
<h4>Keywords<a class="headerlink" href="#id14" title="Link to this heading"></a></h4>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: yum
</pre></div>
</div>
<p>or</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: dnf
</pre></div>
</div>
<p>The Bootstrap keyword is always mandatory. It describes the bootstrap
module to use.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">OSVersion</span>: <span class="m">9</span>
</pre></div>
</div>
<p>The OSVersion keyword is optional. It specifies the OS version you would
like to use. It is only required if you have specified a %{OSVERSION}
variable in the <code class="docutils literal notranslate"><span class="pre">MirrorURL</span></code> keyword.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">MirrorURL</span>: http://repo.almalinux.org/almalinux/%{OSVERSION}/BaseOS/x86_64/os
</pre></div>
</div>
<p>The MirrorURL keyword is mandatory. It specifies the URI to use as a
mirror to download the OS. If you define the <code class="docutils literal notranslate"><span class="pre">OSVersion</span></code> keyword, then
you can use it in the URI as in the example above.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Include</span>: dnf
</pre></div>
</div>
<p>The Include keyword is optional. It allows you to install additional
packages into the core operating system. It is a best practice to supply
only the bare essentials such that the <code class="docutils literal notranslate"><span class="pre">%post</span></code> section has what it
needs to properly complete the build. One common package you may want to
install when using the <code class="docutils literal notranslate"><span class="pre">yum</span></code> or <code class="docutils literal notranslate"><span class="pre">dnf</span></code> build module is YUM or DNF itself.</p>
</section>
<section id="id15">
<h4>Notes<a class="headerlink" href="#id15" title="Link to this heading"></a></h4>
<p>There is a major limitation with using YUM/DNF to bootstrap a container. The
RPM database that exists within the container will be created using the
RPM library and Berkeley DB implementation that exists on the host
system. If the RPM implementation inside the container is not compatible
with the RPM database that was used to create the container, RPM and YUM/DNF
commands inside the container may fail. This issue can be easily
demonstrated by bootstrapping an older RHEL compatible image by a newer
one (e.g. bootstrap a RHEL 8 container from a RHEL 9 host).</p>
<p>In order to use the <code class="docutils literal notranslate"><span class="pre">yum</span></code> or <code class="docutils literal notranslate"><span class="pre">dnf</span></code> build module, you must have <code class="docutils literal notranslate"><span class="pre">yum</span></code>
or <code class="docutils literal notranslate"><span class="pre">dnf</span></code> installed on your system. It may seem counter-intuitive to install YUM
or DNF on a system that uses a different package manager, but you can do so.
For instance, on Ubuntu you can install it like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get update &amp;&amp; sudo apt-get install dnf
</pre></div>
</div>
<p>When building a container as an unprivileged user using this bootstrap,
not all of the fakeroot modes work well.  See
<a class="reference internal" href="fakeroot.html#build"><span class="std std-ref">Building container images</span></a> for details.</p>
</section>
</section>
<section id="debootstrap-build-agent">
<span id="build-debootstrap"></span><h3><code class="docutils literal notranslate"><span class="pre">debootstrap</span></code> build agent<a class="headerlink" href="#debootstrap-build-agent" title="Link to this heading"></a></h3>
<p id="sec-build-debootstrap">This module allows you to build a Debian/Ubuntu style container from a
mirror URI.</p>
<section id="id16">
<h4>Overview<a class="headerlink" href="#id16" title="Link to this heading"></a></h4>
<p>Use the <code class="docutils literal notranslate"><span class="pre">debootstrap</span></code> module to specify a base for a Debian-like
container. You must also specify the OS version and a URI for the mirror
you would like to use.</p>
</section>
<section id="id17">
<h4>Keywords<a class="headerlink" href="#id17" title="Link to this heading"></a></h4>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: debootstrap
</pre></div>
</div>
<p>The Bootstrap keyword is always mandatory. It describes the bootstrap
module to use.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">OSVersion</span>: xenial
</pre></div>
</div>
<p>The OSVersion keyword is mandatory. It specifies the OS version you
would like to use. For Ubuntu you can use code words like <code class="docutils literal notranslate"><span class="pre">trusty</span></code>
(14.04), <code class="docutils literal notranslate"><span class="pre">xenial</span></code> (16.04), and <code class="docutils literal notranslate"><span class="pre">yakkety</span></code> (17.04). For Debian you can
use values like <code class="docutils literal notranslate"><span class="pre">stable</span></code>, <code class="docutils literal notranslate"><span class="pre">oldstable</span></code>, <code class="docutils literal notranslate"><span class="pre">testing</span></code>, and <code class="docutils literal notranslate"><span class="pre">unstable</span></code>
or code words like <code class="docutils literal notranslate"><span class="pre">wheezy</span></code> (7), <code class="docutils literal notranslate"><span class="pre">jesse</span></code> (8), and <code class="docutils literal notranslate"><span class="pre">stretch</span></code> (9).</p>
<blockquote>
<div><div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">MirrorURL</span>:  http://us.archive.ubuntu.com/ubuntu/
</pre></div>
</div>
</div></blockquote>
<p>The MirrorURL keyword is mandatory. It specifies a URI to use as a
mirror when downloading the OS.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Include</span>: somepackage
</pre></div>
</div>
<p>The Include keyword is optional. It allows you to install additional
packages into the core operating system. It is a best practice to supply
only the bare essentials such that the <code class="docutils literal notranslate"><span class="pre">%post</span></code> section has what it
needs to properly complete the build.</p>
</section>
<section id="id18">
<h4>Notes<a class="headerlink" href="#id18" title="Link to this heading"></a></h4>
<p>In order to use the <code class="docutils literal notranslate"><span class="pre">debootstrap</span></code> build module, you must have
<code class="docutils literal notranslate"><span class="pre">debootstrap</span></code> installed on your system. On Ubuntu you can install it
like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get update &amp;&amp; sudo apt-get install debootstrap
</pre></div>
</div>
<p>On RHEL you can install it from the epel repos like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo dnf update &amp;&amp; sudo dnf install epel-release &amp;&amp; sudo dnf install debootstrap.noarch
</pre></div>
</div>
<p>When building a container as an unprivileged user using this bootstrap,
not all of the fakeroot modes work well.  See
<a class="reference internal" href="fakeroot.html#build"><span class="std std-ref">Building container images</span></a> for details.</p>
</section>
</section>
<section id="arch-bootstrap-agent">
<span id="build-arch"></span><h3><code class="docutils literal notranslate"><span class="pre">arch</span></code> bootstrap agent<a class="headerlink" href="#arch-bootstrap-agent" title="Link to this heading"></a></h3>
<p id="sec-build-arch">This module allows you to build a Arch Linux based container.</p>
<section id="id19">
<h4>Overview<a class="headerlink" href="#id19" title="Link to this heading"></a></h4>
<p>Use the <code class="docutils literal notranslate"><span class="pre">arch</span></code> module to specify a base for an Arch Linux based
container. Arch Linux uses the aptly named <code class="docutils literal notranslate"><span class="pre">pacman</span></code> package manager
(all puns intended).</p>
</section>
<section id="id20">
<h4>Keywords<a class="headerlink" href="#id20" title="Link to this heading"></a></h4>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: arch
</pre></div>
</div>
<p>The Bootstrap keyword is always mandatory. It describes the bootstrap
module to use.</p>
<p>The Arch Linux bootstrap module does not name any additional keywords at
this time. By defining the <code class="docutils literal notranslate"><span class="pre">arch</span></code> module, you have essentially given
all of the information necessary for that particular bootstrap module to
build a core operating system.</p>
</section>
<section id="id21">
<h4>Notes<a class="headerlink" href="#id21" title="Link to this heading"></a></h4>
<p>Arch Linux is, by design, a very stripped down, light-weight OS. You may
need to perform a significant amount of configuration to get a usable
OS. Please refer to this <a class="reference external" href="https://github.com/apptainer/apptainer/blob/main/examples/arch/README.md">README.md</a>
and the <a class="reference external" href="https://github.com/apptainer/apptainer/blob/main/examples/arch/">Arch Linux example</a>
for more info.</p>
</section>
</section>
<section id="busybox-bootstrap-agent">
<span id="build-busybox"></span><h3><code class="docutils literal notranslate"><span class="pre">busybox</span></code> bootstrap agent<a class="headerlink" href="#busybox-bootstrap-agent" title="Link to this heading"></a></h3>
<p id="sec-build-busybox">This module allows you to build a container based on BusyBox.</p>
<section id="id22">
<h4>Overview<a class="headerlink" href="#id22" title="Link to this heading"></a></h4>
<p>Use the <code class="docutils literal notranslate"><span class="pre">busybox</span></code> module to specify a BusyBox base for container. You
must also specify a URI for the mirror you would like to use.</p>
</section>
<section id="id23">
<h4>Keywords<a class="headerlink" href="#id23" title="Link to this heading"></a></h4>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: busybox
</pre></div>
</div>
<p>The Bootstrap keyword is always mandatory. It describes the bootstrap
module to use.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">MirrorURL</span>: https://www.busybox.net/downloads/binaries/<span class="m">1.35.0</span>-x86_64-linux-musl/busybox
</pre></div>
</div>
<p>The MirrorURL keyword is mandatory. It specifies a URI to use as a
mirror when downloading the OS.</p>
</section>
<section id="id24">
<h4>Notes<a class="headerlink" href="#id24" title="Link to this heading"></a></h4>
<p>You can build a fully functional BusyBox container that only takes up
~700kB of disk space!</p>
</section>
</section>
<section id="zypper-bootstrap-agent">
<span id="build-zypper"></span><h3><code class="docutils literal notranslate"><span class="pre">zypper</span></code> bootstrap agent<a class="headerlink" href="#zypper-bootstrap-agent" title="Link to this heading"></a></h3>
<p id="sec-build-zypper">This module allows you to build a Suse style container from a mirror
URI.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">zypper</span></code> version 1.11.20 or greater is required on the host system,
as Apptainer requires the <code class="docutils literal notranslate"><span class="pre">--releasever</span></code> flag.</p>
</div>
<section id="id25">
<h4>Overview<a class="headerlink" href="#id25" title="Link to this heading"></a></h4>
<p>Use the <code class="docutils literal notranslate"><span class="pre">zypper</span></code> module to specify a base for a Suse-like container.
You must also specify a URI for the mirror you would like to use.</p>
</section>
<section id="id26">
<h4>Keywords<a class="headerlink" href="#id26" title="Link to this heading"></a></h4>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: zypper
</pre></div>
</div>
<p>The Bootstrap keyword is always mandatory. It describes the bootstrap
module to use.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">OSVersion</span>: <span class="m">42.2</span>
</pre></div>
</div>
<p>The OSVersion keyword is optional. It specifies the OS version you would
like to use. It is only required if you have specified a %{OSVERSION}
variable in the <code class="docutils literal notranslate"><span class="pre">MirrorURL</span></code> keyword.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Include</span>: somepackage
</pre></div>
</div>
<p>The Include keyword is optional. It allows you to install additional
packages into the core operating system. It is a best practice to supply
only the bare essentials such that the <code class="docutils literal notranslate"><span class="pre">%post</span></code> section has what it
needs to properly complete the build. One common package you may want to
install when using the zypper build module is <code class="docutils literal notranslate"><span class="pre">zypper</span></code> itself.</p>
</section>
</section>
<section id="docker-daemon-bootstrap-agent">
<span id="docker-daemon"></span><h3><code class="docutils literal notranslate"><span class="pre">docker-daemon</span></code> bootstrap agent<a class="headerlink" href="#docker-daemon-bootstrap-agent" title="Link to this heading"></a></h3>
<section id="id27">
<h4>Overview<a class="headerlink" href="#id27" title="Link to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">docker-daemon</span></code> allows you to build a SIF from any Docker image
currently residing in the Docker daemon’s internal storage:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker<span class="w"> </span>images<span class="w"> </span>alpine
<span class="go">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span>
<span class="go">alpine              latest              965ea09ff2eb        7 weeks ago         5.55MB</span>

<span class="gp">$ </span>apptainer<span class="w"> </span>run<span class="w"> </span>docker-daemon:alpine:latest
<span class="go">INFO:    Converting OCI blobs to SIF format</span>
<span class="go">INFO:    Starting build...</span>
<span class="go">Getting image source signatures</span>
<span class="go">Copying blob 77cae8ab23bf done</span>
<span class="go">Copying config 759e71f0d3 done</span>
<span class="go">Writing manifest to image destination</span>
<span class="go">Storing signatures</span>
<span class="go">2019/12/11 14:53:24  info unpack layer: sha256:eb7c47c7f0fd0054242f35366d166e6b041dfb0b89e5f93a82ad3a3206222502</span>
<span class="go">INFO:    Creating SIF file...</span>
<span class="go">[=====================================================================] 100 % 0s</span>
<span class="go">Apptainer&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">APPTAINER_DOCKER_HOST</span></code> or <code class="docutils literal notranslate"><span class="pre">DOCKER_HOST</span></code> environment variables may be
set to instruct {Apptainer} to pull images from a Docker daemon that is not
running at the default location. For example, when using a virtualized Docker you may be instructed to set <code class="docutils literal notranslate"><span class="pre">DOCKER_HOST</span></code> e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">To</span> <span class="n">connect</span> <span class="n">the</span> <span class="n">Docker</span> <span class="n">client</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Docker</span> <span class="n">daemon</span><span class="p">,</span> <span class="n">please</span> <span class="nb">set</span>
<span class="n">export</span> <span class="n">DOCKER_HOST</span><span class="o">=</span><span class="n">tcp</span><span class="p">:</span><span class="o">//</span><span class="mf">192.168.59.103</span><span class="p">:</span><span class="mi">2375</span>
</pre></div>
</div>
</section>
<section id="id28">
<h4>Keywords<a class="headerlink" href="#id28" title="Link to this heading"></a></h4>
<p>In a definition file, the <code class="docutils literal notranslate"><span class="pre">docker-daemon</span></code> bootstrap agent requires the source container reference to
be provided with the <code class="docutils literal notranslate"><span class="pre">From:</span></code> keyword:</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: docker-daemon
<span class="k">From</span>: &lt;image&gt;:&lt;tag&gt;
</pre></div>
</div>
<p>where both <code class="docutils literal notranslate"><span class="pre">&lt;image&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;tag&gt;</span></code> are mandatory fields that must be
written explicitly.</p>
</section>
</section>
<section id="docker-archive-bootstrap-agent">
<span id="id29"></span><h3><code class="docutils literal notranslate"><span class="pre">docker-archive</span></code> bootstrap agent<a class="headerlink" href="#docker-archive-bootstrap-agent" title="Link to this heading"></a></h3>
<section id="id30">
<h4>Overview<a class="headerlink" href="#id30" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">docker-archive</span></code> boostrap agent allows you to create a Apptainer image
from a docker image stored in a <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">save</span></code> formatted tar file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker<span class="w"> </span>save<span class="w"> </span>-o<span class="w"> </span>alpine.tar<span class="w"> </span>alpine:latest

<span class="gp">$ </span>apptainer<span class="w"> </span>run<span class="w"> </span>docker-archive:<span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/alpine.tar
<span class="go">INFO:    Converting OCI blobs to SIF format</span>
<span class="go">INFO:    Starting build...</span>
<span class="go">Getting image source signatures</span>
<span class="go">Copying blob 77cae8ab23bf done</span>
<span class="go">Copying config 759e71f0d3 done</span>
<span class="go">Writing manifest to image destination</span>
<span class="go">Storing signatures</span>
<span class="go">2019/12/11 15:25:09  info unpack layer: sha256:eb7c47c7f0fd0054242f35366d166e6b041dfb0b89e5f93a82ad3a3206222502</span>
<span class="go">INFO:    Creating SIF file...</span>
<span class="go">[=====================================================================] 100 % 0s</span>
<span class="go">Apptainer&gt;</span>
</pre></div>
</div>
</section>
<section id="id31">
<h4>Keywords<a class="headerlink" href="#id31" title="Link to this heading"></a></h4>
<p>In a definition file, the <code class="docutils literal notranslate"><span class="pre">docker-archive</span></code> bootstrap agent requires the path
to the tar file containing the image to be specified with the <code class="docutils literal notranslate"><span class="pre">From:</span></code> keyword.</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: docker-archive
<span class="k">From</span>: &lt;path-to-tar-file&gt;
</pre></div>
</div>
</section>
</section>
<section id="scratch-bootstrap-agent">
<span id="scratch-agent"></span><h3><code class="docutils literal notranslate"><span class="pre">scratch</span></code> bootstrap agent<a class="headerlink" href="#scratch-bootstrap-agent" title="Link to this heading"></a></h3>
<p>The scratch bootstrap agent allows you to start from a completely empty
container. You are then responsible for adding any and all executables,
libraries etc. that are required. Starting with a scratch container can
be useful when you are aiming to minimize container size, and have a
simple application / static binaries.</p>
<section id="id32">
<h4>Overview<a class="headerlink" href="#id32" title="Link to this heading"></a></h4>
<p>A minimal container providing a shell can be created by copying the
<code class="docutils literal notranslate"><span class="pre">busybox</span></code> static binary into an empty scratch container:</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: scratch

<span class="gh">%setup</span>
<span class="w">    </span><span class="c1"># Runs on host - fetch static busybox binary</span>
<span class="w">    </span>curl<span class="w"> </span>-o<span class="w"> </span>/tmp/busybox<span class="w"> </span>https://www.busybox.net/downloads/binaries/1.31.0-i686-uclibc/busybox
<span class="w">    </span><span class="c1"># It needs to be executable</span>
<span class="w">    </span>chmod<span class="w"> </span>+x<span class="w"> </span>/tmp/busybox

<span class="gh">%files</span>
<span class="w">    </span><span class="c1"># Copy from host into empty container</span>
<span class="w">    </span>/tmp/busybox<span class="w"> </span>/bin/sh

<span class="gh">%runscript</span>
<span class="w">   </span>/bin/sh
</pre></div>
</div>
<p>The resulting container provides a shell, and is 696KiB in size:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ls -lah scratch.sif
-rwxr-xr-x. 1 dave dave 696K May 28 13:29 scratch.sif

$ apptainer run scratch.sif
WARNING: passwd file doesn&#39;t exist in container, not updating
WARNING: group file doesn&#39;t exist in container, not updating
Apptainer&gt; echo &quot;Hello from a 696KiB container&quot;
Hello from a 696KiB container
</pre></div>
</div>
</section>
<section id="id33">
<h4>Keywords<a class="headerlink" href="#id33" title="Link to this heading"></a></h4>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">Bootstrap</span>: scratch
</pre></div>
</div>
<p>There are no additional keywords for the scratch bootstrap agent.</p>
</section>
<section id="id34">
<h4>Notes<a class="headerlink" href="#id34" title="Link to this heading"></a></h4>
<p>When building a container as an unprivileged user using this bootstrap,
not all of the fakeroot modes work well.  See
<a class="reference internal" href="fakeroot.html#build"><span class="std std-ref">Building container images</span></a> for details.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="contributing.html" class="btn btn-neutral float-left" title="Contributing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cli.html" class="btn btn-neutral float-right" title="Command Line Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
    <br>
    &copy; Contributors to the Apptainer project, established as Apptainer a Series of LF Projects LLC
    <br>
    &copy; 2017-2022, Sylabs Inc


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>