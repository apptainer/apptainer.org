<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quick Start &mdash; Apptainer User Guide main documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/js/ga.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Security in Apptainer" href="security.html" />
    <link rel="prev" title="Introduction to Apptainer" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Apptainer User Guide
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                main
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to Apptainer</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#quick-installation">Quick Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overview-of-the-apptainer-interface">Overview of the Apptainer Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#downloading-images">Downloading images</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interact-with-images">Interact with images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#shell">Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="#executing-commands">Executing Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-a-container">Running a container</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#arguments-to-run">Arguments to <code class="docutils literal notranslate"><span class="pre">run</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-files">Working with Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-images-from-scratch">Build images from scratch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sandbox-directories">Sandbox Directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#converting-images-from-one-format-to-another">Converting images from one format to another</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apptainer-definition-files">Apptainer Definition Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#apptainer-on-a-shared-resource">Apptainer on a shared resource</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security in Apptainer</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_a_container.html">Build a container</a></li>
<li class="toctree-l1"><a class="reference internal" href="definition_files.html">The Definition File</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_env.html">Build Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="fakeroot.html">Fakeroot feature</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="signNverify.html">Sign and Verify</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_commands.html">Key management commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="encryption.html">Encrypted Containers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="endpoint.html">Remote Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="library_api.html">Library API Registries</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bind_paths_and_mounts.html">Bind Paths and Mounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent_overlays.html">Persistent Overlays</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_services.html">Running Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_and_metadata.html">Environment and Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="security_options.html">Security Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Network Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="cgroups.html">Limiting Container Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkpoint.html">Application Checkpointing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="singularity_compatibility.html">Singularity Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker_and_oci.html">Support for Docker / OCI Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="oci_runtime.html">OCI Runtime Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpi.html">Apptainer and MPI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu.html">GPU Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Licenses</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Apptainer User Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Quick Start</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apptainer/apptainer-userdocs/blob/master/quick_start.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quick-start">
<span id="id1"></span><h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this heading"></a></h1>
<p id="sec-quickstart">This guide is intended for running Apptainer on a computer where you
will install Apptainer yourself.</p>
<p>If you need to request an installation on your shared resource, see the
<a class="reference internal" href="#installation-request"><span class="std std-ref">requesting an installation section</span></a> for
information to send to your system administrator.</p>
<p>For any additional help or support contact the Apptainer Community:
<a class="reference external" href="https://apptainer.org/help">https://apptainer.org/help</a></p>
<section id="quick-installation">
<span id="id2"></span><h2>Quick Installation<a class="headerlink" href="#quick-installation" title="Permalink to this heading"></a></h2>
<p>You will need a Linux system to run Apptainer natively and it’s easiest
to install if you have root access.</p>
<p>To install from source, follow the instructions in the <a class="reference external" href="https://github.com/apptainer/apptainer/blob/main/INSTALL.md">INSTALL.md</a>
on github.
Other installation options,
including installing from a pre-built RPM,
building an RPM or Debian package,
installing Apptainer without root privileges,
and using Apptainer on Mac and Windows machines
are discussed in the <a class="reference external" href="https://apptainer.org/docs/admin/main/installation.html">installation section of the admin guide</a>.</p>
</section>
<section id="overview-of-the-apptainer-interface">
<h2>Overview of the Apptainer Interface<a class="headerlink" href="#overview-of-the-apptainer-interface" title="Permalink to this heading"></a></h2>
<p>Apptainer’s <a class="reference internal" href="cli.html#cli"><span class="std std-ref">command line interface</span></a> allows you to build
and interact with containers transparently. You can run programs inside
a container as if they were running on your host system. You can easily
redirect IO, use pipes, pass arguments, and access files, sockets, and
ports on the host system from within a container.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">help</span></code> command gives an overview of Apptainer options and
subcommands as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer help

Linux container platform optimized for High Performance Computing (HPC) and
Enterprise Performance Computing (EPC)

Usage:
  apptainer [global options...]

Description:
  Apptainer containers provide an application virtualization layer enabling
  mobility of compute via both application and environment portability. With
  Apptainer one is capable of building a root file system that runs on any
  other Linux system where Apptainer is installed.

Options:
  -d, --debug     print debugging information (highest verbosity)
  -h, --help      help for apptainer
      --nocolor   print without color output (default False)
  -q, --quiet     suppress normal output
  -s, --silent    only print errors
  -v, --verbose   print additional information

Available Commands:
  build       Build an Apptainer image
  cache       Manage the local cache
  capability  Manage Linux capabilities for users and groups
  exec        Run a command within a container
  help        Help about any command
  inspect     Show metadata for an image
  instance    Manage containers running as services
  key         Manage OpenPGP keys
  oci         Manage OCI containers
  plugin      Manage apptainer plugins
  pull        Pull an image from a URI
  push        Upload image to the provided URI
  remote      Manage apptainer remote endpoints
  run         Run the user-defined default command within a container
  run-help    Show the user-defined help for an image
  search      Search a Container Library for images
  shell       Run a shell within a container
  sif         siftool is a program for Singularity Image Format (SIF) file manipulation
  sign        Attach a cryptographic signature to an image
  test        Run the user-defined tests within a container
  verify      Verify cryptographic signatures attached to an image
  version     Show the version for Apptainer

Examples:
  $ apptainer help &lt;command&gt; [&lt;subcommand&gt;]
  $ apptainer help build
  $ apptainer help instance start


For additional help or support, please visit https://www.apptainer.org/docs/
</pre></div>
</div>
<p>Information about subcommand can also be viewed with the <code class="docutils literal notranslate"><span class="pre">help</span></code>
command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer help verify
Verify cryptographic signatures attached to an image

Usage:
  apptainer verify [verify options...] &lt;image path&gt;

Description:
  The verify command allows a user to verify cryptographic signatures on SIF
  container files. There may be multiple signatures for data objects and
  multiple data objects signed. By default the command searches for the primary
  partition signature. If found, a list of all verification blocks applied on
  the primary partition is gathered so that data integrity (hashing) and
  signature verification is done for all those blocks.

Options:
  -a, --all               verify all objects
  -g, --group-id uint32   verify objects with the specified group ID
  -h, --help              help for verify
  -j, --json              output json
      --legacy-insecure   enable verification of (insecure) legacy signatures
  -l, --local             only verify with local keys
  -i, --sif-id uint32     verify object with the specified ID
  -u, --url string        key server URL (default &quot;https://keys.openpgp.org&quot;)


Examples:
  $ apptainer verify container.sif


For additional help or support, please visit https://www.apptainer.org/docs/
</pre></div>
</div>
<p>Apptainer uses positional syntax (i.e. the order of commands and
options matters). Global options affecting the behavior of all commands
follow the main <code class="docutils literal notranslate"><span class="pre">apptainer</span></code> command. Then sub commands are followed
by their options and arguments.</p>
<p>For example, to pass the <code class="docutils literal notranslate"><span class="pre">--debug</span></code> option to the main <code class="docutils literal notranslate"><span class="pre">apptainer</span></code>
command and run Apptainer with debugging messages on:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer --debug run docker://alpine
</pre></div>
</div>
<p>To pass the <code class="docutils literal notranslate"><span class="pre">--containall</span></code> option to the <code class="docutils literal notranslate"><span class="pre">run</span></code> command and run a
Apptainer image in an isolated manner:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer run --containall docker://alpine
</pre></div>
</div>
<p>Apptainer has the concept of command groups. For
instance, to list Linux capabilities for a particular user, you would
use the <code class="docutils literal notranslate"><span class="pre">list</span></code> command in the <code class="docutils literal notranslate"><span class="pre">capability</span></code> command group like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer capability list dave
</pre></div>
</div>
<p>Container authors might also write help docs specific to a container or
for an internal module called an <code class="docutils literal notranslate"><span class="pre">app</span></code>. If those help docs exist for a
particular container, you can view them like so.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer inspect --helpfile container.sif  # See the container&#39;s help, if provided

$ apptainer inspect --helpfile --app=foo foo.sif  # See the help for foo, if provided
</pre></div>
</div>
</section>
<section id="downloading-images">
<h2>Downloading images<a class="headerlink" href="#downloading-images" title="Permalink to this heading"></a></h2>
<p>You can use the <a class="reference external" href="cli/apptainer_pull.html">pull</a>
and <a class="reference external" href="cli/apptainer_build.html">build</a>
commands to download images from an external resource like an OCI registry.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">pull</span></code> with the <code class="docutils literal notranslate"><span class="pre">docker://</span></code> uri to reference OCI
images served from an OCI registry. In this case <code class="docutils literal notranslate"><span class="pre">pull</span></code> does not just
download an image file. OCI images are stored in layers, so <code class="docutils literal notranslate"><span class="pre">pull</span></code>
must also combine those layers into a usable Apptainer file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer pull docker://alpine
</pre></div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">build</span></code> command to download pre-built images from
an external resource. When using <code class="docutils literal notranslate"><span class="pre">build</span></code> you must specify a name for
your container like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer build alpine.sif docker://alpine
</pre></div>
</div>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">pull</span></code>, <code class="docutils literal notranslate"><span class="pre">build</span></code> will convert your image to the latest
Apptainer image format after downloading it. <code class="docutils literal notranslate"><span class="pre">build</span></code> is like a
“Swiss Army knife” for container creation. In addition to downloading
images, you can use <code class="docutils literal notranslate"><span class="pre">build</span></code> to create images from other images or from
scratch using a <a class="reference internal" href="definition_files.html#definition-files"><span class="std std-ref">definition file</span></a>. You can also
use <code class="docutils literal notranslate"><span class="pre">build</span></code> to convert an image between the container formats
supported by Apptainer. To see a comparison of Apptainer
definition file with Dockerfile, please see: <a class="reference internal" href="docker_and_oci.html#sec-deffile-vs-dockerfile"><span class="std std-ref">this section</span></a>.</p>
</section>
<section id="interact-with-images">
<span id="cowimage"></span><h2>Interact with images<a class="headerlink" href="#interact-with-images" title="Permalink to this heading"></a></h2>
<p>You can interact with images in several ways, each of which can accept
image URIs in addition to a local image path.</p>
<p>For demonstration, we will use a <code class="docutils literal notranslate"><span class="pre">lolcow_latest.sif</span></code> image that can be
pulled from ghcr.io:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer pull docker://ghcr.io/apptainer/lolcow
</pre></div>
</div>
<section id="shell">
<h3>Shell<a class="headerlink" href="#shell" title="Permalink to this heading"></a></h3>
<p>The <a class="reference external" href="cli/apptainer_shell.html">shell</a>
command allows you to spawn a new shell within your container and
interact with it as though it were a small virtual machine.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer shell lolcow_latest.sif

Apptainer lolcow_latest.sif:~&gt;
</pre></div>
</div>
<p>The change in prompt indicates that you have entered the container
(though you should not rely on that to determine whether you are in
container or not).</p>
<p>Once inside of an Apptainer container, you are the same user as you
are on the host system.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Apptainer</span> <span class="n">lolcow_latest</span><span class="o">.</span><span class="n">sif</span><span class="p">:</span><span class="o">~&gt;</span> <span class="n">whoami</span>
<span class="n">david</span>

<span class="n">Apptainer</span> <span class="n">lolcow_latest</span><span class="o">.</span><span class="n">sif</span><span class="p">:</span><span class="o">~&gt;</span> <span class="nb">id</span>
<span class="n">uid</span><span class="o">=</span><span class="mi">1000</span><span class="p">(</span><span class="n">david</span><span class="p">)</span> <span class="n">gid</span><span class="o">=</span><span class="mi">1000</span><span class="p">(</span><span class="n">david</span><span class="p">)</span> <span class="n">groups</span><span class="o">=</span><span class="mi">1000</span><span class="p">(</span><span class="n">david</span><span class="p">),</span><span class="mi">65534</span><span class="p">(</span><span class="n">nfsnobody</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">shell</span></code> also works with the <code class="docutils literal notranslate"><span class="pre">docker://</span></code>, <code class="docutils literal notranslate"><span class="pre">oras://</span></code>, <code class="docutils literal notranslate"><span class="pre">library://</span></code>,  and
<code class="docutils literal notranslate"><span class="pre">shub://</span></code> URIs. This creates an ephemeral container that disappears
when the shell is exited.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer shell docker://ghcr.io/apptainer/lolcow
</pre></div>
</div>
</section>
<section id="executing-commands">
<h3>Executing Commands<a class="headerlink" href="#executing-commands" title="Permalink to this heading"></a></h3>
<p>The <a class="reference external" href="cli/apptainer_exec.html">exec</a>
command allows you to execute a custom command within a container by
specifying the image file. For instance, to execute the <code class="docutils literal notranslate"><span class="pre">cowsay</span></code>
program within the <code class="docutils literal notranslate"><span class="pre">lolcow_latest.sif</span></code> container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer exec lolcow_latest.sif cowsay moo
 _____
&lt; moo &gt;
 -----
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">exec</span></code> also works with the <code class="docutils literal notranslate"><span class="pre">docker://</span></code>, <code class="docutils literal notranslate"><span class="pre">oras://</span></code>, <code class="docutils literal notranslate"><span class="pre">library://</span></code>, and
<code class="docutils literal notranslate"><span class="pre">shub://</span></code> URIs. This creates an ephemeral container that executes a
command and disappears.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer exec docker://ghcr.io/apptainer/lolcow cowsay &quot;Fresh from the internet&quot;
 _________________________
&lt; Fresh from the internet &gt;
 -------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</pre></div>
</div>
</section>
<section id="running-a-container">
<span id="runcontainer"></span><h3>Running a container<a class="headerlink" href="#running-a-container" title="Permalink to this heading"></a></h3>
<p>Apptainer containers contain <a class="reference internal" href="definition_files.html#runscript"><span class="std std-ref">runscripts</span></a>. These
are user defined scripts that define the actions a container should
perform when someone runs it. The runscript can be triggered with the
<a class="reference external" href="cli/apptainer_run.html">run</a>
command, or simply by calling the container as though it were an
executable.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer run lolcow_latest.sif
______________________________
&lt; Mon Aug 16 13:01:55 CDT 2021 &gt;
 ------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||

$ ./lolcow_latest.sif
______________________________
&lt; Mon Aug 16 13:12:50 CDT 2021 &gt;
 ------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">run</span></code> also works with the <code class="docutils literal notranslate"><span class="pre">docker://</span></code>, <code class="docutils literal notranslate"><span class="pre">oras://</span></code>, <code class="docutils literal notranslate"><span class="pre">library://</span></code>, and
<code class="docutils literal notranslate"><span class="pre">shub://</span></code> URIs. This creates an ephemeral container that runs and then
disappears.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer run docker://ghcr.io/apptainer/lolcow
______________________________
&lt; Mon Aug 16 13:12:33 CDT 2021 &gt;
 ------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</pre></div>
</div>
<section id="arguments-to-run">
<h4>Arguments to <code class="docutils literal notranslate"><span class="pre">run</span></code><a class="headerlink" href="#arguments-to-run" title="Permalink to this heading"></a></h4>
<p>You can pass arguments to the runscript of a container, if it accepts
them. For example, the default runscript of the <code class="docutils literal notranslate"><span class="pre">docker://alpine</span></code>
container passes any arguments to a shell. We can ask the container
to run <code class="docutils literal notranslate"><span class="pre">echo</span></code> command in this shell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer run docker://alpine echo &quot;hello&quot;

hello
</pre></div>
</div>
<p>Because Apptainer runscripts are evaluated shell scripts
arguments can behave slightly differently than in Docker/OCI
runtimes, if they contain shell code that may be evaluated. To
replicate Docker/OCI behaviour you may need additional escaping or
quoting of arguments.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -it --rm alpine echo &quot;\$HOSTNAME&quot;
$HOSTNAME

$ apptainer run docker://alpine echo &quot;\$HOSTNAME&quot;
p700

$ apptainer run docker://alpine echo &quot;\\\$HOSTNAME&quot;
$HOSTNAME
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">exec</span></code> command replicates the Docker/OCI behavior as it calls
the specified executable directly.</p>
</section>
</section>
</section>
<section id="working-with-files">
<h2>Working with Files<a class="headerlink" href="#working-with-files" title="Permalink to this heading"></a></h2>
<p>Files on the host are reachable from within the container.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ echo &quot;Hello from inside the container&quot; &gt; $HOME/hostfile.txt

$ apptainer exec lolcow_latest.sif cat $HOME/hostfile.txt

Hello from inside the container
</pre></div>
</div>
<p>This example works because <code class="docutils literal notranslate"><span class="pre">hostfile.txt</span></code> exists in the user’s home
directory. By default Apptainer bind mounts <code class="docutils literal notranslate"><span class="pre">/home/$USER</span></code>,
<code class="docutils literal notranslate"><span class="pre">/tmp</span></code>, and <code class="docutils literal notranslate"><span class="pre">$PWD</span></code> into your container at runtime.</p>
<p>You can specify additional directories to bind mount into your container
with the <code class="docutils literal notranslate"><span class="pre">--bind</span></code> option. In this example, the <code class="docutils literal notranslate"><span class="pre">data</span></code> directory on
the host system is bind mounted to the <code class="docutils literal notranslate"><span class="pre">/mnt</span></code> directory inside the
container.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ echo &quot;Drink milk (and never eat hamburgers).&quot; &gt; /data/cow_advice.txt

$ apptainer exec --bind /data:/mnt lolcow_latest.sif cat /mnt/cow_advice.txt
Drink milk (and never eat hamburgers).
</pre></div>
</div>
<p>Pipes and redirects also work with Apptainer commands just like they
do with normal Linux commands.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cat /data/cow_advice.txt | apptainer exec lolcow_latest.sif cowsay
 ________________________________________
&lt; Drink milk (and never eat hamburgers). &gt;
 ----------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</pre></div>
</div>
</section>
<section id="build-images-from-scratch">
<span id="id4"></span><h2>Build images from scratch<a class="headerlink" href="#build-images-from-scratch" title="Permalink to this heading"></a></h2>
<p id="sec-buildimagesfromscratch">Apptainer produces immutable images in the
Singularity Image File (SIF) format. This ensures reproducible and
verifiable images and allows for many extra benefits such as the ability
to sign and verify your containers.</p>
<p>However, during testing and debugging you may want an image format that
is writable. This way you can <code class="docutils literal notranslate"><span class="pre">shell</span></code> into the image and install
software and dependencies until you are satisfied that your container
will fulfill your needs. For these scenarios, Apptainer also
supports the <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> format (which is really just a directory).</p>
<section id="sandbox-directories">
<h3>Sandbox Directories<a class="headerlink" href="#sandbox-directories" title="Permalink to this heading"></a></h3>
<p>To build into a <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> (container in a directory) use the <code class="docutils literal notranslate"><span class="pre">build</span>
<span class="pre">--sandbox</span></code> command and option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer build --sandbox ubuntu/ docker://ubuntu
</pre></div>
</div>
<p>This command creates a directory called <code class="docutils literal notranslate"><span class="pre">ubuntu/</span></code> with an entire
Ubuntu Operating System and some Apptainer metadata in your current
working directory.</p>
<p>You can use commands like <code class="docutils literal notranslate"><span class="pre">shell</span></code>, <code class="docutils literal notranslate"><span class="pre">exec</span></code> , and <code class="docutils literal notranslate"><span class="pre">run</span></code> with this
directory just as you would with an Apptainer image. If you pass the
<code class="docutils literal notranslate"><span class="pre">--writable</span></code> option when you use your container you can also write
files within the sandbox directory (provided you have the permissions to
do so).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer exec --writable ubuntu touch /foo

$ apptainer exec ubuntu/ ls /foo
/foo
</pre></div>
</div>
</section>
<section id="converting-images-from-one-format-to-another">
<h3>Converting images from one format to another<a class="headerlink" href="#converting-images-from-one-format-to-another" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">build</span></code> command allows you to build a container from an existing
container. This means that you can use it to convert a container from
one format to another. For instance, if you have already created a
sandbox (directory) and want to convert it to the default immutable
image format (squashfs) you can do so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer build new-sif sandbox
</pre></div>
</div>
<p>Doing so may break reproducibility if you have altered your sandbox
outside of the context of a definition file, so you are advised to
exercise care.</p>
</section>
<section id="apptainer-definition-files">
<h3>Apptainer Definition Files<a class="headerlink" href="#apptainer-definition-files" title="Permalink to this heading"></a></h3>
<p>For a reproducible, verifiable and production-quality container you
should build a SIF file using an Apptainer definition file. This also
makes it easy to add files, environment variables, and install custom
software. You can start with base images from Docker Hub and use
images directly from official repositories such as Ubuntu, Debian,
CentOS, Arch, and BusyBox.</p>
<p>A definition file has a header and a body. The header determines the
base container to begin with, and the body is further divided into
sections that perform things like software installation, environment
setup, and copying files into the container from host system, etc.</p>
<p>Here is an example of a definition file:</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">BootStrap</span>: docker
<span class="k">From</span>: ubuntu:<span class="m">20.04</span>

<span class="gh">%post</span>
    apt-get -y update
    apt-get -y install cowsay lolcat

<span class="gh">%environment</span>
    <span class="nb">export</span> <span class="nv">LC_ALL</span><span class="o">=</span>C
    <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/games:<span class="nv">$PATH</span>

<span class="gh">%runscript</span>
    date <span class="p">|</span> cowsay <span class="p">|</span> lolcat

<span class="gh">%labels</span>
    Author Alice
</pre></div>
</div>
<p>To build a container from this definition file (assuming it is a file
named lolcow.def), you would call build like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer build lolcow.sif lolcow.def
</pre></div>
</div>
<p>In this example, the header tells Apptainer to use a base Ubuntu
16.04 image from the default OCI registry.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">%post</span></code> section executes within the container at build time
after the base OS has been installed. The <code class="docutils literal notranslate"><span class="pre">%post</span></code> section is
therefore the place to perform installations of new applications.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">%environment</span></code> section defines some environment variables that
will be available to the container at runtime.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">%runscript</span></code> section defines actions for the container to take
when it is executed.</p></li>
<li><p>And finally, the <code class="docutils literal notranslate"><span class="pre">%labels</span></code> section allows for custom metadata to be
added to the container.</p></li>
</ul>
<p>This is a very small example of the things that you can do with a
<a class="reference internal" href="definition_files.html#definition-files"><span class="std std-ref">definition file</span></a>. You can also use an
existing container on your host system as a base.</p>
<p>This quickstart document just scratches the surface of all of the things
you can do with Apptainer!</p>
<p>If you need additional help or support, see <a class="reference external" href="https://apptainer.org/help">https://apptainer.org/help</a>.</p>
<section id="apptainer-on-a-shared-resource">
<span id="installation-request"></span><h4>Apptainer on a shared resource<a class="headerlink" href="#apptainer-on-a-shared-resource" title="Permalink to this heading"></a></h4>
<p>Perhaps you are a user who wants a few talking points and background to
share with your administrator. Or maybe you are an administrator who
needs to decide whether to install Apptainer.</p>
<p>This document, and the accompanying administrator documentation provides
answers to many common questions.</p>
<p>If you need to request an installation you may decide to draft a message
similar to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Dear shared resource administrator,

We are interested in having Apptainer (https://apptainer.org)
installed on our shared resource. Apptainer containers will allow us to
build encapsulated environments, meaning that our work is reproducible and
we are empowered to choose all dependencies including libraries, operating
system, and custom software. Apptainer is already in use on many of the
top HPC centers around the world. Examples include:

    Texas Advanced Computing Center
    GSI Helmholtz Center for Heavy Ion Research
    Oak Ridge Leadership Computing Facility
    Purdue University
    National Institutes of Health HPC
    UFIT Research Computing at the University of Florida
    San Diego Supercomputing Center
    Lawrence Berkeley National Laboratory
    University of Chicago
    McGill HPC Centre/Calcul Québec
    Barcelona Supercomputing Center
    Sandia National Lab
    Argonne National Lab

Importantly, it has a vibrant team of developers, scientists, and HPC
administrators that invest heavily in the security and development of the
software, and are quick to respond to the needs of the community. To help
learn more about Apptainer, I thought these items might be of interest:

    - Security: A discussion of security concerns is discussed at
    https://apptainer.org/docs/admin/main/admin_quickstart.html

    - Installation:
    https://apptainer.org/docs/admin/main/installation.html

If you have questions about any of the above, you can contact one of the
sources listed at https://apptainer.org/help. I can do my best
to facilitate this interaction if help is needed.

Thank you kindly for considering this request!

Best,

User
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction to Apptainer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="security.html" class="btn btn-neutral float-right" title="Security in Apptainer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
    <br>
    &copy; Contributors to the Apptainer project, established as Apptainer a Series of LF Projects LLC
    <br>
    &copy; 2017-2022, Sylabs Inc


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>