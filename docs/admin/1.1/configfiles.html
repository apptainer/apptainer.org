<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apptainer Configuration Files &mdash; Apptainer Admin Guide 1.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="User Namespaces &amp; Fakeroot" href="user_namespace.html" />
    <link rel="prev" title="Migrating From Singularity" href="singularity_migration.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Apptainer Admin Guide
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="admin_quickstart.html">Admin Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installing Apptainer</a></li>
<li class="toctree-l1"><a class="reference internal" href="singularity_migration.html">Migrating from Singularity</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#apptainer-conf">apptainer.conf</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setuid-and-capabilities">Setuid and Capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loop-devices">Loop Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#namespace-options">Namespace Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-files">Configuration Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#session-directory-and-system-mounts">Session Directory and System Mounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bind-mount-management">Bind Mount Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limiting-container-execution">Limiting Container Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#networking-options">Networking Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gpu-options">GPU Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supplemental-filesystems">Supplemental Filesystems</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cni-configuration-and-plugins">CNI Configuration and Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="#external-binaries">External Binaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#concurrent-downloads">Concurrent Downloads</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cgroups-options">Cgroups Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating-configuration-options">Updating Configuration Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cgroups-toml">cgroups.toml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#limiting-memory">Limiting memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limiting-cpu">Limiting CPU</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limiting-io">Limiting IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-limits">Other limits</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ecl-toml">ecl.toml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#managing-ecl-public-keys">Managing ECL public keys</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#gpu-library-configuration">GPU Library Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nvidia-gpus-cuda">NVIDIA GPUs / CUDA</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#experimental-nvidia-container-cli-support">Experimental nvidia-container-cli Support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#amd-radeon-gpus-rocm">AMD Radeon GPUs / ROCm</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gpu-liblist-format">GPU liblist format</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#capability-json">capability.json</a></li>
<li class="toctree-l2"><a class="reference internal" href="#seccomp-profiles">seccomp-profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#remote-yaml">remote.yaml</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#remote-endpoints">Remote Endpoints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#exclusive-endpoint">Exclusive Endpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="#insecure-http-endpoints">Insecure (HTTP) Endpoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="#restoring-pre-apptainer-library-behavior">Restoring pre-Apptainer library behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="#additional-information">Additional Information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#keyserver-configuration">Keyserver Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dmtcp-conf-yaml">dmtcp-conf.yaml</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user_namespace.html">User Namespaces &amp; Fakeroot</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security in Apptainer</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Apptainer Admin Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Apptainer Configuration Files</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apptainer/apptainer-admindocs/blob/master/configfiles.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="apptainer-configuration-files">
<span id="apptainer-configfiles"></span><h1>Apptainer Configuration Files<a class="headerlink" href="#apptainer-configuration-files" title="Permalink to this heading"></a></h1>
<p>As an Apptainer Administrator, you will have access to various
configuration files, that will let you manage container resources, set
security restrictions and configure network options etc, when
installing Apptainer across the system. All of these files can be
found in <code class="docutils literal notranslate"><span class="pre">/usr/local/etc/apptainer</span></code> by default for installations
from source (though the location may differ based on options passed
during the installation). For installations from RPM or Deb packages
you will find the configuration files in <code class="docutils literal notranslate"><span class="pre">/etc/apptainer</span></code>. This
section will describe the configuration files and the various
parameters contained by them.</p>
<section id="apptainer-conf">
<h2>apptainer.conf<a class="headerlink" href="#apptainer-conf" title="Permalink to this heading"></a></h2>
<p>Most of the configuration options are set using the file
<code class="docutils literal notranslate"><span class="pre">apptainer.conf</span></code> that defines the global configuration for
Apptainer across the entire system. Using this file, system
administrators can influence the behavior of Apptainer and
restrict the functionality that users can access. As a security
measure, for <code class="docutils literal notranslate"><span class="pre">setuid</span></code> installations of Apptainer,
<code class="docutils literal notranslate"><span class="pre">apptainer.conf</span></code> must be owned by root and must not be writable by
users or Apptainer will refuse to run. This is not the case for
<code class="docutils literal notranslate"><span class="pre">non-setuid</span></code> installations that will only ever execute with user
privilege and thus do not require such limitations.</p>
<p>The options set via <code class="docutils literal notranslate"><span class="pre">apptainer.conf</span></code> are listed below. Options are
grouped together based on relevance. The actual order of options within
<code class="docutils literal notranslate"><span class="pre">apptainer.conf</span></code> may differ.</p>
<section id="setuid-and-capabilities">
<h3>Setuid and Capabilities<a class="headerlink" href="#setuid-and-capabilities" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">setuid</span></code>: To use all features of Apptainer containers,
Apptainer will need to have access to some privileged system calls.
Apptainer achieves this by using a helper binary with the <code class="docutils literal notranslate"><span class="pre">setuid</span></code>
bit enabled. The <code class="docutils literal notranslate"><span class="pre">allow-setuid</span></code> option lets you enable/disable users
ability to utilize these binaries within Apptainer. By default, it
is set to “yes”, but that only makes a difference if the suid helper
binary is installed, which is not the case by default (see the
<a class="reference internal" href="installation.html#installation"><span class="std std-ref">Installation section</span></a>).</p>
<p><code class="docutils literal notranslate"><span class="pre">root</span> <span class="pre">default</span> <span class="pre">capabilities</span></code>: Apptainer allows the specification of
capabilities kept by the root user when running a container in
setuid (also known as SUID) mode.
Options include:</p>
<ul class="simple">
<li><p>full: all capabilities are maintained, this gives the same behavior
as the <code class="docutils literal notranslate"><span class="pre">--keep-privs</span></code> option.</p></li>
<li><p>file: only capabilities granted in
<code class="docutils literal notranslate"><span class="pre">/usr/local/etc/apptainer/capabilities/user.root</span></code> are maintained.</p></li>
<li><p>no: no capabilities are maintained, this gives the same behavior as
the <code class="docutils literal notranslate"><span class="pre">--no-privs</span></code> option.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The root user can manage the capabilities granted to individual
containers when they are launched through the <code class="docutils literal notranslate"><span class="pre">--add-caps</span></code> and
<code class="docutils literal notranslate"><span class="pre">drop-caps</span></code> flags. Please see <a class="reference external" href="https://apptainer.org/docs/user/1.1/security_options.html#linux-capabilities">Linux Capabilities</a>
in the user guide for more information.</p>
</div>
</section>
<section id="loop-devices">
<h3>Loop Devices<a class="headerlink" href="#loop-devices" title="Permalink to this heading"></a></h3>
<p>Apptainer in SUID mode uses loop devices to facilitate the mounting of
container file systems from SIF and other images.</p>
<p><code class="docutils literal notranslate"><span class="pre">max</span> <span class="pre">loop</span> <span class="pre">devices</span></code>: This option allows an admin to limit the total
number of loop devices Apptainer will consume at a given time.</p>
<p><code class="docutils literal notranslate"><span class="pre">shared</span> <span class="pre">loop</span> <span class="pre">devices</span></code>: This allows containers running the same image
to share a single loop device. This minimizes loop device usage and
helps optimize kernel cache usage. Enabling this feature can be
particularly useful for MPI jobs.</p>
</section>
<section id="namespace-options">
<h3>Namespace Options<a class="headerlink" href="#namespace-options" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">pid</span> <span class="pre">ns</span></code>: This option determines if users can leverage the PID
namespace when running their containers through the <code class="docutils literal notranslate"><span class="pre">--pid</span></code> flag.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Using the PID namespace can confuse the process tracking of some
resource managers, as well as some MPI implementations.</p>
</div>
</section>
<section id="configuration-files">
<h3>Configuration Files<a class="headerlink" href="#configuration-files" title="Permalink to this heading"></a></h3>
<p>Apptainer can automatically create or modify several system files
within containers to ease usage.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These options will have no effect if the file does not exist within
the container, or overlay or underlay support are enabled.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">config</span> <span class="pre">passwd</span></code>: This option determines if Apptainer should
automatically append an entry to <code class="docutils literal notranslate"><span class="pre">/etc/passwd</span></code> for the user running
the container.</p>
<p><code class="docutils literal notranslate"><span class="pre">config</span> <span class="pre">group</span></code>: This option determines if Apptainer should
automatically append the calling user’s group entries to the containers
<code class="docutils literal notranslate"><span class="pre">/etc/group</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">config</span> <span class="pre">resolv_conf</span></code>: This option determines if Apptainer should
automatically bind the host’s <code class="docutils literal notranslate"><span class="pre">/etc/resolv.conf</span></code> within the container.</p>
</section>
<section id="session-directory-and-system-mounts">
<h3>Session Directory and System Mounts<a class="headerlink" href="#session-directory-and-system-mounts" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">sessiondir</span> <span class="pre">max</span> <span class="pre">size</span></code>: In order for the Apptainer runtime to run a
container it needs to create a temporary in-memory <code class="docutils literal notranslate"><span class="pre">sessiondir</span></code> as a
location to assemble various components of the container, including
mounting filesystems over the base image. This option specifies how
large the default <code class="docutils literal notranslate"><span class="pre">sessiondir</span></code> should be (in MB). It should be set
large enough to accommodate files that will be created in a
<code class="docutils literal notranslate"><span class="pre">--writable-tmpfs</span></code>, or the empty <code class="docutils literal notranslate"><span class="pre">/tmp</span></code> and other paths provided
when <code class="docutils literal notranslate"><span class="pre">--contain</span></code> is used.</p>
<p><code class="docutils literal notranslate"><span class="pre">mount</span> <span class="pre">proc</span></code>: This option determines if Apptainer should
automatically bind mount <code class="docutils literal notranslate"><span class="pre">/proc</span></code> within the container.</p>
<p><code class="docutils literal notranslate"><span class="pre">mount</span> <span class="pre">sys</span></code>: This option determines if Apptainer should
automatically bind mount <code class="docutils literal notranslate"><span class="pre">/sys</span></code> within the container.</p>
<p><code class="docutils literal notranslate"><span class="pre">mount</span> <span class="pre">dev</span></code>: Should be set to “YES”, if you want Apptainer to
automatically bind mount a complete <code class="docutils literal notranslate"><span class="pre">/dev</span></code> tree within the container.
If set to <code class="docutils literal notranslate"><span class="pre">minimal</span></code>, then only <code class="docutils literal notranslate"><span class="pre">/dev/null</span></code>, <code class="docutils literal notranslate"><span class="pre">/dev/zero</span></code>,
<code class="docutils literal notranslate"><span class="pre">/dev/random</span></code>, <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code>, and <code class="docutils literal notranslate"><span class="pre">/dev/shm</span></code> will be included.</p>
<p><code class="docutils literal notranslate"><span class="pre">mount</span> <span class="pre">devpts</span></code>: This option determines if Apptainer will mount a
new instance of <code class="docutils literal notranslate"><span class="pre">devpts</span></code> when there is a <code class="docutils literal notranslate"><span class="pre">minimal</span></code> <code class="docutils literal notranslate"><span class="pre">/dev</span></code>
directory as explained above, or when the <code class="docutils literal notranslate"><span class="pre">--contain</span></code> option is
passed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This requires either a kernel configured with
<code class="docutils literal notranslate"><span class="pre">CONFIG_DEVPTS_MULTIPLE_INSTANCES=y</span></code>, or a kernel version at or
newer than <code class="docutils literal notranslate"><span class="pre">4.7</span></code>.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">mount</span> <span class="pre">home</span></code>: When this option is enabled, Apptainer will
automatically determine the calling user’s home directory and attempt to
mount it into the container.</p>
<p><code class="docutils literal notranslate"><span class="pre">mount</span> <span class="pre">tmp</span></code>: When this option is enabled, Apptainer will
automatically bind mount <code class="docutils literal notranslate"><span class="pre">/tmp</span></code> and <code class="docutils literal notranslate"><span class="pre">/var/tmp</span></code> into the container
from the host. If the <code class="docutils literal notranslate"><span class="pre">--contain</span></code> option is passed, Apptainer will
create both locations within the <code class="docutils literal notranslate"><span class="pre">sessiondir</span></code> or within the directory
specified by the <code class="docutils literal notranslate"><span class="pre">--workdir</span></code> option if that is passed as well.</p>
<p><code class="docutils literal notranslate"><span class="pre">mount</span> <span class="pre">hostfs</span></code>: This option will cause Apptainer to probe the host
for all mounted filesystems and bind those into containers at runtime.</p>
<p><code class="docutils literal notranslate"><span class="pre">mount</span> <span class="pre">slave</span></code>: Apptainer automatically mounts a handful host
system directories to the container by default. This option determines
if filesystem changes on the host should automatically be propagated to
those directories in the container.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This should be set to <code class="docutils literal notranslate"><span class="pre">yes</span></code> when autofs mounts occurring on the host
system should be reflected up in the container.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">memory</span> <span class="pre">fs</span> <span class="pre">type</span></code>: This option allows admins to choose the temporary
filesystem used by Apptainer. Temporary filesystems are primarily
used for system directories like <code class="docutils literal notranslate"><span class="pre">/dev</span></code> when the host system directory
is not mounted within the container.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For Cray CLE 5 and 6, up to CLE 6.0.UP05, there is an issue (kernel
panic) when Apptainer uses tmpfs, so on affected systems it’s
recommended to set this value to <code class="docutils literal notranslate"><span class="pre">ramfs</span></code> to avoid a kernel panic.</p>
</div>
</section>
<section id="bind-mount-management">
<h3>Bind Mount Management<a class="headerlink" href="#bind-mount-management" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">bind</span> <span class="pre">path</span></code>: This option is used to define a list of files or
directories to automatically be made available when Apptainer runs a
container. In order to successfully mount listed paths the file or
directory must exist within the container, or Apptainer must be
configured with either overlay or underlay support enabled.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This option is ignored when containers are invoked with the
<code class="docutils literal notranslate"><span class="pre">--contain</span></code> option.</p>
</div>
<p>You can define the a bind point where the source and destination are
identical:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bind</span> <span class="n">path</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">localtime</span>
</pre></div>
</div>
<p>Or you can specify different source and destination locations using a
colon:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bind</span> <span class="n">path</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apptainer</span><span class="o">/</span><span class="n">default</span><span class="o">-</span><span class="n">nsswitch</span><span class="o">.</span><span class="n">conf</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nsswitch</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">user</span> <span class="pre">bind</span> <span class="pre">control</span></code>: This allows admins to decide if users can define
bind points at runtime. By Default, this option is set to <code class="docutils literal notranslate"><span class="pre">YES</span></code>, which
means users can specify bind points, scratch and tmp locations.</p>
</section>
<section id="limiting-container-execution">
<h3>Limiting Container Execution<a class="headerlink" href="#limiting-container-execution" title="Permalink to this heading"></a></h3>
<p>There are several ways to limit container execution as an admin listed
below. If stricter controls are required, check out the <a class="reference internal" href="#execution-control-list"><span class="std std-ref">Execution
Control List</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">limit</span> <span class="pre">container</span> <span class="pre">owners</span></code>: This restricts container execution to only
allow containers that are owned by the specified user.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature will only apply when Apptainer is running in SUID
mode and the user is non-root. By default this is set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">limit</span> <span class="pre">container</span> <span class="pre">groups</span></code>: This restricts container execution to only
allow containers that are owned by the specified group.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature will only apply when Apptainer is running in SUID
mode and the user is non-root. By default this is set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">limit</span> <span class="pre">container</span> <span class="pre">paths</span></code>: This restricts container execution to only
allow containers that are located within the specified path prefix.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature will only apply when Apptainer is running in SUID
mode and the user is non-root. By default this is set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">container</span> <span class="pre">${type}</span></code>: This set of options allows admins to limit the
types of image formats that can be leveraged by users with
Apptainer of the following types:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">container</span> <span class="pre">sif</span></code> permits / denies execution of unencrypted SIF
containers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">container</span> <span class="pre">encrypted</span></code> permits / denies execution of SIF
containers with an encrypted root filesystem.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">container</span> <span class="pre">squashfs</span></code> permits / denies execution of bare
SquashFS image files. E.g. Singularity 2.x images.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">container</span> <span class="pre">extfs</span></code> permits / denies execution of bare EXT
image files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">container</span> <span class="pre">dir</span></code> permits / denies execution of sandbox
directory containers.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These limitations do not apply to the root user.</p>
</div>
</section>
<section id="networking-options">
<h3>Networking Options<a class="headerlink" href="#networking-options" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">--network</span></code> option can be used to specify a CNI networking
configuration that will be used when running a container with <a class="reference external" href="https://apptainer.org/docs/user/1.1/networking.html">network
virtualization</a>.
Unrestricted use of CNI network configurations requires root privilege,
as certain configurations may disrupt the host networking environment.</p>
<p>Apptainer allows specific users or groups to be granted the
ability to run containers with administrator specified CNI
configurations.
These features only have an effect when Apptainer is running in SUID
mode and the user is non-root.</p>
<p><code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">net</span> <span class="pre">users</span></code>: Allow specified root administered CNI network
configurations to be used by the specified list of users. By default
only root may use CNI configuration, except in the case of a fakeroot
execution where only 40_fakeroot.conflist is used.</p>
<p><code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">net</span> <span class="pre">groups</span></code>: Allow specified root administered CNI network
configurations to be used by the specified list of users. By default
only root may use CNI configuration, except in the case of a fakeroot
execution where only 40_fakeroot.conflist is used.</p>
<p><code class="docutils literal notranslate"><span class="pre">allow</span> <span class="pre">net</span> <span class="pre">networks</span></code>: Specify the names of CNI network configurations
that may be used by users and groups listed in the allow net users /
allow net groups directives.</p>
</section>
<section id="gpu-options">
<h3>GPU Options<a class="headerlink" href="#gpu-options" title="Permalink to this heading"></a></h3>
<p>Apptainer provides integration with GPUs in order to facilitate GPU
based workloads seamlessly. Both options listed below are particularly
useful in GPU only environments. For more information on using GPUs with
Apptainer checkout <a class="reference internal" href="#gpu-library-configuration"><span class="std std-ref">GPU Library Configuration</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">always</span> <span class="pre">use</span> <span class="pre">nv</span></code>: Enabling this option will cause every action command
(<code class="docutils literal notranslate"><span class="pre">exec/shell/run/instance</span></code>) to be executed with the <code class="docutils literal notranslate"><span class="pre">--nv</span></code> option
implicitly added.</p>
<p><code class="docutils literal notranslate"><span class="pre">always</span> <span class="pre">use</span> <span class="pre">rocm</span></code>: Enabling this option will cause every action
command (<code class="docutils literal notranslate"><span class="pre">exec/shell/run/instance</span></code>) to be executed with the <code class="docutils literal notranslate"><span class="pre">--rocm</span></code>
option implicitly added.</p>
</section>
<section id="supplemental-filesystems">
<h3>Supplemental Filesystems<a class="headerlink" href="#supplemental-filesystems" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">enable</span> <span class="pre">fusemount</span></code>: This will allow users to mount fuse filesystems
inside containers using the <code class="docutils literal notranslate"><span class="pre">--fusemount</span></code> flag.</p>
<p><code class="docutils literal notranslate"><span class="pre">enable</span> <span class="pre">overlay</span></code>: This option will allow Apptainer to create bind
mounts at paths that do not exist within the container image. This
option can be set to <code class="docutils literal notranslate"><span class="pre">try</span></code> (the default), which will try to use an overlayfs.
If it fails to create an overlayfs in this case the bind path will be
silently ignored.
If the option is set to <code class="docutils literal notranslate"><span class="pre">yes</span></code> then if overlayfs fails in SUID mode it
will be a fatal error,
but if overlayfs fails in non-SUID mode it will use fuse-overlayfs.
Underlay is more efficient than fuse-overlayfs so setting this option
to <code class="docutils literal notranslate"><span class="pre">yes</span></code> is generally not desirable.</p>
<p><code class="docutils literal notranslate"><span class="pre">enable</span> <span class="pre">underlay</span></code>: This option will allow Apptainer to create bind
mounts at paths that do not exist within the container image, just like
<code class="docutils literal notranslate"><span class="pre">enable</span> <span class="pre">overlay</span></code>, but instead using an underlay. This is suitable for
systems where overlay is not possible or not working. If the overlay
option is available and working, it will be used instead.</p>
</section>
<section id="cni-configuration-and-plugins">
<h3>CNI Configuration and Plugins<a class="headerlink" href="#cni-configuration-and-plugins" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">cni</span> <span class="pre">configuration</span> <span class="pre">path</span></code>: This option allows admins to specify a
custom path for the CNI configuration that Apptainer will use for
<a class="reference external" href="https://apptainer.org/docs/user/1.1/networking.html">Network Virtualization</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">cni</span> <span class="pre">plugin</span> <span class="pre">path</span></code>: This option allows admins to specify a custom path
for Apptainer to access CNI plugin executables. Check out the
<a class="reference external" href="https://apptainer.org/docs/user/1.1/networking.html">Network Virtualization</a>
section of the user guide for more information.</p>
</section>
<section id="external-binaries">
<h3>External Binaries<a class="headerlink" href="#external-binaries" title="Permalink to this heading"></a></h3>
<p>Apptainer calls a number of external binaries for full functionality.
They are found using the path defined by the <code class="docutils literal notranslate"><span class="pre">binary</span> <span class="pre">path</span></code> option in
<code class="docutils literal notranslate"><span class="pre">apptainer.conf</span></code>.
If that option includes <code class="docutils literal notranslate"><span class="pre">$PATH:</span></code> (as it does by default) then
that is replaced by the user’s <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> whenever it isn’t some
very basic system command or a command that can be run as root
by the SUID flow.</p>
</section>
<section id="concurrent-downloads">
<h3>Concurrent Downloads<a class="headerlink" href="#concurrent-downloads" title="Permalink to this heading"></a></h3>
<p>Apptainer will pull <code class="docutils literal notranslate"><span class="pre">library://</span></code> container images
using multiple concurrent downloads of parts of the image. This speeds
up downloads vs using a single stream. The defaults are generally
appropriate for <a class="reference external" href="https://singularityhub.github.io/library-api/#/?id=library-api">Library API Registries</a>,
but may be tuned for your network conditions, or if you are pulling
from a different library server.</p>
<p><code class="docutils literal notranslate"><span class="pre">download</span> <span class="pre">concurrency</span></code>: specifies how many concurrent streams when
downloading (pulling) an image from cloud library.</p>
<p><code class="docutils literal notranslate"><span class="pre">download</span> <span class="pre">part</span> <span class="pre">size</span></code>: specifies the size of each part (bytes) when
concurrent downloads are enabled.</p>
<p><code class="docutils literal notranslate"><span class="pre">download</span> <span class="pre">buffer</span> <span class="pre">size</span></code>: specifies the transfer buffer size (bytes)
when concurrent downloads are enabled.</p>
</section>
<section id="cgroups-options">
<h3>Cgroups Options<a class="headerlink" href="#cgroups-options" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">systemd</span> <span class="pre">cgroups</span></code>: specifies whether to use systemd to manage container
cgroups. Required (with cgroups v2) for unprivileged users to apply resource
limits on containers. If set to <code class="docutils literal notranslate"><span class="pre">no</span></code>, Apptainer will directly manage
cgroups via the cgroupfs.</p>
</section>
<section id="updating-configuration-options">
<h3>Updating Configuration Options<a class="headerlink" href="#updating-configuration-options" title="Permalink to this heading"></a></h3>
<p>In order to manage this configuration file, Apptainer has a <code class="docutils literal notranslate"><span class="pre">config</span>
<span class="pre">global</span></code> command group that allows you to get, set, reset, and unset
values through the CLI. It’s important to note that these commands must
be run with elevated privileges because the <code class="docutils literal notranslate"><span class="pre">apptainer.conf</span></code> can
only be modified by an administrator.</p>
<section id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this heading"></a></h4>
<p>In this example we will changing the <code class="docutils literal notranslate"><span class="pre">bind</span> <span class="pre">path</span></code> option described
above. First we can see the current list of bind paths set within our
system configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer config global --get &quot;bind path&quot;
/etc/localtime,/etc/hosts
</pre></div>
</div>
<p>Now we can add a new path and verify it was successfully added:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer config global --set &quot;bind path&quot; /etc/resolv.conf
$ sudo apptainer config global --get &quot;bind path&quot;
/etc/resolv.conf,/etc/localtime,/etc/hosts
</pre></div>
</div>
<p>From here we can remove a path with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer config global --unset &quot;bind path&quot; /etc/localtime
$ sudo apptainer config global --get &quot;bind path&quot;
/etc/resolv.conf,/etc/hosts
</pre></div>
</div>
<p>If we want to reset the option to the default at installation, then we
can reset it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer config global --reset &quot;bind path&quot;
$ sudo apptainer config global --get &quot;bind path&quot;
/etc/localtime,/etc/hosts
</pre></div>
</div>
<p>And now we are back to our original option settings. You can also test
what a change would look like by using the <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code> option in
conjunction with the above commands. Instead of writing to the
configuration file, it will output what would have been written to the
configuration file if the command had been run without the <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code>
option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer config global --dry-run --set &quot;bind path&quot; /etc/resolv.conf
# APPTAINER.CONF
# This is the global configuration file for Apptainer. This file controls
[...]
# BIND PATH: [STRING]
# DEFAULT: Undefined
# Define a list of files/directories that should be made available from within
# the container. The file or directory must exist within the container on
# which to attach to. you can specify a different source and destination
# path (respectively) with a colon; otherwise source and dest are the same.
# NOTE: these are ignored if apptainer is invoked with --contain.
bind path = /etc/resolv.conf
bind path = /etc/localtime
bind path = /etc/hosts
[...]
$ sudo apptainer config global --get &quot;bind path&quot;
/etc/localtime,/etc/hosts
</pre></div>
</div>
<p>Above we can see that <code class="docutils literal notranslate"><span class="pre">/etc/resolv.conf</span></code> is listed as a bind path in
the output of the <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code> command, but did not affect the actual
bind paths of the system.</p>
</section>
</section>
</section>
<section id="cgroups-toml">
<span id="id3"></span><h2>cgroups.toml<a class="headerlink" href="#cgroups-toml" title="Permalink to this heading"></a></h2>
<p>The cgroups (control groups) functionality of the Linux kernel allows
you to limit and meter the resources used by a process, or group of
processes. Using cgroups you can limit memory and CPU usage. You can
also rate limit block IO, network IO, and control access to device
nodes.</p>
<p>There are two versions of cgroups in common use. Cgroups v1 sets
resource limits for a process within separate hierarchies per resource
class. Cgroups v2, the default in newer Linux distributions, implements
a unified hierarchy, simplifying the structure of resource limits on
processes.</p>
<ul class="simple">
<li><p>v1 documentation:
<a class="reference external" href="https://www.kernel.org/doc/Documentation/cgroup-v1/cgroups.txt">https://www.kernel.org/doc/Documentation/cgroup-v1/cgroups.txt</a></p></li>
<li><p>v2 documentation:
<a class="reference external" href="https://www.kernel.org/doc/Documentation/cgroup-v2.txt">https://www.kernel.org/doc/Documentation/cgroup-v2.txt</a></p></li>
</ul>
<p>Apptainer can apply resource limitations to systems
configured for both cgroups v1 and the v2 unified hierarchy. Resource
limits are specified using a TOML file that represents the <code class="docutils literal notranslate"><span class="pre">resources</span></code>
section of the OCI runtime-spec:
<a class="reference external" href="https://github.com/opencontainers/runtime-spec/blob/master/config-linux.md#control-groups">https://github.com/opencontainers/runtime-spec/blob/master/config-linux.md#control-groups</a></p>
<p>On a cgroups v1 system the resources configuration is applied directly.
On a cgroups v2 system the configuration is translated and applied to
the unified hierarchy.</p>
<p>Under cgroups v1, access restrictions for device nodes are managed
directly. Under cgroups v2, the restrictions are applied by attaching
eBPF programs that implement the requested access controls.</p>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h3>
<p>To apply resource limits to a container, use the <code class="docutils literal notranslate"><span class="pre">--apply-cgroups</span></code>
flag, which takes a path to a TOML file specifying the cgroups
configuration to be applied:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer shell --apply-cgroups /path/to/cgroups.toml my_container.sif
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--apply-cgroups</span></code> option requires cgroups v2 to be used without root
privileges.</p>
</div>
<section id="limiting-memory">
<h4>Limiting memory<a class="headerlink" href="#limiting-memory" title="Permalink to this heading"></a></h4>
<p>To limit the amount of memory that your container uses to 500MB
(524288000 bytes), set a <code class="docutils literal notranslate"><span class="pre">limit</span></code> value inside the <code class="docutils literal notranslate"><span class="pre">[memory]</span></code> section
of your cgroups TOML file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">memory</span><span class="p">]</span>
    <span class="n">limit</span> <span class="o">=</span> <span class="mi">524288000</span>
</pre></div>
</div>
<p>Start your container, applying the toml file, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer run --apply-cgroups path/to/cgroups.toml library://alpine
</pre></div>
</div>
</section>
<section id="limiting-cpu">
<h4>Limiting CPU<a class="headerlink" href="#limiting-cpu" title="Permalink to this heading"></a></h4>
<p>CPU usage can be limited using different strategies, with limits
specified in the <code class="docutils literal notranslate"><span class="pre">[cpu]</span></code> section of the TOML file.</p>
<p><strong>shares</strong></p>
<p>This corresponds to a ratio versus other cgroups with cpu shares.
Usually the default value is <code class="docutils literal notranslate"><span class="pre">1024</span></code>. That means if you want to allow
to use 50% of a single CPU, you will set <code class="docutils literal notranslate"><span class="pre">512</span></code> as value.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">cpu</span><span class="p">]</span>
    <span class="n">shares</span> <span class="o">=</span> <span class="mi">512</span>
</pre></div>
</div>
<p>A cgroup can get more than its share of CPU if there are enough idle CPU
cycles available in the system, due to the work conserving nature of the
scheduler, so a contained process can consume all CPU cycles even with a
ratio of 50%. The ratio is only applied when two or more processes
conflicts with their needs of CPU cycles.</p>
<p><strong>quota/period</strong></p>
<p>You can enforce hard limits on the CPU cycles a cgroup can consume, so
contained processes can’t use more than the amount of CPU time set for
the cgroup. <code class="docutils literal notranslate"><span class="pre">quota</span></code> allows you to configure the amount of CPU time
that a cgroup can use per period. The default is 100ms (100000us). So if
you want to limit amount of CPU time to 20ms during period of 100ms:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">cpu</span><span class="p">]</span>
    <span class="n">period</span> <span class="o">=</span> <span class="mi">100000</span>
    <span class="n">quota</span> <span class="o">=</span> <span class="mi">20000</span>
</pre></div>
</div>
<p><strong>cpus/mems</strong></p>
<p>You can also restrict access to specific CPUs (cores) and associated
memory nodes by using <code class="docutils literal notranslate"><span class="pre">cpus/mems</span></code> fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">cpu</span><span class="p">]</span>
    <span class="n">cpus</span> <span class="o">=</span> <span class="s2">&quot;0-1&quot;</span>
    <span class="n">mems</span> <span class="o">=</span> <span class="s2">&quot;0-1&quot;</span>
</pre></div>
</div>
<p>Where container has limited access to CPU 0 and CPU 1.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It’s important to set identical values for both <code class="docutils literal notranslate"><span class="pre">cpus</span></code> and
<code class="docutils literal notranslate"><span class="pre">mems</span></code>.</p>
</div>
</section>
<section id="limiting-io">
<h4>Limiting IO<a class="headerlink" href="#limiting-io" title="Permalink to this heading"></a></h4>
<p>To control block device I/O, applying limits to competing container, use
the <code class="docutils literal notranslate"><span class="pre">[blockIO]</span></code> section of the TOML file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">blockIO</span><span class="p">]</span>
    <span class="n">weight</span> <span class="o">=</span> <span class="mi">1000</span>
    <span class="n">leafWeight</span> <span class="o">=</span> <span class="mi">1000</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">weight</span></code> and <code class="docutils literal notranslate"><span class="pre">leafWeight</span></code> accept values between <code class="docutils literal notranslate"><span class="pre">10</span></code> and <code class="docutils literal notranslate"><span class="pre">1000</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">weight</span></code> is the default weight of the group on all the devices until
and unless overridden by a per device rule.</p>
<p><code class="docutils literal notranslate"><span class="pre">leafWeight</span></code> relates to weight for the purpose of deciding how heavily
to weigh tasks in the given cgroup while competing with the cgroup’s
child cgroups.</p>
<p>To apply limits to specific block devices, you must set configuration
for specific device major/minor numbers. For example, to override
<code class="docutils literal notranslate"><span class="pre">weight/leafWeight</span></code> for <code class="docutils literal notranslate"><span class="pre">/dev/loop0</span></code> and <code class="docutils literal notranslate"><span class="pre">/dev/loop1</span></code> block
devices, set limits for device major 7, minor 0 and 1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">blockIO</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">blockIO</span><span class="o">.</span><span class="n">weightDevice</span><span class="p">]]</span>
        <span class="n">major</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="n">minor</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="n">leafWeight</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="p">[[</span><span class="n">blockIO</span><span class="o">.</span><span class="n">weightDevice</span><span class="p">]]</span>
        <span class="n">major</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="n">minor</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="n">leafWeight</span> <span class="o">=</span> <span class="mi">50</span>
</pre></div>
</div>
<p>You can also limit the IO read/write rate to a specific absolute value,
e.g. 16MB per second for the <code class="docutils literal notranslate"><span class="pre">/dev/loop0</span></code> block device. The <code class="docutils literal notranslate"><span class="pre">rate</span></code>
is specified in bytes per second.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">blockIO</span><span class="p">]</span>
    <span class="p">[[</span><span class="n">blockIO</span><span class="o">.</span><span class="n">throttleReadBpsDevice</span><span class="p">]]</span>
        <span class="n">major</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="n">minor</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rate</span> <span class="o">=</span> <span class="mi">16777216</span>
    <span class="p">[[</span><span class="n">blockIO</span><span class="o">.</span><span class="n">throttleWriteBpsDevice</span><span class="p">]]</span>
        <span class="n">major</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="n">minor</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rate</span> <span class="o">=</span> <span class="mi">16777216</span>
</pre></div>
</div>
</section>
<section id="other-limits">
<h4>Other limits<a class="headerlink" href="#other-limits" title="Permalink to this heading"></a></h4>
<p>Apptainer can apply all resource limits that are valid in the OCI
runtime-spec <code class="docutils literal notranslate"><span class="pre">resources</span></code> section, including <code class="docutils literal notranslate"><span class="pre">unified</span></code> cgroups v2
constraints. It is most compatible, however, to use the cgroups v1 limits,
which will be translated to v2 format when applied on a cgroups v2 system.</p>
<p>See
<a class="reference external" href="https://github.com/opencontainers/runtime-spec/blob/master/config-linux.md#control-groups">https://github.com/opencontainers/runtime-spec/blob/master/config-linux.md#control-groups</a>
for information about the available limits. Note that Apptainer uses
TOML format for the configuration file, rather than JSON.</p>
</section>
</section>
</section>
<section id="ecl-toml">
<span id="execution-control-list"></span><h2>ecl.toml<a class="headerlink" href="#ecl-toml" title="Permalink to this heading"></a></h2>
<p>The execution control list that can be used to restrict the execution of
SIF files by signing key is defined here. You can authorize the
containers by validating both the location of the SIF file in the
filesystem and by checking against a list of signing entities.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The ECL configuration applies to SIF container images only. To lock
down execution fully you should disable execution of other container
types (squashfs/extfs/dir) via the <code class="docutils literal notranslate"><span class="pre">apptainer.conf</span></code> file <code class="docutils literal notranslate"><span class="pre">allow</span>
<span class="pre">container</span></code> settings.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="n">execgroup</span><span class="p">]]</span>
  <span class="n">tagname</span> <span class="o">=</span> <span class="s2">&quot;group2&quot;</span>
  <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;whitelist&quot;</span>
  <span class="n">dirpath</span> <span class="o">=</span> <span class="s2">&quot;/tmp/containers&quot;</span>
  <span class="n">keyfp</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;7064B1D6EFF01B1262FED3F03581D99FE87EAFD1&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Only the containers running from and signed with above-mentioned path
and keys will be authorized to run.</p>
<p>Three possible list modes you can choose from:</p>
<p><strong>Whitestrict</strong>: The SIF must be signed by all of the keys mentioned.</p>
<p><strong>Whitelist</strong>: As long as the SIF is signed by one or more of the keys,
the container is allowed to run.</p>
<p><strong>Blacklist</strong>: Only the containers whose keys are not mentioned in the
group are allowed to run.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Containers signed by Singularity versions older than 3.6.0 will not
pass ECL checks because they are insecure.</p>
<p>To temporarily permit the use of legacy insecure signatures, set
<code class="docutils literal notranslate"><span class="pre">legacyinsecure</span> <span class="pre">=</span> <span class="pre">true</span></code> in <code class="docutils literal notranslate"><span class="pre">ecl.toml</span></code>.</p>
</div>
<section id="managing-ecl-public-keys">
<h3>Managing ECL public keys<a class="headerlink" href="#managing-ecl-public-keys" title="Permalink to this heading"></a></h3>
<p>Apptainer uses a global keyring for ECL signature
verification. This keyring can be administered using the <code class="docutils literal notranslate"><span class="pre">--global</span></code>
flag for the following commands:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">key</span> <span class="pre">import</span></code> (root user only)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">key</span> <span class="pre">pull</span></code> (root user only)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">key</span> <span class="pre">remove</span></code> (root user only)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">key</span> <span class="pre">export</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apptainer</span> <span class="pre">key</span> <span class="pre">list</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For security reasons, it is not possible to import private keys into
this global keyring because it must be accessible by users and is
stored in the file <code class="docutils literal notranslate"><span class="pre">SYSCONFDIR/apptainer/global-pgp-public</span></code>.</p>
</div>
</section>
</section>
<section id="gpu-library-configuration">
<span id="id4"></span><h2>GPU Library Configuration<a class="headerlink" href="#gpu-library-configuration" title="Permalink to this heading"></a></h2>
<p>When a container includes a GPU enabled application, Apptainer (with
the <code class="docutils literal notranslate"><span class="pre">--nv</span></code> or <code class="docutils literal notranslate"><span class="pre">--rocm</span></code> options) can properly inject the required
Nvidia or AMD GPU driver libraries into the container, to match the
host’s kernel. The GPU <code class="docutils literal notranslate"><span class="pre">/dev</span></code> entries are provided in containers run
with <code class="docutils literal notranslate"><span class="pre">--nv</span></code> or <code class="docutils literal notranslate"><span class="pre">--rocm</span></code> even if the <code class="docutils literal notranslate"><span class="pre">--contain</span></code> option is used to
restrict the in-container device tree.</p>
<p>Compatibility between containerized CUDA/ROCm/OpenCL applications and
host drivers/libraries is dependent on the versions of the GPU compute
frameworks that were used to build the applications. Compatibility and
usage information is discussed in the <a class="reference external" href="https://apptainer.org/docs/user/1.1/gpu.html">GPU Support</a>
section of the user guide.</p>
<section id="nvidia-gpus-cuda">
<h3>NVIDIA GPUs / CUDA<a class="headerlink" href="#nvidia-gpus-cuda" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">nvliblist.conf</span></code> configuration file is used to specify libraries
and executables that need to be injected into the container when running
Apptainer with the <code class="docutils literal notranslate"><span class="pre">--nv</span></code> Nvidia GPU support option. The provided
<code class="docutils literal notranslate"><span class="pre">nvliblist.conf</span></code> is suitable for CUDA 11, but may need to be modified
if you need to include additional libraries, or further libraries are
added to newer versions of the Nvidia driver/CUDA distribution.</p>
<p>When adding new entries to <code class="docutils literal notranslate"><span class="pre">nvliblist.conf</span></code> use the bare filename of
executables, and the <code class="docutils literal notranslate"><span class="pre">xxxx.so</span></code> form of libraries. Libraries are
resolved via <code class="docutils literal notranslate"><span class="pre">ldconfig</span> <span class="pre">-p</span></code>, and exectuables are found by searching
<code class="docutils literal notranslate"><span class="pre">$PATH</span></code>.</p>
<section id="experimental-nvidia-container-cli-support">
<h4>Experimental nvidia-container-cli Support<a class="headerlink" href="#experimental-nvidia-container-cli-support" title="Permalink to this heading"></a></h4>
<p>The <a class="reference external" href="https://github.com/NVIDIA/libnvidia-container">nvidia-container-cli</a> tool is Nvidia’s
officially support method for configuring containers to use a GPU. It is
targeted at OCI container runtimes.</p>
<p>Apptainer has an experimental <code class="docutils literal notranslate"><span class="pre">--nvccli</span></code> option, which
will call out to <code class="docutils literal notranslate"><span class="pre">nvidia-container-cli</span></code> for container GPU setup,
rather than use the <code class="docutils literal notranslate"><span class="pre">nvliblist.conf</span></code> approach.</p>
<p>For security reasons, <code class="docutils literal notranslate"><span class="pre">nvidia-container-cli</span></code> cannot be used with privileged
mode in a SUID installation of Apptainer, it can only be used unprivileged.
The operations performed by <code class="docutils literal notranslate"><span class="pre">nvidia-container-cli</span></code> are broadly similar to
those which Apptainer carries out when setting up a GPU container
from <code class="docutils literal notranslate"><span class="pre">nvliblist.conf</span></code>.</p>
</section>
</section>
<section id="amd-radeon-gpus-rocm">
<h3>AMD Radeon GPUs / ROCm<a class="headerlink" href="#amd-radeon-gpus-rocm" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">rocmliblist.conf</span></code> file is used to specify libraries and
executables that need to be injected into the container when running
Apptainer with the <code class="docutils literal notranslate"><span class="pre">--rocm</span></code> Radeon GPU support option. The
provided <code class="docutils literal notranslate"><span class="pre">rocmliblist.conf</span></code> is suitable for ROCm 4.0, but may need to
modified if you need to include additional libraries, or further
libraries are added to newer versions of the ROCm distribution.</p>
<p>When adding new entries to <code class="docutils literal notranslate"><span class="pre">rocmlist.conf</span></code> use the bare filename of
executables, and the <code class="docutils literal notranslate"><span class="pre">xxxx.so</span></code> form of libraries. Libraries are
resolved via <code class="docutils literal notranslate"><span class="pre">ldconfig</span> <span class="pre">-p</span></code>, and exectuables are found by searching
<code class="docutils literal notranslate"><span class="pre">$PATH</span></code>.</p>
</section>
<section id="gpu-liblist-format">
<h3>GPU liblist format<a class="headerlink" href="#gpu-liblist-format" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">nvliblist.conf</span></code> and <code class="docutils literal notranslate"><span class="pre">rocmliblist</span></code> files list the basename of
executables and libraries to be bound into the container, without path
information.</p>
<p>Binaries are found by searching <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># put binaries here</span>
<span class="c1"># In shared environments you should ensure that permissions on these files</span>
<span class="c1"># exclude writing by non-privileged users.</span>
<span class="n">rocm</span><span class="o">-</span><span class="n">smi</span>
<span class="n">rocminfo</span>
</pre></div>
</div>
<p>Libraries should be specified without version information, i.e.
<code class="docutils literal notranslate"><span class="pre">libname.so</span></code>, and are resolved using <code class="docutils literal notranslate"><span class="pre">ldconfig</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># put libs here (must end in .so)</span>
<span class="n">libamd_comgr</span><span class="o">.</span><span class="n">so</span>
<span class="n">libcomgr</span><span class="o">.</span><span class="n">so</span>
<span class="n">libCXLActivityLogger</span><span class="o">.</span><span class="n">so</span>
</pre></div>
</div>
<p>If you receive warnings that binaries or libraries are not found, ensure
that they are in a system path (binaries), or available in paths
configured in <code class="docutils literal notranslate"><span class="pre">/etc/ld.so.conf</span></code> (libraries).</p>
</section>
</section>
<section id="capability-json">
<h2>capability.json<a class="headerlink" href="#capability-json" title="Permalink to this heading"></a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is extremely important to recognize that <strong>granting users Linux
capabilities with the</strong> <code class="docutils literal notranslate"><span class="pre">capability</span></code> <strong>command group is usually
identical to granting those users root level access on the host
system</strong>. Most if not all capabilities will allow users to “break
out” of the container and become root on the host. This feature is
targeted toward special use cases (like cloud-native architectures)
where an admin/developer might want to limit the attack surface
within a container that normally runs as root. This is not a good
option in multi-tenant HPC environments where an admin wants to grant
a user special privileges within a container. For that and similar
use cases, the <a class="reference internal" href="user_namespace.html#fakeroot"><span class="std std-ref">fakeroot feature</span></a> is a better option.</p>
</div>
<p>Apptainer in SUID mode provides full support for admins to grant and revoke
Linux capabilities on a user or group basis. The <code class="docutils literal notranslate"><span class="pre">capability.json</span></code> file is
maintained by Apptainer in order to manage these capabilities. The
<code class="docutils literal notranslate"><span class="pre">capability</span></code> command group allows you to <code class="docutils literal notranslate"><span class="pre">add</span></code>, <code class="docutils literal notranslate"><span class="pre">drop</span></code>, and
<code class="docutils literal notranslate"><span class="pre">list</span></code> capabilities for users and groups.</p>
<p>For example, let us suppose that we have decided to grant a user (named
<code class="docutils literal notranslate"><span class="pre">pinger</span></code>) capabilities to open raw sockets so that they can use
<code class="docutils literal notranslate"><span class="pre">ping</span></code> in a container where the binary is controlled via capabilities.</p>
<p>To do so, we would issue a command such as this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer capability add --user pinger CAP_NET_RAW
</pre></div>
</div>
<p>This means the user <code class="docutils literal notranslate"><span class="pre">pinger</span></code> has just been granted permissions
(through Linux capabilities) to open raw sockets within Apptainer
containers.</p>
<p>We can check that this change is in effect with the <code class="docutils literal notranslate"><span class="pre">capability</span> <span class="pre">list</span></code>
command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer capability list --user pinger
CAP_NET_RAW
</pre></div>
</div>
<p>To take advantage of this new capability, the user <code class="docutils literal notranslate"><span class="pre">pinger</span></code> must also
request the capability when executing a container with the
<code class="docutils literal notranslate"><span class="pre">--add-caps</span></code> flag. <code class="docutils literal notranslate"><span class="pre">pinger</span></code> would need to run a command like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer exec --add-caps CAP_NET_RAW \
  library://sylabs/tests/ubuntu_ping:v1.0 ping -c 1 8.8.8.8
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=52 time=73.1 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 73.178/73.178/73.178/0.000 ms
</pre></div>
</div>
<p>If we decide that it is no longer necessary to allow the user <code class="docutils literal notranslate"><span class="pre">pinger</span></code>
to open raw sockets within Apptainer containers, we can revoke the
appropriate Linux capability like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer capability drop --user pinger CAP_NET_RAW
</pre></div>
</div>
<p>Now if <code class="docutils literal notranslate"><span class="pre">pinger</span></code> tries to use <code class="docutils literal notranslate"><span class="pre">CAP_NET_RAW</span></code>, Apptainer will not
give the capability to the container and <code class="docutils literal notranslate"><span class="pre">ping</span></code> will fail to create a
socket:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ apptainer exec --add-caps CAP_NET_RAW \
  library://sylabs/tests/ubuntu_ping:v1.0 ping -c 1 8.8.8.8
WARNING: not authorized to add capability: CAP_NET_RAW
ping: socket: Operation not permitted
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">capability</span> <span class="pre">add</span></code> and <code class="docutils literal notranslate"><span class="pre">drop</span></code> subcommands will also accept the
case insensitive keyword <code class="docutils literal notranslate"><span class="pre">all</span></code> to grant or revoke all Linux
capabilities to a user or group.</p>
<p>For more information about individual Linux capabilities check out the
<a class="reference external" href="http://man7.org/linux/man-pages/man7/capabilities.7.html">man pages</a>
or use the <code class="docutils literal notranslate"><span class="pre">capability</span> <span class="pre">avail</span></code> command to output available capabilities
with a description of their behaviors.</p>
</section>
<section id="seccomp-profiles">
<h2>seccomp-profiles<a class="headerlink" href="#seccomp-profiles" title="Permalink to this heading"></a></h2>
<p>Secure Computing (seccomp) Mode is a feature of the Linux kernel that
allows an administrator to filter system calls being made from a
container. Profiles made up of allowed and restricted calls can be
passed to different containers. <em>Seccomp</em> provides more control than
<em>capabilities</em> alone, giving a smaller attack surface for an attacker to
work from within a container.</p>
<p>You can set the default action with <code class="docutils literal notranslate"><span class="pre">defaultAction</span></code> for a non-listed
system call. Example: <code class="docutils literal notranslate"><span class="pre">SCMP_ACT_ALLOW</span></code> filter will allow all the
system calls if it matches the filter rule and you can set it to
<code class="docutils literal notranslate"><span class="pre">SCMP_ACT_ERRNO</span></code> which will have the thread receive a return value of
<em>errno</em> if it calls a system call that matches the filter rule. The file
is formatted in a way that it can take a list of additional system calls
for different architecture and Apptainer will automatically take
syscalls related to the current architecture where it’s been executed.
The <code class="docutils literal notranslate"><span class="pre">include</span></code>/<code class="docutils literal notranslate"><span class="pre">exclude</span></code>-&gt; <code class="docutils literal notranslate"><span class="pre">caps</span></code> section will include/exclude the
listed system calls if the user has the associated capability.</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">--security</span></code> option to invoke the container like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer shell --security seccomp:/home/david/my.json my_container.sif
</pre></div>
</div>
<p>For more insight into security options, network options, cgroups,
capabilities, etc, please check the <a class="reference external" href="https://apptainer.org/docs/user/1.1">Userdocs</a> and it’s
<a class="reference external" href="https://apptainer.org/docs/user/1.1/appendix.html">Appendix</a>.</p>
</section>
<section id="remote-yaml">
<h2>remote.yaml<a class="headerlink" href="#remote-yaml" title="Permalink to this heading"></a></h2>
<p>System-wide remote endpoints are defined in a configuration file
typically located at <code class="docutils literal notranslate"><span class="pre">/usr/local/etc/apptainer/remote.yaml</span></code> (this
location may vary depending on installation parameters) and can be
managed by administrators with the <code class="docutils literal notranslate"><span class="pre">remote</span></code> command group.</p>
<section id="remote-endpoints">
<h3>Remote Endpoints<a class="headerlink" href="#remote-endpoints" title="Permalink to this heading"></a></h3>
<p>Apptainer allows users to login to an account and authenticate with a
<a class="reference external" href="https://singularityhub.github.io/library-api/#/?id=library-api">Library API Registry</a>. Whether
that registry exists on premise or in the cloud.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A fresh installation of Apptainer is configured with the <code class="docutils literal notranslate"><span class="pre">DefaultRemote</span></code>,
which does not support the Library API as it is only configured with a
functioning key server, <code class="docutils literal notranslate"><span class="pre">https://keys.openpgp.org</span></code>. Users or administrators
should configure one of the Library API implementations listed <a class="reference external" href="https://singularityhub.github.io/library-api/#/?id=library-api">here</a> if they would
like to use a Library API registry.</p>
</div>
<p><strong>Examples</strong></p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">remote</span></code> command group with the <code class="docutils literal notranslate"><span class="pre">--global</span></code> flag to create a
system-wide remote endpoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer remote add --global company-remote https://enterprise.example.com
INFO:    Remote &quot;company-remote&quot; added.
INFO:    Global option detected. Will not automatically log into remote.
</pre></div>
</div>
<p>Conversely, to remove a system-wide endpoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer remote remove --global company-remote
INFO:    Remote &quot;company-remote&quot; removed.
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once users log in to a system wide endpoint, a copy of the endpoint
will be listed in a their <code class="docutils literal notranslate"><span class="pre">~/.apptainer/remote.yaml</span></code> file. This
means modifications or removal of the system-wide endpoint will not
be reflected in the users configuration unless they remove the
endpoint themselves.</p>
</div>
<section id="exclusive-endpoint">
<h4>Exclusive Endpoint<a class="headerlink" href="#exclusive-endpoint" title="Permalink to this heading"></a></h4>
<p>Apptainer has the ability for an administrator to make a
remote the only usable remote for the system by using the
<code class="docutils literal notranslate"><span class="pre">--exclusive</span></code> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer remote use --exclusive company-remote
INFO:    Remote &quot;company-remote&quot; now in use.
$ apptainer remote list
Cloud Services Endpoints
========================

NAME            URI                     ACTIVE  GLOBAL  EXCLUSIVE  INSECURE
DefaultRemote   cloud.apptainer.org     NO      YES     NO         NO
company-remote  enterprise.example.com  YES     YES     YES        NO
myremote        enterprise.example.com  NO      NO      NO         NO

Keyservers
==========

URI                       GLOBAL  INSECURE  ORDER
https://keys.example.com  YES     NO        1*

* Active cloud services keyserver
</pre></div>
</div>
</section>
<section id="insecure-http-endpoints">
<h4>Insecure (HTTP) Endpoints<a class="headerlink" href="#insecure-http-endpoints" title="Permalink to this heading"></a></h4>
<p>If you are using a endpoint that exposes its
service discovery file over an insecure HTTP connection only, it can be
added by specifying the <code class="docutils literal notranslate"><span class="pre">--insecure</span></code> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer remote add --global --insecure test http://test.example.com
INFO:    Remote &quot;test&quot; added.
INFO:    Global option detected. Will not automatically log into remote.
</pre></div>
</div>
<p>This flag controls HTTP vs HTTPS for service discovery only. The
protocol used to access individual library, build and keyserver URLs is
set by the service discovery file.</p>
</section>
<section id="restoring-pre-apptainer-library-behavior">
<h4>Restoring pre-Apptainer library behavior<a class="headerlink" href="#restoring-pre-apptainer-library-behavior" title="Permalink to this heading"></a></h4>
<p>These are the commands to restore the library behavior from before
Apptainer, where using the <cite>library://</cite> URI would download from the
Sylabs Cloud anonymously:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apptainer remote add --global SylabsCloud cloud.sylabs.io
INFO:    Remote &quot;SylabsCloud&quot; added.
INFO:    Global option detected. Will not automatically log into remote.
$ sudo apptainer remote use --global SylabsCloud
INFO:    Remote &quot;SylabsCloud&quot; now in use.
$ apptainer remote list
Cloud Services Endpoints
========================

NAME           URI                  ACTIVE  GLOBAL  EXCLUSIVE
DefaultRemote  cloud.apptainer.org  NO      YES     NO
SylabsCloud    cloud.sylabs.io      YES     YES     NO

Keyservers
==========

URI                     GLOBAL  INSECURE  ORDER
https://keys.sylabs.io  YES     NO        1*

* Active cloud services keyserver
</pre></div>
</div>
</section>
<section id="additional-information">
<h4>Additional Information<a class="headerlink" href="#additional-information" title="Permalink to this heading"></a></h4>
<p>For more details on the <code class="docutils literal notranslate"><span class="pre">remote</span></code> command group and managing remote
endpoints, please check the <a class="reference external" href="https://apptainer.org/docs/user/1.1/endpoint.html">Remote Userdocs</a>.</p>
</section>
</section>
<section id="keyserver-configuration">
<h3>Keyserver Configuration<a class="headerlink" href="#keyserver-configuration" title="Permalink to this heading"></a></h3>
<p>By default, Apptainer will use the keyserver correlated to the
active cloud service endpoint. This behavior can be changed or
supplemented via the <code class="docutils literal notranslate"><span class="pre">add-keyserver</span></code> and <code class="docutils literal notranslate"><span class="pre">remove-keyserver</span></code>
commands. These commands allow an administrator to create a global list
of key servers used to verify container signatures by default.</p>
<p>For more details on the <code class="docutils literal notranslate"><span class="pre">remote</span></code> command group and managing
keyservers, please check the <a class="reference external" href="https://apptainer.org/docs/user/1.1/endpoint.html">Remote Userdocs</a>.</p>
</section>
</section>
<section id="dmtcp-conf-yaml">
<span id="dmtcp-configuration"></span><h2>dmtcp-conf.yaml<a class="headerlink" href="#dmtcp-conf-yaml" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">dmtcp-conf.yaml</span></code> is a YAML configuration file that is used to specify the
libraries and executables that need to be injected into the container, without
path information. This configuration is used when running Apptainer instances
with application checkpointing ( e.g. <code class="docutils literal notranslate"><span class="pre">--dmctp-launch</span></code>, <code class="docutils literal notranslate"><span class="pre">dmtcp-restart</span></code>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature is marked as <strong>experimental</strong> to allow flexibility as community
feedback may warrant breaking changes to improve the overall usability for
this feature set as it matures.</p>
</div>
<p>Binaries are specified as an array under the <code class="docutils literal notranslate"><span class="pre">bins</span></code> key and are found by
searching <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># List binaries to bind into the container here</span>
<span class="c1"># In shared environments you should ensure that permissions on these files</span>
<span class="c1"># exclude writing by non-privileged users.</span>
<span class="n">bins</span><span class="p">:</span>
  <span class="o">-</span> <span class="s2">&quot;dmtcp_command&quot;</span>
  <span class="o">-</span> <span class="s2">&quot;dmtcp_discover_rm&quot;</span>
  <span class="o">-</span> <span class="s2">&quot;dmtcp_launch&quot;</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>Libraries are specified as an array under the <code class="docutils literal notranslate"><span class="pre">libs</span></code> key and should be
specified without version information, i.e.
<code class="docutils literal notranslate"><span class="pre">libname.so</span></code>, and are resolved using <code class="docutils literal notranslate"><span class="pre">ldconfig</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># List libraries to bind into the container here. Library names must end in &quot;.so&quot;</span>
<span class="n">libs</span><span class="p">:</span>
  <span class="o">-</span> <span class="s2">&quot;libdmtcp_alloc.so&quot;</span>
  <span class="o">-</span> <span class="s2">&quot;libdmtcp_dl.so&quot;</span>
  <span class="o">-</span> <span class="s2">&quot;libdmtcp_modify-env.so&quot;</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>If you receive warnings that binaries or libraries are not found, ensure
that they are in a system path (binaries), or available in paths
configured in <code class="docutils literal notranslate"><span class="pre">/etc/ld.so.conf</span></code> (libraries).</p>
<p>For more details on the checkpointing features in Apptainer, please check the
<a class="reference external" href="https://apptainer.org/docs/user/1.1/checkpoint.html">Checkpoint Userdocs</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="singularity_migration.html" class="btn btn-neutral float-left" title="Migrating From Singularity" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="user_namespace.html" class="btn btn-neutral float-right" title="User Namespaces &amp; Fakeroot" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
    <br>
    &copy; Contributors to the Apptainer project, established as Apptainer a Series of LF Projects LLC
    <br>
    &copy; 2017-2022, Sylabs Inc


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>