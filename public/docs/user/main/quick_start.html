

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quick Start &mdash; Apptainer User Guide main documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=a8da1a53"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="_static/js/ga.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Security in Apptainer" href="security.html" />
    <link rel="prev" title="Introduction to Apptainer" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Apptainer User Guide
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to Apptainer</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overview-of-the-apptainer-interface">Overview of the Apptainer Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#downloading-images">Downloading images</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interacting-with-images">Interacting with images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#shell">Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="#executing-commands">Executing Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-a-container">Running a container</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#arguments-to-run">Arguments to <code class="docutils literal notranslate"><span class="pre">run</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-files">Working with Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-images-from-scratch">Building images from scratch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sandbox-directories">Sandbox Directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#converting-images-from-one-format-to-another">Converting images from one format to another</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apptainer-definition-files">Apptainer Definition Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#apptainer-on-a-shared-resource">Apptainer on a shared resource</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security in Apptainer</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_a_container.html">Build a container</a></li>
<li class="toctree-l1"><a class="reference internal" href="definition_files.html">The Definition File</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_env.html">Build Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="fakeroot.html">Fakeroot feature</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="signNverify.html">Sign and Verify</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_commands.html">Key management commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="encryption.html">Encrypted Containers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="endpoint.html">Remote Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="keyserver.html">Keyserver Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="registry.html">OCI Registries</a></li>
<li class="toctree-l1"><a class="reference internal" href="library_api.html">Library API Registries</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bind_paths_and_mounts.html">Bind Paths and Mounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent_overlays.html">Persistent Overlays</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_services.html">Instances - Running Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_and_metadata.html">Environment and Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="security_options.html">Security Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Network Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="cgroups.html">Limiting Container Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="checkpoint.html">Application Checkpointing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="singularity_compatibility.html">Singularity Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker_and_oci.html">Support for Docker / OCI Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="oci_runtime.html">OCI Runtime Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpi.html">Apptainer and MPI applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu.html">GPU Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Licenses</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Apptainer User Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quick Start</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/apptainer/apptainer-userdocs/blob/main/quick_start.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quick-start">
<span id="id1"></span><h1>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading"></a></h1>
<p id="sec-quickstart">This guide is intended for running Apptainer on a computer where you
will install Apptainer yourself.</p>
<p>If you need to request an installation on your shared resource, see
<a class="reference internal" href="#installation-request"><span class="std std-ref">requesting an installation</span></a> for
information to send to your system administrator.</p>
<p>For any additional help or support contact the Apptainer Community:
<a class="reference external" href="https://apptainer.org/support">https://apptainer.org/support</a></p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>You will need a Linux system to run Apptainer.
Root access is not required if user namespaces are available.</p>
<p>To install from source, follow the instructions in the <a class="reference external" href="https://github.com/apptainer/apptainer/blob/main/INSTALL.md">INSTALL.md</a>
on github.
Other installation options,
including installing from a pre-built RPM,
building an RPM or Debian package,
installing Apptainer without root privileges,
and using Apptainer on Mac and Windows machines
are discussed in the <a class="reference external" href="https://apptainer.org/docs/admin/main/installation.html">installation section of the admin guide</a>.</p>
<p>If you have an existing version of Apptainer installed from source, which
you wish to upgrade or remove / uninstall, also see the <a class="reference external" href="https://apptainer.org/docs/admin/main/installation.html">installation section of the admin guide</a>.</p>
</section>
<section id="overview-of-the-apptainer-interface">
<h2>Overview of the Apptainer Interface<a class="headerlink" href="#overview-of-the-apptainer-interface" title="Link to this heading"></a></h2>
<p>Apptainer’s <a class="reference internal" href="cli.html#cli"><span class="std std-ref">command line interface</span></a> allows you to build
and interact with containers transparently. You can run programs inside
a container as if they were running on your host system. You can easily
redirect I/O, use pipes, pass arguments, and access files, sockets, and
ports on the host system from within a container.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">help</span></code> command gives an overview of Apptainer options and
subcommands as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span><span class="nb">help</span>

<span class="go">Linux container platform optimized for High Performance Computing (HPC) and</span>
<span class="go">Enterprise Performance Computing (EPC)</span>

<span class="go">Usage:</span>
<span class="go">  apptainer [global options...]</span>

<span class="go">Description:</span>
<span class="go">  Apptainer containers provide an application virtualization layer enabling</span>
<span class="go">  mobility of compute via both application and environment portability. With</span>
<span class="go">  Apptainer one is capable of building a root file system that runs on any</span>
<span class="go">  other Linux system where Apptainer is installed.</span>

<span class="go">Options:</span>
<span class="go">      --build-config    use configuration needed for building containers</span>
<span class="go">  -c, --config string   specify a configuration file (for root or</span>
<span class="go">                        unprivileged installation only) (default</span>
<span class="go">                        &quot;/etc/apptainer/apptainer.conf&quot;)</span>
<span class="go">  -d, --debug           print debugging information (highest verbosity)</span>
<span class="go">  -h, --help            help for apptainer</span>
<span class="go">      --nocolor         print without color output (default False)</span>
<span class="go">  -q, --quiet           suppress normal output</span>
<span class="go">  -s, --silent          only print errors</span>
<span class="go">  -v, --verbose         print additional information</span>
<span class="go">      --version         version for apptainer</span>

<span class="go">Available Commands:</span>
<span class="go">  build       Build an Apptainer image</span>
<span class="go">  cache       Manage the local cache</span>
<span class="go">  capability  Manage Linux capabilities for users and groups</span>
<span class="go">  checkpoint  Manage container checkpoint state (experimental)</span>
<span class="go">  completion  Generate the autocompletion script for the specified shell</span>
<span class="go">  config      Manage various apptainer configuration (root user only)</span>
<span class="go">  delete      Deletes requested image from the library</span>
<span class="go">  exec        Run a command within a container</span>
<span class="go">  help        Help about any command</span>
<span class="go">  inspect     Show metadata for an image</span>
<span class="go">  instance    Manage containers running as services</span>
<span class="go">  key         Manage OpenPGP keys</span>
<span class="go">  keyserver   Manage apptainer keyservers</span>
<span class="go">  oci         Manage OCI containers</span>
<span class="go">  overlay     Manage an EXT3 writable overlay image</span>
<span class="go">  plugin      Manage Apptainer plugins</span>
<span class="go">  pull        Pull an image from a URI</span>
<span class="go">  push        Upload image to the provided URI</span>
<span class="go">  registry    Manage authentication to OCI/Docker registries</span>
<span class="go">  remote      Manage apptainer remote endpoints</span>
<span class="go">  run         Run the user-defined default command within a container</span>
<span class="go">  run-help    Show the user-defined help for an image</span>
<span class="go">  search      Search a Container Library for images</span>
<span class="go">  shell       Run a shell within a container</span>
<span class="go">  sif         Manipulate Singularity Image Format (SIF) images</span>
<span class="go">  sign        Add digital signature(s) to an image</span>
<span class="go">  test        Run the user-defined tests within a container</span>
<span class="go">  verify      Verify digital signature(s) within an image</span>
<span class="go">  version     Show the version for Apptainer</span>

<span class="go">Examples:</span>
<span class="gp">  $ </span>apptainer<span class="w"> </span><span class="nb">help</span><span class="w"> </span>&lt;command&gt;<span class="w"> </span><span class="o">[</span>&lt;subcommand&gt;<span class="o">]</span>
<span class="gp">  $ </span>apptainer<span class="w"> </span><span class="nb">help</span><span class="w"> </span>build
<span class="gp">  $ </span>apptainer<span class="w"> </span><span class="nb">help</span><span class="w"> </span>instance<span class="w"> </span>start


<span class="go">For additional help or support, please visit https://apptainer.org/help/</span>
</pre></div>
</div>
<p>Information about individual subcommands can also be viewed by using the
<code class="docutils literal notranslate"><span class="pre">help</span></code> command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span><span class="nb">help</span><span class="w"> </span>verify
<span class="go">Verify digital signature(s) within an image</span>

<span class="go">Usage:</span>
<span class="go">  apptainer verify [verify options...] &lt;image path&gt;</span>

<span class="go">Description:</span>
<span class="go">  The verify command allows a user to verify one or more digital signatures</span>
<span class="go">  within a SIF image.</span>

<span class="go">  Key material can be provided via PEM-encoded file, or via the PGP keyring. To</span>
<span class="go">  manage the PGP keyring, see &#39;apptainer help key&#39;.</span>

<span class="go">Options:</span>
<span class="go">  -a, --all                                verify all objects</span>
<span class="go">      --certificate string                 path to the certificate</span>
<span class="go">      --certificate-intermediates string   path to pool of intermediate</span>
<span class="go">                                           certificates</span>
<span class="go">      --certificate-roots string           path to pool of root certificates</span>
<span class="go">  -g, --group-id uint32                    verify objects with the</span>
<span class="go">                                           specified group ID</span>
<span class="go">  -h, --help                               help for verify</span>
<span class="go">  -j, --json                               output json</span>
<span class="go">      --key string                         path to the public key file</span>
<span class="go">      --legacy-insecure                    enable verification of</span>
<span class="go">                                           (insecure) legacy signatures</span>
<span class="go">  -l, --local                              only verify with local key(s)</span>
<span class="go">                                           in keyring</span>
<span class="go">      --ocsp-verify                        enable online revocation check</span>
<span class="go">                                           for certificates</span>
<span class="go">  -i, --sif-id uint32                      verify object with the specified ID</span>
<span class="go">  -u, --url string                         specify a URL for a key server</span>


<span class="go">Examples:</span>
<span class="go">  Verify with a public key:</span>
<span class="gp">  $ </span>apptainer<span class="w"> </span>verify<span class="w"> </span>--key<span class="w"> </span>public.pem<span class="w"> </span>container.sif

<span class="go">  Verify with PGP:</span>
<span class="gp">  $ </span>apptainer<span class="w"> </span>verify<span class="w"> </span>container.sif

<span class="go">For additional help or support, please visit https://apptainer.org/help/</span>
</pre></div>
</div>
<p>Apptainer uses positional syntax (i.e., the order of commands and options
matters). Global options affecting the behavior of all commands follow
immediately after the main <code class="docutils literal notranslate"><span class="pre">apptainer</span></code> command. Then come subcommands,
followed by their options and arguments.</p>
<p>For example, to pass the <code class="docutils literal notranslate"><span class="pre">--debug</span></code> option to the main <code class="docutils literal notranslate"><span class="pre">apptainer</span></code>
command and run Apptainer with debugging messages on:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>--debug<span class="w"> </span>run<span class="w"> </span>docker://alpine
</pre></div>
</div>
<p>To pass the <code class="docutils literal notranslate"><span class="pre">--containall</span></code> option to the <code class="docutils literal notranslate"><span class="pre">run</span></code> command and run a
Apptainer image in an isolated manner:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>run<span class="w"> </span>--containall<span class="w"> </span>docker://alpine
</pre></div>
</div>
<p>Apptainer has the concept of command groups. For
instance, to list Linux capabilities for a particular user, you would
use the <code class="docutils literal notranslate"><span class="pre">list</span></code> command in the <code class="docutils literal notranslate"><span class="pre">capability</span></code> command group, as
follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>capability<span class="w"> </span>list<span class="w"> </span>myuser
</pre></div>
</div>
<p>Container authors might also write help docs specific to a container, or
for an internal module called an “app”. If those help docs exist for a
particular container, you can view them as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>inspect<span class="w"> </span>--helpfile<span class="w"> </span>container.sif<span class="w">  </span><span class="c1"># See the container&#39;s help, if provided</span>

<span class="gp">$ </span>apptainer<span class="w"> </span>inspect<span class="w"> </span>--helpfile<span class="w"> </span>--app<span class="o">=</span>foo<span class="w"> </span>foo.sif<span class="w">  </span><span class="c1"># See the help for the app foo, if provided</span>
</pre></div>
</div>
</section>
<section id="downloading-images">
<h2>Downloading images<a class="headerlink" href="#downloading-images" title="Link to this heading"></a></h2>
<p>You can use the <a class="reference internal" href="cli/apptainer_pull.html#apptainer-pull"><span class="std std-ref">pull</span></a> and <a class="reference internal" href="cli/apptainer_build.html#apptainer-build"><span class="std std-ref">build</span></a>
commands to download images from an external resource like an OCI registry.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">pull</span></code> with the <code class="docutils literal notranslate"><span class="pre">docker://</span></code> uri to reference OCI
images served from an OCI registry. In this case <code class="docutils literal notranslate"><span class="pre">pull</span></code> does not just
download an image file; OCI images are stored in layers, so <code class="docutils literal notranslate"><span class="pre">pull</span></code>
must also combine those layers into a usable Apptainer image.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>pull<span class="w"> </span>docker://alpine
</pre></div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">build</span></code> command to download pre-built images from
an external resource. When using <code class="docutils literal notranslate"><span class="pre">build</span></code> you must specify a name for
your container like so:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>build<span class="w"> </span>alpine.sif<span class="w"> </span>docker://alpine
</pre></div>
</div>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">pull</span></code>, <code class="docutils literal notranslate"><span class="pre">build</span></code> will convert your image to the latest
Apptainer image format after downloading it. <code class="docutils literal notranslate"><span class="pre">build</span></code> is like a
“Swiss Army knife” for container creation. In addition to downloading
images, you can use <code class="docutils literal notranslate"><span class="pre">build</span></code> to create images from other images or from
scratch using a <a class="reference internal" href="definition_files.html#definition-files"><span class="std std-ref">definition file</span></a>. You can also
use <code class="docutils literal notranslate"><span class="pre">build</span></code> to convert an image between the container formats
supported by Apptainer. To see a comparison of the Apptainer
definition file with Dockerfile, please see <a class="reference internal" href="docker_and_oci.html#sec-deffile-vs-dockerfile"><span class="std std-ref">this section</span></a>.</p>
</section>
<section id="interacting-with-images">
<span id="cowimage"></span><h2>Interacting with images<a class="headerlink" href="#interacting-with-images" title="Link to this heading"></a></h2>
<p>You can interact with images in several ways, each of which can accept
image URIs in addition to local image paths.</p>
<p>As an example, the following command will pull a <code class="docutils literal notranslate"><span class="pre">lolcow_latest.sif</span></code> image
from ghcr.io:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>pull<span class="w"> </span>docker://ghcr.io/apptainer/lolcow
</pre></div>
</div>
<section id="shell">
<h3>Shell<a class="headerlink" href="#shell" title="Link to this heading"></a></h3>
<p>The <a class="reference internal" href="cli/apptainer_shell.html#apptainer-shell"><span class="std std-ref">shell</span></a>
command allows you to spawn a new shell within your container and
interact with it as though it were a virtual machine.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>shell<span class="w"> </span>lolcow_latest.sif

<span class="go">Apptainer&gt;</span>
</pre></div>
</div>
<p>The change in prompt indicates that you have entered the container
(though you should not rely on prompt forms to determine whether you are in
a container or not).</p>
<p>Once inside of an Apptainer container, you are the same user as you
are on the host system.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Apptainer&gt; whoami</span>
<span class="go">david</span>

<span class="go">Apptainer&gt; id</span>
<span class="go">uid=1000(david) gid=1000(david) groups=1000(david),65534(nfsnobody)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">shell</span></code> also works with the <code class="docutils literal notranslate"><span class="pre">docker://</span></code>, <code class="docutils literal notranslate"><span class="pre">oras://</span></code>, and <code class="docutils literal notranslate"><span class="pre">library://</span></code>
URIs. This creates an ephemeral container that disappears
when the shell is exited.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>shell<span class="w"> </span>docker://ghcr.io/apptainer/lolcow
</pre></div>
</div>
</section>
<section id="executing-commands">
<h3>Executing Commands<a class="headerlink" href="#executing-commands" title="Link to this heading"></a></h3>
<p>The <a class="reference internal" href="cli/apptainer_exec.html#apptainer-exec"><span class="std std-ref">exec</span></a>
command allows you to execute a custom command within a container by
specifying the image file. For instance, to execute the <code class="docutils literal notranslate"><span class="pre">cowsay</span></code>
program within the <code class="docutils literal notranslate"><span class="pre">lolcow_latest.sif</span></code> container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>lolcow_latest.sif<span class="w"> </span>cowsay<span class="w"> </span>moo
<span class="go"> _____</span>
<span class="go">&lt; moo &gt;</span>
<span class="go"> -----</span>
<span class="go">        \   ^__^</span>
<span class="go">         \  (oo)\_______</span>
<span class="go">            (__)\       )\/\</span>
<span class="go">                ||----w |</span>
<span class="go">                ||     ||</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">exec</span></code> also works with the <code class="docutils literal notranslate"><span class="pre">docker://</span></code>, <code class="docutils literal notranslate"><span class="pre">oras://</span></code>, and <code class="docutils literal notranslate"><span class="pre">library://</span></code>
URIs. This creates an ephemeral container that executes a
command and disappears.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>docker://ghcr.io/apptainer/lolcow<span class="w"> </span>cowsay<span class="w"> </span><span class="s1">&#39;Fresh from the internet&#39;</span>
<span class="go"> _________________________</span>
<span class="go">&lt; Fresh from the internet &gt;</span>
<span class="go"> -------------------------</span>
<span class="go">        \   ^__^</span>
<span class="go">         \  (oo)\_______</span>
<span class="go">            (__)\       )\/\</span>
<span class="go">                ||----w |</span>
<span class="go">                ||     ||</span>
</pre></div>
</div>
</section>
<section id="running-a-container">
<span id="runcontainer"></span><h3>Running a container<a class="headerlink" href="#running-a-container" title="Link to this heading"></a></h3>
<p>Apptainer containers may contain <a class="reference internal" href="definition_files.html#runscript"><span class="std std-ref">runscripts</span></a>. These
are user-defined scripts that define the actions a container should
perform when someone runs it. The runscript can be triggered with the
<a class="reference internal" href="cli/apptainer_run.html#apptainer-run"><span class="std std-ref">run</span></a>
command, or simply by calling the container as though it were an
executable.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>run<span class="w"> </span>lolcow_latest.sif
<span class="go">______________________________</span>
<span class="go">&lt; Mon Aug 16 13:01:55 CDT 2021 &gt;</span>
<span class="go"> ------------------------------</span>
<span class="go">        \   ^__^</span>
<span class="go">         \  (oo)\_______</span>
<span class="go">            (__)\       )\/\</span>
<span class="go">                ||----w |</span>
<span class="go">                ||     ||</span>

<span class="gp">$ </span>./lolcow_latest.sif
<span class="go">______________________________</span>
<span class="go">&lt; Mon Aug 16 13:12:50 CDT 2021 &gt;</span>
<span class="go"> ------------------------------</span>
<span class="go">        \   ^__^</span>
<span class="go">         \  (oo)\_______</span>
<span class="go">            (__)\       )\/\</span>
<span class="go">                ||----w |</span>
<span class="go">                ||     ||</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">run</span></code> also works with the <code class="docutils literal notranslate"><span class="pre">docker://</span></code>, <code class="docutils literal notranslate"><span class="pre">oras://</span></code>, and <code class="docutils literal notranslate"><span class="pre">library://</span></code>
URIs. This creates an ephemeral container that runs and then
disappears.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>run<span class="w"> </span>docker://ghcr.io/apptainer/lolcow
<span class="go">______________________________</span>
<span class="go">&lt; Mon Aug 16 13:12:33 CDT 2021 &gt;</span>
<span class="go"> ------------------------------</span>
<span class="go">        \   ^__^</span>
<span class="go">         \  (oo)\_______</span>
<span class="go">            (__)\       )\/\</span>
<span class="go">                ||----w |</span>
<span class="go">                ||     ||</span>
</pre></div>
</div>
<section id="arguments-to-run">
<h4>Arguments to <code class="docutils literal notranslate"><span class="pre">run</span></code><a class="headerlink" href="#arguments-to-run" title="Link to this heading"></a></h4>
<p>You can pass arguments to the runscript of a container, if it accepts
them. For example, the default runscript of the <code class="docutils literal notranslate"><span class="pre">docker://alpine</span></code>
container passes any arguments to a shell. We can ask the container
to run <code class="docutils literal notranslate"><span class="pre">echo</span></code> command in this shell as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>run<span class="w"> </span>docker://alpine<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span>

<span class="go">hello</span>
</pre></div>
</div>
<p>Because Apptainer runscripts are evaluated shell scripts, arguments
can behave slightly differently than in Docker/OCI runtimes, if they
contain expressions that have special meaning to the shell. Here is an
illustrative example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>alpine<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;\$HOSTNAME&quot;</span>
<span class="gp">$</span>HOSTNAME

<span class="gp">$ </span>apptainer<span class="w"> </span>run<span class="w"> </span>docker://alpine<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;\$HOSTNAME&quot;</span>
<span class="go">p700</span>

<span class="gp">$ </span>apptainer<span class="w"> </span>run<span class="w"> </span>docker://alpine<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;\\\$HOSTNAME&quot;</span>
<span class="gp">$</span>HOSTNAME
</pre></div>
</div>
<p>To replicate Docker/OCI behavior, you may need additional escaping or
quoting of arguments.</p>
<p>Unlike the <code class="docutils literal notranslate"><span class="pre">run</span></code> command, the <code class="docutils literal notranslate"><span class="pre">exec</span></code> command does behave in the same
manner as Docker/OCI, because it calls the specified executable directly:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>docker://alpine<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;\$HOSTNAME&quot;</span>
<span class="gp">$</span>HOSTNAME

<span class="gp">$ </span>apptainer<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>docker://alpine<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;\\\$HOSTNAME&quot;</span>
<span class="go">\$HOSTNAME</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="working-with-files">
<h2>Working with Files<a class="headerlink" href="#working-with-files" title="Link to this heading"></a></h2>
<p>Files on the host are reachable from within the container:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Hello from inside the container&quot;</span><span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$HOME</span>/hostfile.txt

<span class="gp">$ </span>apptainer<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>lolcow_latest.sif<span class="w"> </span>cat<span class="w"> </span><span class="nv">$HOME</span>/hostfile.txt

<span class="go">Hello from inside the container</span>
</pre></div>
</div>
<p>This example works because <code class="docutils literal notranslate"><span class="pre">hostfile.txt</span></code> exists in the user’s home directory
(<code class="docutils literal notranslate"><span class="pre">$HOME</span></code>). By default, Apptainer bind mounts <code class="docutils literal notranslate"><span class="pre">$HOME</span></code>, the current
working directory, and additional system locations from the host into the
container.</p>
<p>You can specify additional directories to bind mount into your container
with the <code class="docutils literal notranslate"><span class="pre">--bind</span></code> option. In the following example, the <code class="docutils literal notranslate"><span class="pre">data</span></code> directory
on the host system is bind mounted to the <code class="docutils literal notranslate"><span class="pre">/mnt</span></code> directory inside the
container.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Drink milk (and never eat hamburgers).&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/data/cow_advice.txt

<span class="gp">$ </span>apptainer<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>--bind<span class="w"> </span>/data:/mnt<span class="w"> </span>lolcow_latest.sif<span class="w"> </span>cat<span class="w"> </span>/mnt/cow_advice.txt
<span class="go">Drink milk (and never eat hamburgers).</span>
</pre></div>
</div>
<p>Pipes and redirects also work with Apptainer commands, just like they
do with normal Linux commands:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>/data/cow_advice.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>apptainer<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>lolcow_latest.sif<span class="w"> </span>cowsay
<span class="go"> ________________________________________</span>
<span class="go">&lt; Drink milk (and never eat hamburgers). &gt;</span>
<span class="go"> ----------------------------------------</span>
<span class="go">        \   ^__^</span>
<span class="go">         \  (oo)\_______</span>
<span class="go">            (__)\       )\/\</span>
<span class="go">                ||----w |</span>
<span class="go">                ||     ||</span>
</pre></div>
</div>
</section>
<section id="building-images-from-scratch">
<span id="build-images-from-scratch"></span><h2>Building images from scratch<a class="headerlink" href="#building-images-from-scratch" title="Link to this heading"></a></h2>
<p id="sec-buildimagesfromscratch">Apptainer produces immutable images in the
Singularity Image File (SIF) format. This ensures reproducible and
verifiable images and allows for many extra benefits such as the ability
to sign and verify your containers.</p>
<p>However, during testing and debugging you may want an image format that
is writable. This way you can <code class="docutils literal notranslate"><span class="pre">shell</span></code> into the image and install
software and dependencies until you are satisfied that your container
will fulfill your needs. For these scenarios, Apptainer also
supports the <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> format (which is really just a directory).</p>
<section id="sandbox-directories">
<h3>Sandbox Directories<a class="headerlink" href="#sandbox-directories" title="Link to this heading"></a></h3>
<p>To build into a <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> (container in a directory) use the <code class="docutils literal notranslate"><span class="pre">build</span>
<span class="pre">--sandbox</span></code> command and option:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>build<span class="w"> </span>--sandbox<span class="w"> </span>ubuntu/<span class="w"> </span>docker://ubuntu
</pre></div>
</div>
<p>This command creates a directory called <code class="docutils literal notranslate"><span class="pre">ubuntu/</span></code> with an entire
Ubuntu Operating System and some Apptainer metadata in your current
working directory.</p>
<p>You can use commands like <code class="docutils literal notranslate"><span class="pre">shell</span></code>, <code class="docutils literal notranslate"><span class="pre">exec</span></code> , and <code class="docutils literal notranslate"><span class="pre">run</span></code> with this
directory just as you would with an Apptainer image. If you pass the
<code class="docutils literal notranslate"><span class="pre">--writable</span></code> option when you use your container, you can also write
files within the sandbox directory (provided you have the permissions to
do so).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>--writable<span class="w"> </span>ubuntu<span class="w"> </span>touch<span class="w"> </span>/foo

<span class="gp">$ </span>apptainer<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>ubuntu/<span class="w"> </span>ls<span class="w"> </span>/foo
<span class="go">/foo</span>
</pre></div>
</div>
</section>
<section id="converting-images-from-one-format-to-another">
<h3>Converting images from one format to another<a class="headerlink" href="#converting-images-from-one-format-to-another" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">build</span></code> command allows you to build a new container from an existing
container. This means that you can use it to convert a container from one format
to another. For instance, if you have already created a sandbox (directory) and
want to convert it to the Singularity Image Format, you can do so as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>build<span class="w"> </span>new.sif<span class="w"> </span>sandbox
</pre></div>
</div>
<p>Note, however, that this approach may break reproducibility, in the event that
you have altered your sandbox outside of the context of a <a class="reference internal" href="#qs-def-files"><span class="std std-ref">definition file</span></a>, so you are advised to exercise care.</p>
</section>
<section id="apptainer-definition-files">
<span id="qs-def-files"></span><h3>Apptainer Definition Files<a class="headerlink" href="#apptainer-definition-files" title="Link to this heading"></a></h3>
<p>For a reproducible, verifiable and production-quality container, it is
recommended that you build a SIF file using an Apptainer definition file.
This also makes it easy to add files, environment variables, and install custom
software. You can start with base images from Docker Hub and use
images directly from official repositories such as Ubuntu, Debian,
Fedora, Arch, and BusyBox.</p>
<p>A definition file has a header and a body. The header determines the
base container to begin with, and the body is further divided into
sections that perform tasks such as software installation, environment
setup, and copying files into the container from host system.</p>
<p>Here is an example of a definition file:</p>
<div class="highlight-apptainer notranslate"><div class="highlight"><pre><span></span><span class="k">BootStrap</span>: docker
<span class="k">From</span>: ubuntu:<span class="m">22.04</span>

<span class="gh">%post</span>
<span class="w">   </span>apt-get<span class="w"> </span>-y<span class="w"> </span>update
<span class="w">   </span>apt-get<span class="w"> </span>-y<span class="w"> </span>install<span class="w"> </span>cowsay<span class="w"> </span>lolcat

<span class="gh">%environment</span>
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">LC_ALL</span><span class="o">=</span>C
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/usr/games:<span class="nv">$PATH</span>

<span class="gh">%runscript</span>
<span class="w">   </span>date<span class="w"> </span><span class="p">|</span><span class="w"> </span>cowsay<span class="w"> </span><span class="p">|</span><span class="w"> </span>lolcat

<span class="gh">%labels</span>
<span class="w">   </span>Author<span class="w"> </span>Alice
</pre></div>
</div>
<p>To build a container from this definition file (assuming it is a file
named <code class="docutils literal notranslate"><span class="pre">lolcow.def</span></code>), you would call <code class="docutils literal notranslate"><span class="pre">build</span></code> as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>apptainer<span class="w"> </span>build<span class="w"> </span>lolcow.sif<span class="w"> </span>lolcow.def
</pre></div>
</div>
<p>In this example, the header tells Apptainer to use a base Ubuntu 22.04 image
from the Container Library. The other sections in this definition file are as
follows:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">%post</span></code> section is executed within the container at build time, after
the base OS has been installed. The <code class="docutils literal notranslate"><span class="pre">%post</span></code> section is therefore the place
to perform installations of new libraries and applications.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">%environment</span></code> section defines environment variables that will be
available to the container at runtime.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">%runscript</span></code> section defines actions for the container to take when it
is executed. (These commands will therefore not be run at build time.)</p></li>
<li><p>And finally, the <code class="docutils literal notranslate"><span class="pre">%labels</span></code> section allows for custom metadata to be
added to the container.</p></li>
</ul>
<p>This is a very small example of the things that you can do with a
<a class="reference internal" href="definition_files.html#definition-files"><span class="std std-ref">definition file</span></a>. You can also use an
existing container on your host system as a base.
Definition files also support <a class="reference internal" href="definition_files.html#sec-templating"><span class="std std-ref">“templating”</span></a>: the
ability to pass values from the command-line, or from a definitions file,
that will replace placeholders in the definition file at build time.</p>
<p>This quickstart document just scratches the surface of all of the things
you can do with Apptainer!</p>
<p>If you need additional help or support, see <a class="reference external" href="https://apptainer.org/help">https://apptainer.org/help</a>.</p>
</section>
</section>
<section id="apptainer-on-a-shared-resource">
<span id="installation-request"></span><h2>Apptainer on a shared resource<a class="headerlink" href="#apptainer-on-a-shared-resource" title="Link to this heading"></a></h2>
<p>Perhaps you are a user who wants a few talking points and background to
share with your administrator. Or maybe you are an administrator who
needs to decide whether to install Apptainer.</p>
<p>This document and the accompanying administrator documentation provide
answers to many common questions.</p>
<p>If you need to request an installation from your administrator, you may decide
to draft a message similar to this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Dear shared resource administrator,

We are interested in having Apptainer (https://apptainer.org)
installed on our shared resource. Apptainer containers will allow us to
build encapsulated environments, meaning that our work is reproducible and
we are empowered to choose all dependencies including libraries, operating
system, and custom software. Apptainer is already in use on many of the
top HPC centers around the world. Examples include:

    Texas Advanced Computing Center
    GSI Helmholtz Center for Heavy Ion Research
    Oak Ridge Leadership Computing Facility
    Purdue University
    National Institutes of Health HPC
    UFIT Research Computing at the University of Florida
    San Diego Supercomputing Center
    Lawrence Berkeley National Laboratory
    University of Chicago
    McGill HPC Centre/Calcul Québec
    Barcelona Supercomputing Center
    Sandia National Lab
    Argonne National Lab

Importantly, it has a vibrant team of developers, scientists, and HPC
administrators that invest heavily in the security and development of the
software, and are quick to respond to the needs of the community. To help
learn more about Apptainer, I thought these items might be of interest:

    - Security: A discussion of security concerns is discussed at
    https://apptainer.org/docs/admin/main/admin_quickstart.html

    - Installation:
    https://apptainer.org/docs/admin/main/installation.html

If you have questions about any of the above, you can contact one of the
sources listed at https://apptainer.org/help. I can do my best
to facilitate this interaction if help is needed.

Thank you kindly for considering this request!

Best,

User
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction to Apptainer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="security.html" class="btn btn-neutral float-right" title="Security in Apptainer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
    <br>
    &copy; Contributors to the Apptainer project, established as Apptainer a Series of LF Projects LLC
    <br>
    &copy; 2017-2022, Sylabs Inc


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>